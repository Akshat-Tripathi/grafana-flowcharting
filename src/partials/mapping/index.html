<div class="edit-tab-content" id="templateMapping">
  <div class="editor-row">
    <div role="table" class="GF_table-main" id="RulesTable">
      <div class="custom-scrollbar" style="position: relative; overflow: hidden; width: 100%; height: auto; min-height: 0px; max-height: 100%;box-sizing: inherit;">
        <div class="view" style="position: relative; overflow: scroll; margin-right: -8px; margin-bottom: -8px; max-height: calc(100% + 8px);">
            <!-- THEAD -->
            <div class="GF_table-thead GF_unselectable" role="row" ng-mouseup="editor.rulesTable.onMouseUp($event)" ng-mousemove="editor.rulesTable.onMouseMove($event)" ng-mouseleave="editor.rulesTable.onMouseUp($event)">
              <!-- HEADERS -->
              <!-- EXPAND -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('expand')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('expand')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>&nbsp;</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize;"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
              <!-- RULE NAME -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('rule')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('rule')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>{{editor.rulesTable.getLabel('rule')}}</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
              <!-- LEVEL -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('level')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('level')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>{{editor.rulesTable.getLabel('level')}}</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize;"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
              <!-- RAW VALUE -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('rval')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('rval')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>{{editor.rulesTable.getLabel('rval')}}</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize;"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
              <!-- FORMATED VALUE -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('fval')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('fval')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>{{editor.rulesTable.getLabel('fval')}}</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize;"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
              <!-- COLOR LEVEL -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('color')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('color')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>{{editor.rulesTable.getLabel('color')}}</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize;"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
              <!-- ACTIONS -->
              <div class="GF_table-columnheader" colspan="1" role="columnheader" ng-style="{'width' : editor.rulesTable.getWidth('actions')}">
                <div ng-attr-title="{{editor.rulesTable.getDesc('actions')}}" class="GF_table-title" style="cursor: pointer;">
                  <div>&nbsp;</div>
                </div>
                <div draggable="false" role="separator" class="GF_table-resizeHandle" style="cursor: ew-resize;"  ng-mousedown="editor.rulesTable.onMouseDown($event)">
                </div>
              </div>
            </div>
            <!-- TBODY -->
            <div class="GF_table-body">
              <div role="row" class="GF_table-rows" ng-repeat="rule in editor.rulesHandler.getRules()">
                <!-- CELLS -->
                <div class="GF_table-row_line" ng-mouseover="editor.highlightCells(rule)" ng-mouseleave="editor.unhighlightCells(rule)">
                  <!-- EXPAND -->
                  <div role="cell" class="GF_table-cells" id="expand" ng-style="{'width' : editor.rulesTable.getWidth('expand')}">
                    <div class="GF_table-content GF_unselectable" style="text-align: center;cursor: pointer;">
                      <span class="rule-extend" ng-click="rule.data.reduce=!rule.data.reduce">
                        <i class="fa fa-chevron-right" ng-class="{'fa-chevron-right': rule.data.reduce, 'fa-chevron-down': rule.data.reduce === false}"> </i>
                      </span>
                    </div>
                  </div>
                  <!-- RULE NAME -->
                  <div role="cell" class="GF_table-cells" id="rule" ng-style="{'width' : editor.rulesTable.getWidth('rule')}">
                    <div class="GF_table-content">
                      {{rule.data.alias}}
                    </div>
                  </div>
                  <!-- LEVEL -->
                  <div role="cell" class="GF_table-cells" id="level" style="text-align: center;" ng-style="{'width' : editor.rulesTable.getWidth('level')}">
                    <div class="GF_table-content">
                      <span ng-show="rule.highestLevel >= 0">{{rule.highestLevel}}</span>
                    </div>
                  </div>
                  <!-- HIGTEST RAW VALUE -->
                  <div role="cell" class="GF_table-cells" id="rval" ng-style="{'width' : editor.rulesTable.getWidth('rval')}">
                    <div class="GF_table-content">
                      {{rule.highestValue}}
                    </div>
                  </div>
                  <!-- HIGTEST FORMATED VALUE -->
                  <div role="cell" class="GF_table-cells" id="fval" ng-style="{'width' : editor.rulesTable.getWidth('fval')}">
                    <div class="GF_table-content">
                      {{rule.highestFormattedValue}}
                    </div>
                  </div>
                  <!-- COLOR -->
                  <div role="cell" class="GF_table-cells" id="fval" ng-style="{'width' : editor.rulesTable.getWidth('color')}">
                    <div class="GF_table-content" style="text-align: center;">
                      <span style="color : {{rule.highestColor}}" ng-if="rule.highestColor !== null && rule.highestColor.length > 0">
                        <i class="fa fa-w fa-square"></i>
                      </span>
                    </div>
                  </div>
                  <!-- ACTIONS -->
                  <div role="cell" class="GF_table-cells" id="actions" ng-style="{'width' : editor.rulesTable.getWidth('actions')}">
                    <div class="GF_table-content GF_unselectable">
                      <span bs-tooltip="rule.removeClick > 1 ? 'Click twice to remove rule' : 'Click to remove rule'">
                        <i class="fa fa-w fa-remove pointer" ng-click="editor.removeRule(rule)" ng-style="rule.removeClick == 1 && { 'color' : 'brown' }"></i>
                      </span>
                      <span bs-tooltip="'Clone the rule'" style='margin-left: 5px;'>
                        <i class="fa fa-copy" ng-click="editor.cloneRule(rule)"></i>
                      </span>
                      <span ng-click="editor.toggleShow(rule,!rule.data.hidden)" bs-tooltip="rule.data.hidden ? 'Show/enable this rule' : 'Hide/disable this rule' " style='margin-left: 5px;'>
                        <i class="fa fa-chevron-right" ng-class="{'fa fa-w fa-eye pointer': !rule.isHidden(), 'fa fa-w fa-eye-slash pointer': rule.isHidden()}"></i>
                      </span>
                      <span>
                        <i class="fa fa-fw" ng-if="editor.isFirstRule($index)">&nbsp;</i>
                        <i class="fa fa-arrow-up" bs-tooltip="'Move up'"  ng-if="!editor.isFirstRule($index)" ng-click="editor.moveRule(rule, true)" style='margin-left: 5px;'></i>
                      </span>
                      <span style='margin-left: 5px;'>
                        <!-- <i class="fa fa-fw" ng-if="editor.isLastRule($index)">&nbsp;</i> -->
                        <i class="fa fa-arrow-down" bs-tooltip="'Move down'" ng-if="!editor.isLastRule($index)" ng-click="editor.moveRule(rule, false)"></i>
                      </span>
                    </div>
                  </div>
                </div>
                <div ng-hide="rule.data.reduce==true" class="GF_table-row_body">
                  <!-- GRAPH TOOLTIP -->
                  <ng-include src="$GF.plugin.getPartialPath() + 'mapping/rule/index.html'"> </ng-include>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
  <div class="editor-row">
    <div class="gf-form-button-row">
      <button class="btn btn-inverse" ng-click="editor.rulesHandler.addRule('/.*/')"><i class="fa fa-plus"></i>&nbsp;Add
        Rule</button>
    </div>
  </div>
</div>