/*! For license information please see module.js.LICENSE.txt */
define(["lodash","@grafana/data","app/plugins/sdk","app/core/utils/kbn","app/core/time_series2"],(function(__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__3__,__WEBPACK_EXTERNAL_MODULE__6__,__WEBPACK_EXTERNAL_MODULE__9__,__WEBPACK_EXTERNAL_MODULE__15__){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=32)}([function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return m}));var a=n(1),r=n(2),i=n.n(r);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function h(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function t(){c(this,t),this.CONF_PATH_LIBS="libs/",this.CONF_PATH_DRAWIO="libs/drawio/",this.CONF_PATH_STATIC="static/",this.CONF_PATH_PARTIALS="partials/",this.CONF_PATH_STYLES="styles/",this.CONF_FILE_PLUGINJSON="./plugin.json",this.CONF_FILE_DEFAULTDIO="static/defaultGraph.drawio",this.CONF_FILE_DEFAULTCSV="static/defaultGraph.csv",this.CONF_FILE_SHAPESTXT="static/shapes.txt",this.CONF_FILE_APPJS="libs/drawio/js/app.min.js",this.CONF_FILE_SHAPESJS="libs/drawio/js/shapes.min.js",this.CONF_FILE_VIEWERJS="libs/drawio/js/viewer.min.js",this.CONF_FILE_PRECONFIGJS="libs/drawio/js/PreConfig.js",this.CONF_FILE_POSTCONFIGJS="libs/drawio/js/PostConfig.js",this.CONF_COLORS_STEPS=6,this.CONF_COLORS_MS=30,this.CONF_ANIMS_STEP=5,this.CONF_ANIMS_MS=40,this.CONF_BLINK_COLOR="#f5f242",this.VAR_STG_SHAPES="shapestext",this.VAR_TBL_SHAPES="shapesarray",this.VAR_STR_VIEWERJS="viewer.min.js",this.VAR_STR_SHAPESJS="shapes.min.js",this.VAR_STG_CTXROOT="contextroot",this.VAR_OBJ_TEMPLATESRV="templatesrv",this.VAR_OBJ_CTRL="ctrl",this.VAR_MAP_INTERVAL="interval",this.VAR_STR_RULENAME="_rule",this.VAR_NUM_LEVEL="_level",this.VAR_NUM_VALUE="_value",this.VAR_STR_FORMATED="_formated",this.VAR_STR_COLOR="_color",this.TOOLTIP_APPLYON=[{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],this.COLOR_APPLYON=[{text:"Never",value:"n"},{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],this.TEXT_APPLYON=[{text:"Never",value:"n"},{text:"When Metric Displayed",value:"wmd"},{text:"Warning / Critical",value:"wc"},{text:"Critical Only",value:"co"}],this.LINK_APPLYON=[{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],this.VALUE_TYPES=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"}],this.METRIC_TYPES=[{text:"Series",value:"serie"},{text:"Table",value:"table"}],this.SOURCE_TYPES=[{text:"XML",value:"xml"},{text:"CSV",value:"csv"}],this.DIOTHEME_TYPES=[{text:"Dark",value:"dark"},{text:"Light",value:"kennedy"},{text:"Mobile",value:"minimal"},{text:"atlas",value:"atlas"}],this.IDENT_TYPES=[{text:"Id",value:"id"},{text:"Label",value:"value"}],this.AGGREGATION_TYPES=[{text:"First",value:"first"},{text:"Last",value:"current"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Sum",value:"total"},{text:"Avg",value:"avg"},{text:"Count",value:"count"},{text:"Delta",value:"delta"},{text:"Range",value:"range"},{text:"Diff",value:"diff"},{text:"Time of last point",value:"last_time"}],this.TOOLTIP_GRAPH_TYPES=[{text:"Line",value:"line"},{text:"Histogram",value:"bar"}],this.TOOLTIP_GRAPH_SCALE_TYPES=[{text:"Linear",value:"linear"},{text:"Logarithmic",value:"log"}],this.TOOLTIP_GRAPH_SIZE_TYPES=[{text:"Adjustable",value:"100%"},{text:"Small",value:"100px"},{text:"Medium",value:"200px"},{text:"Large",value:"400px"}],this.TOOLTIP_DIRECTION_TYPES=[{text:"Vertical",value:"v"},{text:"Horizontal ",value:"h"}],this.VALUE_DATEFORMAT_TYPES=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"YYYY-MM-DD HH:mm:ss.SSS",value:"YYYY-MM-DD HH:mm:ss.SSS"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"},{text:"YYYY-MM-DD",value:"YYYY-MM-DD"}],this.VALUEMAPPINGTYPES=[{text:"Value to text",value:1},{text:"Range to text",value:2}],this.TEXTMETHODS=[{text:"All content",value:"content"},{text:"Substring",value:"pattern",placeholder:"/RegEx/"},{text:"Append (Space) ",value:"as"},{text:"Append (New line) ",value:"anl"}],this.COLORMETHODS=[{text:"Shape Stroke/Border",value:"strokeColor"},{text:"Shape Fill",value:"fillColor"},{text:"Shape Gradient",value:"gradientColor"},{text:"Label font color",value:"fontColor"},{text:"Label background color",value:"labelBackgroundColor"},{text:"Label border color",value:"labelBorderColor"},{text:"Image background",value:"imageBackground"},{text:"Image border",value:"imageBorder"}],this.EVENTMETHODS=[{text:"Shape : Change form (text)",value:"shape",type:"text",placeholder:"Shape name"},{text:"Shape : Rotate Shape (0-360)",value:"rotation",type:"number",placeholder:"0-360",default:0},{text:"Shape : Blink (frequence ms)",value:"blink",type:"number",placeholder:"Number in ms",default:500},{text:"Shape : Hide/Show (0|1)",value:"visibility",type:"number",placeholder:"0 or 1",typeahead:"0|1"},{text:"Shape : Change height (number)",value:"height",type:"number",placeholder:"Number of px"},{text:"Shape : Change width (number)",value:"width",type:"number",placeholder:"Number of px"},{text:"Shape : Opacity (0-100)",value:"opacity",type:"number",placeholder:"0-100",default:100},{text:"Shape : Gradient direction",value:"gradientDirection",type:"text",placeholder:"Direction name",default:"south",typeahead:"south|east|north|west"},{text:"Shape : Collapse/Expande (0|1)",value:"fold",type:"number",placeholder:"0 or 1",typeahead:"0|1",default:"1"},{text:"Shape : Change position in Bar (0-100)",value:"barPos",type:"number",placeholder:"0-100"},{text:"Arrow : Replace text (text)",value:"text",type:"text",placeholder:"Text"},{text:"Arrow : change start marker (text)",value:"startArrow",type:"text",placeholder:"Marker",typeahead:"none|classic|classicThin|block|blockThin|open|openThin|oval|diamond|diamondThin|openAsync|async|box|halfCircle|dash|cross|circlePlus|circle|ERone|ERmandOne|ERoneToMany|ERzeroToOne"},{text:"Arrow : change end marker (text)",value:"endArrow",type:"text",placeholder:"Marker",typeahead:"none|classic|classicThin|block|blockThin|open|openThin|oval|diamond|diamondThin|openAsync|async|box|halfCircle|dash|cross|circlePlus|circle|ERone|ERmandOne|ERoneToMany|ERzeroToOne"},{text:"Label : Replace text (text)",value:"text",type:"text",placeholder:"Text"},{text:"Label : Font Size (numeric)",value:"fontSize",type:"number",placeholder:"Number"},{text:"Label : Opacity (numeric)",value:"textOpacity",type:"number",placeholder:"0-100",default:100},{text:"Image : Change URL (text)",value:"image",type:"text",placeholder:"Url"}],this.LOCALVARIABLENAMES=[{text:"Name of the rule",value:this.VAR_STR_RULENAME},{text:"Current color according to the thresholds",value:this.VAR_STR_COLOR},{text:"Current raw value according to the aggregation",value:this.VAR_NUM_VALUE},{text:"Current level according to the thresholds",value:this.VAR_NUM_LEVEL},{text:"Current formated value accordingto the type",value:this.VAR_STR_FORMATED}]},d=function(){function t(){c(this,t),this._variables=new Map}return h(t,[{key:"set",value:function(t,e){return this._variables.set(t,e),this}},{key:"unset",value:function(t){return this._variables.delete(t),this}},{key:"get",value:function(t){return this._variables.get(t)}},{key:"keys",value:function(){return Array.from(this._variables.keys())}},{key:"getFullVarsNames",value:function(){return m.getGrafanaVars().concat(this.getVarsNames())}},{key:"getVarsNames",value:function(){return this.keys().map((function(t){return"${"+t+"}"}))}},{key:"clear",value:function(){return this._variables.clear(),this}},{key:"replaceText",value:function(t){try{var e=m.getVar(m.CONSTANTS.VAR_OBJ_TEMPLATESRV);t=void 0!==e?e.replaceWithText(t):t;var n,a=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,i=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){s=!0,r=t},f:function(){try{i||null==a.return||a.return()}finally{if(s)throw r}}}}(this._variables);try{for(a.s();!(n=a.n()).done;){var r=s(n.value,2),i=r[0],l=r[1];t=t.replace("${"+i+"}",l)}}catch(t){a.e(t)}finally{a.f()}}catch(e){return t}return t}},{key:"eval",value:function(t){var e=this.replaceText(t);return m.utils.evalIt(e)}}],[{key:"getAvailableLocalVarNames",value:function(){return m.CONSTANTS.LOCALVARIABLENAMES.map((function(t){return"${"+t.value+"}"}))}}]),t}(),p=function(){var t=function(){function t(){c(this,t)}return h(t,[{key:"debug",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.DEBUG)&&(r=n.shift(),(a=console).debug.apply(a,["GF DEBUG : ".concat(r)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}},{key:"warn",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.WARN)&&(r=n.shift(),(a=console).warn.apply(a,["GF WARN : ".concat(r)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}},{key:"info",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.INFO)&&(r=n.shift(),(a=console).info.apply(a,["GF INFO : ".concat(r)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}},{key:"error",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.ERROR)&&(r=n.shift(),(a=console).error.apply(a,["GF ERROR : ".concat(r)].concat(n)));case 1:case"end":return e.stop()}}),e)})))}}],[{key:"init",value:function(){return new t}},{key:"toDisplay",value:function(e){return void 0!==t.logDisplay&&!0===t.logDisplay&&void 0!==t.logLevel&&e>=t.logLevel}}]),t}();return t.DEBUG=0,t.INFO=1,t.WARN=2,t.ERROR=3,t.logLevel=t.WARN,t.logDisplay=!0,t}(),g=function(){var e=function(){function e(){c(this,e)}return h(e,[{key:"getRepo",value:function(){var t="";return e.data.info.links.forEach((function(e){"Documentation"===e.name&&(t=e.url)})),t}},{key:"getVersion",value:function(){return e.data.info.version}},{key:"getRootPath",value:function(){return m.getVar(m.CONSTANTS.VAR_STG_CTXROOT)}},{key:"getLibsPath",value:function(){return"".concat(m.getVar(m.CONSTANTS.VAR_STG_CTXROOT),"libs/")}},{key:"getDrawioPath",value:function(){return"".concat(this.getLibsPath(),"drawio/")}},{key:"getStaticPath",value:function(){return"".concat(this.getRootPath(),"static/")}},{key:"getMxBasePath",value:function(){return"".concat(this.getDrawioPath(),"mxgraph/")}},{key:"getMxStylePath",value:function(){return"".concat(this.getDrawioPath(),"styles/")}},{key:"getShapesPath",value:function(){return"".concat(this.getDrawioPath(),"/shapes/")}},{key:"getPartialPath",value:function(){return"".concat(this.getRootPath(),"partials/")}},{key:"getStencilsPath",value:function(){return"".concat(this.getDrawioPath(),"/stencils/")}},{key:"getMxCssPath",value:function(){return"".concat(this.getDrawioPath(),"styles/")}},{key:"getMxResourcePath",value:function(){return"".concat(this.getMxBasePath(),"css/")}},{key:"getMxImagePath",value:function(){return"".concat(this.getMxBasePath(),"images/")}}],[{key:"init",value:function(n,a){var r=new e;return this.contextRoot=e.defaultContextRoot,void 0===n?(this.contextRoot=t,this.contextRoot.length>0&&m.setVar(m.CONSTANTS.VAR_STG_CTXROOT,this.contextRoot)):this.contextRoot=n.$root.appSubUrl+this.defaultContextRoot,m.setVar(m.CONSTANTS.VAR_OBJ_TEMPLATESRV,a),m.setVar(m.CONSTANTS.VAR_STG_CTXROOT,this.contextRoot),r}}]),e}();return e.data=n(17),e.defaultContextRoot="/public/plugins/agenty-flowcharting-panel/",e}(),v=function(){var t=function(){function t(e){c(this,t),t.enable&&void 0!==e&&(this.trace={Name:e,Id:m.utils.uniqueID(),Args:void 0,Return:void 0,Before:Date.now(),End:void 0,ExecTime:void 0,Indent:t.indent},t.trc.set(this.trace.Id,this.trace))}return h(t,[{key:"before",value:function(e){if(t.enable&&void 0!==e){var n=new t(e);return t.indent++,t._inc(e),n}return{after:function(){}}}},{key:"after",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.enable&&void 0!==this.trace&&this.trace&&(this.trace.End=Date.now(),t.indent--);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"clear",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.enable&&t.trc.clear();case 1:case"end":return e.stop()}}),e)})))}},{key:"resume",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.enable&&(n=[],a=[],t.trc.forEach((function(e){e.ExecTime=e.End-e.Before,t.fn.get(e.Name).TotalTimes+=e.ExecTime,n.push(e)})),console.table(n,["Indent","Name","ExecTime"]),t.fn.forEach((function(t){a.push(t)})),console.table(a,["Function","Calls","TotalTimes"]),t.trc.clear(),t.fn.clear());case 1:case"end":return e.stop()}}),e)})))}}],[{key:"init",value:function(){return new t}},{key:"_inc",value:function(e){var n=t.fn.get(e);void 0===n&&(n={Calls:0,Function:e,TotalTimes:0}),n.Calls++,t.fn.set(e,n)}}]),t}();return t.enable=!1,t.trc=new Map,t.fn=new Map,t.indent=0,t}(),m=function(){var t=function(){function t(){c(this,t)}return h(t,null,[{key:"init",value:function(t,e){return this.plugin=g.init(t,e),this}},{key:"me",value:function(){return this}},{key:"createLocalVars",value:function(){return new d}},{key:"getGlobalVars",value:function(){return void 0===t._globalvars&&(t._globalvars=new d),t._globalvars}},{key:"getGrafanaVars",value:function(){var e=t.getVar(t.CONSTANTS.VAR_OBJ_TEMPLATESRV);return null!=e?i.a.map(e.variables,(function(t){return"${".concat(t.name,"}")})):[]}},{key:"getVar",value:function(e){return t.getGlobalVars().get(e)}},{key:"setVar",value:function(e,n){t.getGlobalVars().set(e,n)}},{key:"unsetVar",value:function(e){t.getGlobalVars().unset(e)}},{key:"getFullAvailableVarNames",value:function(){return d.getAvailableLocalVarNames().concat(t.getGrafanaVars())}},{key:"getIntervalCounter",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var a=[],r=e-t,i=Math.round(r/n),s=t,o=0;for(o=0;o<n;o++)s+=i,a.push(s);return a[o]=e,a}},{key:"setInterval",value:function(e,n){var a=t.getVar(t.CONSTANTS.VAR_MAP_INTERVAL);void 0===a&&(a=new Set,t.setVar(t.CONSTANTS.VAR_MAP_INTERVAL,a));var r=window.setInterval(e,n);return a.add(r),r}},{key:"clearInterval",value:function(e){var n=t.getVar(t.CONSTANTS.VAR_MAP_INTERVAL);if(void 0!==n){try{window.clearInterval(e)}catch(n){t.log.warn("Failed to clear interval thread",e,n)}n.delete(e)}}},{key:"loadLocalFile",value:function(e,n){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==t.getVar(e)){a.next=16;break}if(void 0===(r=t.getVar(t.CONSTANTS.VAR_STG_CTXROOT))){a.next=15;break}if(i="".concat(r,"/").concat(n),!window.fetch){a.next=9;break}fetch(i).then((function(n){n.ok&&n.text().then((function(n){return t.log.info("loadLocalFile called succesfully",i),t.setVar(e,n),n})).catch((function(e){return t.log.error("Error when download text file",i,e)}))})).catch((function(e){return t.log.error("Error when download file",i,e)})),a.next=13;break;case 9:if(!(s=t.utils.loadFile(n))){a.next=13;break}return t.setVar(e,t.utils.loadFile(n)),a.abrupt("return",s);case 13:a.next=16;break;case 15:t.log.warn("loadLocalFile Contexroot : ",r);case 16:return a.abrupt("return",!1);case 17:case"end":return a.stop()}}),a)})))}},{key:"popover",value:function(e,n,a){var r=t.plugin.getRepo(),i="".concat(this.plugin.getRepo(),"images/"),s=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),o="".concat(s),l="",u="";return n&&(l='<a href="'.concat(r).concat(n,'" target="_blank"><i class="fa fa-book fa-fw"></i>Help</a>')),a&&(u='<a href="'.concat(i).concat(a,'.png" target="_blank"><i class="fa fa-image fa-fw"></i>Example</a>')),'\n    <div id="popover" style="display:flex;flex-wrap:wrap;width: 100%;">\n      <div style="flex:1;height:100px;margin-bottom: 20px;">'.concat(o,'</div>\n      <div style="flex:1;height:100px;margin-bottom: 20px;">').concat(l,'</div>\n      <div style="flex-basis: 100%;height:100px;margin-bottom:20px;">').concat(u,"</div>\n    </div>")}},{key:"destroy",value:function(){var e=t.getVar("interval");void 0!==e&&(e.forEach((function(e){return t.clearInterval(e)})),e.clear())}}]),t}();return t._globalvars=new d,t.CONSTANTS=new f,t.log=p.init(),t.trace=v.init(),t.DEBUG=!1,t.utils=n(18),t}()}).call(this,"/")},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));function a(t,e,n,a){return new(n||(n=Promise))((function(r,i){function s(t){try{l(a.next(t))}catch(t){i(t)}}function o(t){try{l(a.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((a=a.apply(t,e||[])).next())}))}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__3__},function(t,e,n){"use strict";var a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)r(n,a)&&(t[a]=n[a])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,a,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+a),r);else for(var i=0;i<a;i++)t[r+i]=e[n+i]},flattenChunks:function(t){var e,n,a,r,i,s;for(a=0,e=0,n=t.length;e<n;e++)a+=t[e].length;for(s=new Uint8Array(a),r=0,e=0,n=t.length;e<n;e++)i=t[e],s.set(i,r),r+=i.length;return s}},s={arraySet:function(t,e,n,a,r){for(var i=0;i<a;i++)t[r+i]=e[n+i]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(a)},function(t,e,n){t.exports=function(){"use strict";for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e={},n=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<a.length;n+=1){var r=a[n];e["[object "+r+"]"]=r.toLowerCase()}var i=function(t){return e[Object.prototype.toString.call(t)]||"object"},s=Math.PI,o={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var n=0;n<=3;n++)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]=t(e[n],0,255)):3===n&&(e[n]=t(e[n],0,1));return e},limit:t,type:i,unpack:function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==i(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},last:function(t){if(t.length<2)return null;var e=t.length-1;return"string"==i(t[e])?t[e].toLowerCase():null},PI:s,TWOPI:2*s,PITHIRD:s/3,DEG2RAD:s/180,RAD2DEG:180/s},l={format:{},autodetect:[]},u=o.last,h=o.clip_rgb,c=o.type,f=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===c(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var a=u(t),r=!1;if(!a){r=!0,l.sorted||(l.autodetect=l.autodetect.sort((function(t,e){return e.p-t.p})),l.sorted=!0);for(var i=0,s=l.autodetect;i<s.length;i+=1){var o=s[i];if(a=o.test.apply(o,t))break}}if(!l.format[a])throw new Error("unknown format: "+t);var f=l.format[a].apply(null,r?t:t.slice(0,-1));n._rgb=h(f),3===n._rgb.length&&n._rgb.push(1)};f.prototype.toString=function(){return"function"==c(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var d=f,p=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(p.Color,[null].concat(t)))};p.Color=d,p.version="2.1.0";var g=p,v=o.unpack,m=Math.max,y=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=v(t,"rgb"),a=n[0],r=n[1],i=n[2],s=1-m(a/=255,m(r/=255,i/=255)),o=s<1?1/(1-s):0,l=(1-a-s)*o,u=(1-r-s)*o,h=(1-i-s)*o;return[l,u,h,s]},b=o.unpack,x=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=b(t,"cmyk"))[0],a=t[1],r=t[2],i=t[3],s=t.length>4?t[4]:1;return 1===i?[0,0,0,s]:[n>=1?0:255*(1-n)*(1-i),a>=1?0:255*(1-a)*(1-i),r>=1?0:255*(1-r)*(1-i),s]},w=o.unpack,k=o.type;d.prototype.cmyk=function(){return y(this._rgb)},g.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["cmyk"])))},l.format.cmyk=x,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=w(t,"cmyk"),"array"===k(t)&&4===t.length)return"cmyk"}});var _=o.unpack,S=o.last,E=function(t){return Math.round(100*t)/100},C=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=_(t,"hsla"),a=S(t)||"lsa";return n[0]=E(n[0]||0),n[1]=E(100*n[1])+"%",n[2]=E(100*n[2])+"%","hsla"===a||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,a="hsla"):n.length=3,a+"("+n.join(",")+")"},O=o.unpack,M=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=O(t,"rgba"))[0],a=t[1],r=t[2];n/=255,a/=255,r/=255;var i,s,o=Math.min(n,a,r),l=Math.max(n,a,r),u=(l+o)/2;return l===o?(i=0,s=Number.NaN):i=u<.5?(l-o)/(l+o):(l-o)/(2-l-o),n==l?s=(a-r)/(l-o):a==l?s=2+(r-n)/(l-o):r==l&&(s=4+(n-a)/(l-o)),(s*=60)<0&&(s+=360),t.length>3&&void 0!==t[3]?[s,i,u,t[3]]:[s,i,u]},T=o.unpack,A=o.last,R=Math.round,N=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=T(t,"rgba"),a=A(t)||"rgb";return"hsl"==a.substr(0,3)?C(M(n),a):(n[0]=R(n[0]),n[1]=R(n[1]),n[2]=R(n[2]),("rgba"===a||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,a="rgba"),a+"("+n.slice(0,"rgb"===a?3:4).join(",")+")")},L=o.unpack,D=Math.round,P=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var a,r,i,s=(e=L(e,"hsl"))[0],o=e[1],l=e[2];if(0===o)a=r=i=255*l;else{var u=[0,0,0],h=[0,0,0],c=l<.5?l*(1+o):l+o-l*o,f=2*l-c,d=s/360;u[0]=d+1/3,u[1]=d,u[2]=d-1/3;for(var p=0;p<3;p++)u[p]<0&&(u[p]+=1),u[p]>1&&(u[p]-=1),6*u[p]<1?h[p]=f+6*(c-f)*u[p]:2*u[p]<1?h[p]=c:3*u[p]<2?h[p]=f+(c-f)*(2/3-u[p])*6:h[p]=f;a=(t=[D(255*h[0]),D(255*h[1]),D(255*h[2])])[0],r=t[1],i=t[2]}return e.length>3?[a,r,i,e[3]]:[a,r,i,1]},I=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,F=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,z=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,G=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,V=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,H=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,j=Math.round,B=function(t){var e;if(t=t.toLowerCase().trim(),l.format.named)try{return l.format.named(t)}catch(t){}if(e=t.match(I)){for(var n=e.slice(1,4),a=0;a<3;a++)n[a]=+n[a];return n[3]=1,n}if(e=t.match(F)){for(var r=e.slice(1,5),i=0;i<4;i++)r[i]=+r[i];return r}if(e=t.match(z)){for(var s=e.slice(1,4),o=0;o<3;o++)s[o]=j(2.55*s[o]);return s[3]=1,s}if(e=t.match(G)){for(var u=e.slice(1,5),h=0;h<3;h++)u[h]=j(2.55*u[h]);return u[3]=+u[3],u}if(e=t.match(V)){var c=e.slice(1,4);c[1]*=.01,c[2]*=.01;var f=P(c);return f[3]=1,f}if(e=t.match(H)){var d=e.slice(1,4);d[1]*=.01,d[2]*=.01;var p=P(d);return p[3]=+e[4],p}};B.test=function(t){return I.test(t)||F.test(t)||z.test(t)||G.test(t)||V.test(t)||H.test(t)};var U=B,Y=o.type;d.prototype.css=function(t){return N(this._rgb,t)},g.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["css"])))},l.format.css=U,l.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Y(t)&&U.test(t))return"css"}});var X=o.unpack;l.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=X(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},g.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["gl"])))},d.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var $=o.unpack,Z=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,a=$(t,"rgb"),r=a[0],i=a[1],s=a[2],o=Math.min(r,i,s),l=Math.max(r,i,s),u=l-o,h=100*u/255,c=o/(255-u)*100;return 0===u?n=Number.NaN:(r===l&&(n=(i-s)/u),i===l&&(n=2+(s-r)/u),s===l&&(n=4+(r-i)/u),(n*=60)<0&&(n+=360)),[n,h,c]},W=o.unpack,K=Math.floor,J=function(){for(var t,e,n,a,r,i,s=[],o=arguments.length;o--;)s[o]=arguments[o];var l,u,h,c=(s=W(s,"hcg"))[0],f=s[1],d=s[2];d*=255;var p=255*f;if(0===f)l=u=h=d;else{360===c&&(c=0),c>360&&(c-=360),c<0&&(c+=360);var g=K(c/=60),v=c-g,m=d*(1-f),y=m+p*(1-v),b=m+p*v,x=m+p;switch(g){case 0:l=(t=[x,b,m])[0],u=t[1],h=t[2];break;case 1:l=(e=[y,x,m])[0],u=e[1],h=e[2];break;case 2:l=(n=[m,x,b])[0],u=n[1],h=n[2];break;case 3:l=(a=[m,y,x])[0],u=a[1],h=a[2];break;case 4:l=(r=[b,m,x])[0],u=r[1],h=r[2];break;case 5:l=(i=[x,m,y])[0],u=i[1],h=i[2]}}return[l,u,h,s.length>3?s[3]:1]},q=o.unpack,Q=o.type;d.prototype.hcg=function(){return Z(this._rgb)},g.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["hcg"])))},l.format.hcg=J,l.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=q(t,"hcg"),"array"===Q(t)&&3===t.length)return"hcg"}});var tt=o.unpack,et=o.last,nt=Math.round,at=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=tt(t,"rgba"),a=n[0],r=n[1],i=n[2],s=n[3],o=et(t)||"auto";void 0===s&&(s=1),"auto"===o&&(o=s<1?"rgba":"rgb");var l=(a=nt(a))<<16|(r=nt(r))<<8|(i=nt(i)),u="000000"+l.toString(16);u=u.substr(u.length-6);var h="0"+nt(255*s).toString(16);switch(h=h.substr(h.length-2),o.toLowerCase()){case"rgba":return"#"+u+h;case"argb":return"#"+h+u;default:return"#"+u}},rt=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,it=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,st=function(t){if(t.match(rt)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(it)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},ot=o.type;d.prototype.hex=function(t){return at(this._rgb,t)},g.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["hex"])))},l.format.hex=st,l.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===ot(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var lt=o.unpack,ut=o.TWOPI,ht=Math.min,ct=Math.sqrt,ft=Math.acos,dt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,a=lt(t,"rgb"),r=a[0],i=a[1],s=a[2],o=ht(r/=255,i/=255,s/=255),l=(r+i+s)/3,u=l>0?1-o/l:0;return 0===u?n=NaN:(n=(r-i+(r-s))/2,n/=ct((r-i)*(r-i)+(r-s)*(i-s)),n=ft(n),s>i&&(n=ut-n),n/=ut),[360*n,u,l]},pt=o.unpack,gt=o.limit,vt=o.TWOPI,mt=o.PITHIRD,yt=Math.cos,bt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,a,r,i=(t=pt(t,"hsi"))[0],s=t[1],o=t[2];return isNaN(i)&&(i=0),isNaN(s)&&(s=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?a=1-((r=(1-s)/3)+(n=(1+s*yt(vt*i)/yt(mt-vt*i))/3)):i<2/3?r=1-((n=(1-s)/3)+(a=(1+s*yt(vt*(i-=1/3))/yt(mt-vt*i))/3)):n=1-((a=(1-s)/3)+(r=(1+s*yt(vt*(i-=2/3))/yt(mt-vt*i))/3)),[255*(n=gt(o*n*3)),255*(a=gt(o*a*3)),255*(r=gt(o*r*3)),t.length>3?t[3]:1]},xt=o.unpack,wt=o.type;d.prototype.hsi=function(){return dt(this._rgb)},g.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["hsi"])))},l.format.hsi=bt,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=xt(t,"hsi"),"array"===wt(t)&&3===t.length)return"hsi"}});var kt=o.unpack,_t=o.type;d.prototype.hsl=function(){return M(this._rgb)},g.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["hsl"])))},l.format.hsl=P,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=kt(t,"hsl"),"array"===_t(t)&&3===t.length)return"hsl"}});var St=o.unpack,Et=Math.min,Ct=Math.max,Ot=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,a,r,i=(t=St(t,"rgb"))[0],s=t[1],o=t[2],l=Et(i,s,o),u=Ct(i,s,o),h=u-l;return r=u/255,0===u?(n=Number.NaN,a=0):(a=h/u,i===u&&(n=(s-o)/h),s===u&&(n=2+(o-i)/h),o===u&&(n=4+(i-s)/h),(n*=60)<0&&(n+=360)),[n,a,r]},Mt=o.unpack,Tt=Math.floor,At=function(){for(var t,e,n,a,r,i,s=[],o=arguments.length;o--;)s[o]=arguments[o];var l,u,h,c=(s=Mt(s,"hsv"))[0],f=s[1],d=s[2];if(d*=255,0===f)l=u=h=d;else{360===c&&(c=0),c>360&&(c-=360),c<0&&(c+=360);var p=Tt(c/=60),g=c-p,v=d*(1-f),m=d*(1-f*g),y=d*(1-f*(1-g));switch(p){case 0:l=(t=[d,y,v])[0],u=t[1],h=t[2];break;case 1:l=(e=[m,d,v])[0],u=e[1],h=e[2];break;case 2:l=(n=[v,d,y])[0],u=n[1],h=n[2];break;case 3:l=(a=[v,m,d])[0],u=a[1],h=a[2];break;case 4:l=(r=[y,v,d])[0],u=r[1],h=r[2];break;case 5:l=(i=[d,v,m])[0],u=i[1],h=i[2]}}return[l,u,h,s.length>3?s[3]:1]},Rt=o.unpack,Nt=o.type;d.prototype.hsv=function(){return Ot(this._rgb)},g.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["hsv"])))},l.format.hsv=At,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Rt(t,"hsv"),"array"===Nt(t)&&3===t.length)return"hsv"}});var Lt=18,Dt=.95047,Pt=1,It=1.08883,Ft=.137931034,zt=.206896552,Gt=.12841855,Vt=.008856452,Ht=o.unpack,jt=Math.pow,Bt=function(t){return(t/=255)<=.04045?t/12.92:jt((t+.055)/1.055,2.4)},Ut=function(t){return t>Vt?jt(t,1/3):t/Gt+Ft},Yt=function(t,e,n){return t=Bt(t),e=Bt(e),n=Bt(n),[Ut((.4124564*t+.3575761*e+.1804375*n)/Dt),Ut((.2126729*t+.7151522*e+.072175*n)/Pt),Ut((.0193339*t+.119192*e+.9503041*n)/It)]},Xt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ht(t,"rgb"),a=n[0],r=n[1],i=n[2],s=Yt(a,r,i),o=s[0],l=s[1],u=s[2],h=116*l-16;return[h<0?0:h,500*(o-l),200*(l-u)]},$t=o.unpack,Zt=Math.pow,Wt=function(t){return 255*(t<=.00304?12.92*t:1.055*Zt(t,1/2.4)-.055)},Kt=function(t){return t>zt?t*t*t:Gt*(t-Ft)},Jt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,a,r,i=(t=$t(t,"lab"))[0],s=t[1],o=t[2];return a=(i+16)/116,n=isNaN(s)?a:a+s/500,r=isNaN(o)?a:a-o/200,a=Pt*Kt(a),n=Dt*Kt(n),r=It*Kt(r),[Wt(3.2404542*n-1.5371385*a-.4985314*r),Wt(-.969266*n+1.8760108*a+.041556*r),Wt(.0556434*n-.2040259*a+1.0572252*r),t.length>3?t[3]:1]},qt=o.unpack,Qt=o.type;d.prototype.lab=function(){return Xt(this._rgb)},g.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["lab"])))},l.format.lab=Jt,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=qt(t,"lab"),"array"===Qt(t)&&3===t.length)return"lab"}});var te=o.unpack,ee=o.RAD2DEG,ne=Math.sqrt,ae=Math.atan2,re=Math.round,ie=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=te(t,"lab"),a=n[0],r=n[1],i=n[2],s=ne(r*r+i*i),o=(ae(i,r)*ee+360)%360;return 0===re(1e4*s)&&(o=Number.NaN),[a,s,o]},se=o.unpack,oe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=se(t,"rgb"),a=n[0],r=n[1],i=n[2],s=Xt(a,r,i),o=s[0],l=s[1],u=s[2];return ie(o,l,u)},le=o.unpack,ue=o.DEG2RAD,he=Math.sin,ce=Math.cos,fe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=le(t,"lch"),a=n[0],r=n[1],i=n[2];return isNaN(i)&&(i=0),[a,ce(i*=ue)*r,he(i)*r]},de=o.unpack,pe=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=de(t,"lch"))[0],a=t[1],r=t[2],i=fe(n,a,r),s=i[0],o=i[1],l=i[2],u=Jt(s,o,l),h=u[0],c=u[1],f=u[2];return[h,c,f,t.length>3?t[3]:1]},ge=o.unpack,ve=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ge(t,"hcl").reverse();return pe.apply(void 0,n)},me=o.unpack,ye=o.type;d.prototype.lch=function(){return oe(this._rgb)},d.prototype.hcl=function(){return oe(this._rgb).reverse()},g.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["lch"])))},g.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["hcl"])))},l.format.lch=pe,l.format.hcl=ve,["lch","hcl"].forEach((function(t){return l.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=me(e,t),"array"===ye(e)&&3===e.length)return t}})}));var be={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},xe=o.type;d.prototype.name=function(){for(var t=at(this._rgb,"rgb"),e=0,n=Object.keys(be);e<n.length;e+=1){var a=n[e];if(be[a]===t)return a.toLowerCase()}return t},l.format.named=function(t){if(t=t.toLowerCase(),be[t])return st(be[t]);throw new Error("unknown color name: "+t)},l.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===xe(t)&&be[t.toLowerCase()])return"named"}});var we=o.unpack,ke=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=we(t,"rgb"),a=n[0],r=n[1],i=n[2];return(a<<16)+(r<<8)+i},_e=o.type,Se=function(t){if("number"==_e(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Ee=o.type;d.prototype.num=function(){return ke(this._rgb)},g.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["num"])))},l.format.num=Se,l.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===Ee(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var Ce=o.unpack,Oe=o.type,Me=Math.round;d.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Me)},d.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:Me(e):e}))},g.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["rgb"])))},l.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ce(t,"rgba");return void 0===n[3]&&(n[3]=1),n},l.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ce(t,"rgba"),"array"===Oe(t)&&(3===t.length||4===t.length&&"number"==Oe(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var Te=Math.log,Ae=function(t){var e,n,a,r=t/100;return r<66?(e=255,n=-155.25485562709179-.44596950469579133*(n=r-2)+104.49216199393888*Te(n),a=r<20?0:.8274096064007395*(a=r-10)-254.76935184120902+115.67994401066147*Te(a)):(e=351.97690566805693+.114206453784165*(e=r-55)-40.25366309332127*Te(e),n=325.4494125711974+.07943456536662342*(n=r-50)-28.0852963507957*Te(n),a=255),[e,n,a,1]},Re=o.unpack,Ne=Math.round,Le=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,a=Re(t,"rgb"),r=a[0],i=a[2],s=1e3,o=4e4,l=.4;o-s>l;){var u=Ae(n=.5*(o+s));u[2]/u[0]>=i/r?o=n:s=n}return Ne(n)};d.prototype.temp=d.prototype.kelvin=d.prototype.temperature=function(){return Le(this._rgb)},g.temp=g.kelvin=g.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d,[null].concat(t,["temp"])))},l.format.temp=l.format.kelvin=l.format.temperature=Ae;var De=o.type;d.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===De(t)?e?(this._rgb[3]=t,this):new d([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},d.prototype.clipped=function(){return this._rgb._clipped||!1},d.prototype.darken=function(t){void 0===t&&(t=1);var e=this.lab();return e[0]-=Lt*t,new d(e,"lab").alpha(this.alpha(),!0)},d.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},d.prototype.darker=d.prototype.darken,d.prototype.brighter=d.prototype.brighten,d.prototype.get=function(t){var e=t.split("."),n=e[0],a=e[1],r=this[n]();if(a){var i=n.indexOf(a);if(i>-1)return r[i];throw new Error("unknown channel "+a+" in mode "+n)}return r};var Pe=o.type,Ie=Math.pow;d.prototype.luminance=function(t){if(void 0!==t&&"number"===Pe(t)){if(0===t)return new d([0,0,0,this._rgb[3]],"rgb");if(1===t)return new d([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n=20,a=function(e,r){var i=e.interpolate(r,.5,"rgb"),s=i.luminance();return Math.abs(t-s)<1e-7||!n--?i:s>t?a(e,i):a(i,r)},r=(e>t?a(new d([0,0,0]),this):a(this,new d([255,255,255]))).rgb();return new d(r.concat([this._rgb[3]]))}return Fe.apply(void 0,this._rgb.slice(0,3))};var Fe=function(t,e,n){return.2126*(t=ze(t))+.7152*(e=ze(e))+.0722*(n=ze(n))},ze=function(t){return(t/=255)<=.03928?t/12.92:Ie((t+.055)/1.055,2.4)},Ge={},Ve=o.type,He=function(t,e,n){void 0===n&&(n=.5);for(var a=[],r=arguments.length-3;r-- >0;)a[r]=arguments[r+3];var i=a[0]||"lrgb";if(Ge[i]||a.length||(i=Object.keys(Ge)[0]),!Ge[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==Ve(t)&&(t=new d(t)),"object"!==Ve(e)&&(e=new d(e)),Ge[i](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};d.prototype.mix=d.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],a=arguments.length-2;a-- >0;)n[a]=arguments[a+2];return He.apply(void 0,[this,t,e].concat(n))},d.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new d([e[0]*n,e[1]*n,e[2]*n,n],"rgb")},d.prototype.saturate=function(t){void 0===t&&(t=1);var e=this.lch();return e[1]+=Lt*t,e[1]<0&&(e[1]=0),new d(e,"lch").alpha(this.alpha(),!0)},d.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var je=o.type;d.prototype.set=function(t,e,n){void 0===n&&(n=!1);var a=t.split("."),r=a[0],i=a[1],s=this[r]();if(i){var o=r.indexOf(i);if(o>-1){if("string"==je(e))switch(e.charAt(0)){case"+":case"-":s[o]+=+e;break;case"*":s[o]*=+e.substr(1);break;case"/":s[o]/=+e.substr(1);break;default:s[o]=+e}else{if("number"!==je(e))throw new Error("unsupported value for Color.set");s[o]=e}var l=new d(s,r);return n?(this._rgb=l._rgb,this):l}throw new Error("unknown channel "+i+" in mode "+r)}return s},Ge.rgb=function(t,e,n){var a=t._rgb,r=e._rgb;return new d(a[0]+n*(r[0]-a[0]),a[1]+n*(r[1]-a[1]),a[2]+n*(r[2]-a[2]),"rgb")};var Be=Math.sqrt,Ue=Math.pow;Ge.lrgb=function(t,e,n){var a=t._rgb,r=a[0],i=a[1],s=a[2],o=e._rgb,l=o[0],u=o[1],h=o[2];return new d(Be(Ue(r,2)*(1-n)+Ue(l,2)*n),Be(Ue(i,2)*(1-n)+Ue(u,2)*n),Be(Ue(s,2)*(1-n)+Ue(h,2)*n),"rgb")},Ge.lab=function(t,e,n){var a=t.lab(),r=e.lab();return new d(a[0]+n*(r[0]-a[0]),a[1]+n*(r[1]-a[1]),a[2]+n*(r[2]-a[2]),"lab")};var Ye=function(t,e,n,a){var r,i,s,o,l,u,h,c,f,p,g,v;return"hsl"===a?(s=t.hsl(),o=e.hsl()):"hsv"===a?(s=t.hsv(),o=e.hsv()):"hcg"===a?(s=t.hcg(),o=e.hcg()):"hsi"===a?(s=t.hsi(),o=e.hsi()):"lch"!==a&&"hcl"!==a||(a="hcl",s=t.hcl(),o=e.hcl()),"h"===a.substr(0,1)&&(l=(r=s)[0],h=r[1],f=r[2],u=(i=o)[0],c=i[1],p=i[2]),isNaN(l)||isNaN(u)?isNaN(l)?isNaN(u)?v=Number.NaN:(v=u,1!=f&&0!=f||"hsv"==a||(g=c)):(v=l,1!=p&&0!=p||"hsv"==a||(g=h)):v=l+n*(u>l&&u-l>180?u-(l+360):u<l&&l-u>180?u+360-l:u-l),void 0===g&&(g=h+n*(c-h)),new d([v,g,f+n*(p-f)],a)},Xe=function(t,e,n){return Ye(t,e,n,"lch")};Ge.lch=Xe,Ge.hcl=Xe,Ge.num=function(t,e,n){var a=t.num(),r=e.num();return new d(a+n*(r-a),"num")},Ge.hcg=function(t,e,n){return Ye(t,e,n,"hcg")},Ge.hsi=function(t,e,n){return Ye(t,e,n,"hsi")},Ge.hsl=function(t,e,n){return Ye(t,e,n,"hsl")},Ge.hsv=function(t,e,n){return Ye(t,e,n,"hsv")};var $e=o.clip_rgb,Ze=Math.pow,We=Math.sqrt,Ke=Math.PI,Je=Math.cos,qe=Math.sin,Qe=Math.atan2,tn=function(t,e){for(var n=t.length,a=[0,0,0,0],r=0;r<t.length;r++){var i=t[r],s=e[r]/n,o=i._rgb;a[0]+=Ze(o[0],2)*s,a[1]+=Ze(o[1],2)*s,a[2]+=Ze(o[2],2)*s,a[3]+=o[3]*s}return a[0]=We(a[0]),a[1]=We(a[1]),a[2]=We(a[2]),a[3]>.9999999&&(a[3]=1),new d($e(a))},en=o.type,nn=Math.pow,an=function(t){var e="rgb",n=g("#ccc"),a=0,r=[0,1],i=[],s=[0,0],o=!1,l=[],u=!1,h=0,c=1,f=!1,d={},p=!0,v=1,m=function(t){if((t=t||["#fff","#000"])&&"string"===en(t)&&g.brewer&&g.brewer[t.toLowerCase()]&&(t=g.brewer[t.toLowerCase()]),"array"===en(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=g(t[e]);i.length=0;for(var n=0;n<t.length;n++)i.push(n/(t.length-1))}return w(),l=t},y=function(t){return t},b=function(t){return t},x=function(t,a){var r,u;if(null==a&&(a=!1),isNaN(t)||null===t)return n;u=a?t:o&&o.length>2?function(t){if(null!=o){for(var e=o.length-1,n=0;n<e&&t>=o[n];)n++;return n-1}return 0}(t)/(o.length-2):c!==h?(t-h)/(c-h):1,u=b(u),a||(u=y(u)),1!==v&&(u=nn(u,v)),u=s[0]+u*(1-s[0]-s[1]),u=Math.min(1,Math.max(0,u));var f=Math.floor(1e4*u);if(p&&d[f])r=d[f];else{if("array"===en(l))for(var m=0;m<i.length;m++){var x=i[m];if(u<=x){r=l[m];break}if(u>=x&&m===i.length-1){r=l[m];break}if(u>x&&u<i[m+1]){u=(u-x)/(i[m+1]-x),r=g.interpolate(l[m],l[m+1],u,e);break}}else"function"===en(l)&&(r=l(u));p&&(d[f]=r)}return r},w=function(){return d={}};m(t);var k=function(t){var e=g(x(t));return u&&e[u]?e[u]():e};return k.classes=function(t){if(null!=t){if("array"===en(t))o=t,r=[t[0],t[t.length-1]];else{var e=g.analyze(r);o=0===t?[e.min,e.max]:g.limits(e,"e",t)}return k}return o},k.domain=function(t){if(!arguments.length)return r;h=t[0],c=t[t.length-1],i=[];var e=l.length;if(t.length===e&&h!==c)for(var n=0,a=Array.from(t);n<a.length;n+=1){var s=a[n];i.push((s-h)/(c-h))}else{for(var o=0;o<e;o++)i.push(o/(e-1));if(t.length>2){var u=t.map((function(e,n){return n/(t.length-1)})),f=t.map((function(t){return(t-h)/(c-h)}));f.every((function(t,e){return u[e]===t}))||(b=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var n=(t-f[e])/(f[e+1]-f[e]);return u[e]+n*(u[e+1]-u[e])})}}return r=[h,c],k},k.mode=function(t){return arguments.length?(e=t,w(),k):e},k.range=function(t,e){return m(t),k},k.out=function(t){return u=t,k},k.spread=function(t){return arguments.length?(a=t,k):a},k.correctLightness=function(t){return null==t&&(t=!0),f=t,w(),y=f?function(t){for(var e=x(0,!0).lab()[0],n=x(1,!0).lab()[0],a=e>n,r=x(t,!0).lab()[0],i=e+(n-e)*t,s=r-i,o=0,l=1,u=20;Math.abs(s)>.01&&u-- >0;)a&&(s*=-1),s<0?(o=t,t+=.5*(l-t)):(l=t,t+=.5*(o-t)),r=x(t,!0).lab()[0],s=r-i;return t}:function(t){return t},k},k.padding=function(t){return null!=t?("number"===en(t)&&(t=[t,t]),s=t,k):s},k.colors=function(e,n){arguments.length<2&&(n="hex");var a=[];if(0===arguments.length)a=l.slice(0);else if(1===e)a=[k(.5)];else if(e>1){var i=r[0],s=r[1]-i;a=rn(0,e,!1).map((function(t){return k(i+t/(e-1)*s)}))}else{t=[];var u=[];if(o&&o.length>2)for(var h=1,c=o.length,f=1<=c;f?h<c:h>c;f?h++:h--)u.push(.5*(o[h-1]+o[h]));else u=r;a=u.map((function(t){return k(t)}))}return g[n]&&(a=a.map((function(t){return t[n]()}))),a},k.cache=function(t){return null!=t?(p=t,k):p},k.gamma=function(t){return null!=t?(v=t,k):v},k.nodata=function(t){return null!=t?(n=g(t),k):n},k};function rn(t,e,n){for(var a=[],r=t<e,i=n?r?e+1:e-1:e,s=t;r?s<i:s>i;r?s++:s--)a.push(s);return a}var sn=function(t){var e,n,a,r,i,s,o;if(2===(t=t.map((function(t){return new d(t)}))).length)e=t.map((function(t){return t.lab()})),i=e[0],s=e[1],r=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(s[e]-i[e])}));return new d(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),i=n[0],s=n[1],o=n[2],r=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*s[e]+t*t*o[e]}));return new d(e,"lab")};else if(4===t.length){var l;a=t.map((function(t){return t.lab()})),i=a[0],s=a[1],o=a[2],l=a[3],r=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*s[e]+3*(1-t)*t*t*o[e]+t*t*t*l[e]}));return new d(e,"lab")}}else if(5===t.length){var u=sn(t.slice(0,3)),h=sn(t.slice(2,5));r=function(t){return t<.5?u(2*t):h(2*(t-.5))}}return r},on=function(t,e,n){if(!on[n])throw new Error("unknown blend mode "+n);return on[n](t,e)},ln=function(t){return function(e,n){var a=g(n).rgb(),r=g(e).rgb();return g.rgb(t(a,r))}},un=function(t){return function(e,n){var a=[];return a[0]=t(e[0],n[0]),a[1]=t(e[1],n[1]),a[2]=t(e[2],n[2]),a}};on.normal=ln(un((function(t){return t}))),on.multiply=ln(un((function(t,e){return t*e/255}))),on.screen=ln(un((function(t,e){return 255*(1-(1-t/255)*(1-e/255))}))),on.overlay=ln(un((function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))}))),on.darken=ln(un((function(t,e){return t>e?e:t}))),on.lighten=ln(un((function(t,e){return t>e?t:e}))),on.dodge=ln(un((function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t}))),on.burn=ln(un((function(t,e){return 255*(1-(1-e/255)/(t/255))})));for(var hn=on,cn=o.type,fn=o.clip_rgb,dn=o.TWOPI,pn=Math.pow,gn=Math.sin,vn=Math.cos,mn=Math.floor,yn=Math.random,bn=Math.log,xn=Math.pow,wn=Math.floor,kn=Math.abs,_n=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===i(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===i(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return Sn(n,t,e)},n},Sn=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==i(t)&&(t=_n(t));var a=t.min,r=t.max,s=t.values.sort((function(t,e){return t-e}));if(1===n)return[a,r];var o=[];if("c"===e.substr(0,1)&&(o.push(a),o.push(r)),"e"===e.substr(0,1)){o.push(a);for(var l=1;l<n;l++)o.push(a+l/n*(r-a));o.push(r)}else if("l"===e.substr(0,1)){if(a<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*bn(a),h=Math.LOG10E*bn(r);o.push(a);for(var c=1;c<n;c++)o.push(xn(10,u+c/n*(h-u)));o.push(r)}else if("q"===e.substr(0,1)){o.push(a);for(var f=1;f<n;f++){var d=(s.length-1)*f/n,p=wn(d);if(p===d)o.push(s[p]);else{var g=d-p;o.push(s[p]*(1-g)+s[p+1]*g)}}o.push(r)}else if("k"===e.substr(0,1)){var v,m=s.length,y=new Array(m),b=new Array(n),x=!0,w=0,k=null;(k=[]).push(a);for(var _=1;_<n;_++)k.push(a+_/n*(r-a));for(k.push(r);x;){for(var S=0;S<n;S++)b[S]=0;for(var E=0;E<m;E++)for(var C=s[E],O=Number.MAX_VALUE,M=void 0,T=0;T<n;T++){var A=kn(k[T]-C);A<O&&(O=A,M=T),b[M]++,y[E]=M}for(var R=new Array(n),N=0;N<n;N++)R[N]=null;for(var L=0;L<m;L++)null===R[v=y[L]]?R[v]=s[L]:R[v]+=s[L];for(var D=0;D<n;D++)R[D]*=1/b[D];x=!1;for(var P=0;P<n;P++)if(R[P]!==k[P]){x=!0;break}k=R,++w>200&&(x=!1)}for(var I={},F=0;F<n;F++)I[F]=[];for(var z=0;z<m;z++)I[v=y[z]].push(s[z]);for(var G=[],V=0;V<n;V++)G.push(I[V][0]),G.push(I[V][I[V].length-1]);G=G.sort((function(t,e){return t-e})),o.push(G[0]);for(var H=1;H<G.length;H+=2){var j=G[H];isNaN(j)||-1!==o.indexOf(j)||o.push(j)}}return o},En={analyze:_n,limits:Sn},Cn=Math.sqrt,On=Math.atan2,Mn=Math.abs,Tn=Math.cos,An=Math.PI,Rn={cool:function(){return an([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},hot:function(){return an(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Nn={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ln=0,Dn=Object.keys(Nn);Ln<Dn.length;Ln+=1){var Pn=Dn[Ln];Nn[Pn.toLowerCase()]=Nn[Pn]}var In=Nn;return g.average=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var a=t.length;n||(n=Array.from(new Array(a)).map((function(){return 1})));var r=a/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=r})),t=t.map((function(t){return new d(t)})),"lrgb"===e)return tn(t,n);for(var i=t.shift(),s=i.get(e),o=[],l=0,u=0,h=0;h<s.length;h++)if(s[h]=(s[h]||0)*n[0],o.push(isNaN(s[h])?0:n[0]),"h"===e.charAt(h)&&!isNaN(s[h])){var c=s[h]/180*Ke;l+=Je(c)*n[0],u+=qe(c)*n[0]}var f=i.alpha()*n[0];t.forEach((function(t,a){var r=t.get(e);f+=t.alpha()*n[a+1];for(var i=0;i<s.length;i++)if(!isNaN(r[i]))if(o[i]+=n[a+1],"h"===e.charAt(i)){var h=r[i]/180*Ke;l+=Je(h)*n[a+1],u+=qe(h)*n[a+1]}else s[i]+=r[i]*n[a+1]}));for(var p=0;p<s.length;p++)if("h"===e.charAt(p)){for(var g=Qe(u/o[p],l/o[p])/Ke*180;g<0;)g+=360;for(;g>=360;)g-=360;s[p]=g}else s[p]=s[p]/o[p];return f/=a,new d(s,e).alpha(f>.99999?1:f,!0)},g.bezier=function(t){var e=sn(t);return e.scale=function(){return an(e)},e},g.blend=hn,g.cubehelix=function(t,e,n,a,r){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===a&&(a=1),void 0===r&&(r=[0,1]);var i,s=0;"array"===cn(r)?i=r[1]-r[0]:(i=0,r=[r,r]);var o=function(o){var l=dn*((t+120)/360+e*o),u=pn(r[0]+i*o,a),h=(0!==s?n[0]+o*s:n)*u*(1-u)/2,c=vn(l),f=gn(l);return g(fn([255*(u+h*(-.14861*c+1.78277*f)),255*(u+h*(-.29227*c-.90649*f)),255*(u+h*(1.97294*c)),1]))};return o.start=function(e){return null==e?t:(t=e,o)},o.rotations=function(t){return null==t?e:(e=t,o)},o.gamma=function(t){return null==t?a:(a=t,o)},o.hue=function(t){return null==t?n:("array"===cn(n=t)?0==(s=n[1]-n[0])&&(n=n[1]):s=0,o)},o.lightness=function(t){return null==t?r:("array"===cn(t)?(r=t,i=t[1]-t[0]):(r=[t,t],i=0),o)},o.scale=function(){return g.scale(o)},o.hue(n),o},g.mix=g.interpolate=He,g.random=function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef".charAt(mn(16*yn()));return new d(t,"hex")},g.scale=an,g.analyze=En.analyze,g.contrast=function(t,e){t=new d(t),e=new d(e);var n=t.luminance(),a=e.luminance();return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05)},g.deltaE=function(t,e,n,a){void 0===n&&(n=1),void 0===a&&(a=1),t=new d(t),e=new d(e);for(var r=Array.from(t.lab()),i=r[0],s=r[1],o=r[2],l=Array.from(e.lab()),u=l[0],h=l[1],c=l[2],f=Cn(s*s+o*o),p=Cn(h*h+c*c),g=i<16?.511:.040975*i/(1+.01765*i),v=.0638*f/(1+.0131*f)+.638,m=f<1e-6?0:180*On(o,s)/An;m<0;)m+=360;for(;m>=360;)m-=360;var y=m>=164&&m<=345?.56+Mn(.2*Tn(An*(m+168)/180)):.36+Mn(.4*Tn(An*(m+35)/180)),b=f*f*f*f,x=Cn(b/(b+1900)),w=v*(x*y+1-x),k=f-p,_=s-h,S=o-c,E=(i-u)/(n*g),C=k/(a*v);return Cn(E*E+C*C+(_*_+S*S-k*k)/(w*w))},g.distance=function(t,e,n){void 0===n&&(n="lab"),t=new d(t),e=new d(e);var a=t.get(n),r=e.get(n),i=0;for(var s in a){var o=(a[s]||0)-(r[s]||0);i+=o*o}return Math.sqrt(i)},g.limits=En.limits,g.valid=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(d,[null].concat(t))),!0}catch(t){return!1}},g.scales=Rn,g.colors=be,g.brewer=In,g}()},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__6__},function(t,e,n){(function(n){var a,r;r=this,void 0===(a=function(){return r.Chartist=function(){var t={version:"0.11.4"};return function(t,e){"use strict";var n=t.window,a=t.document;e.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},e.noop=function(t){return t},e.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},e.extend=function(t){var n,a,r;for(t=t||{},n=1;n<arguments.length;n++)for(var i in a=arguments[n])r=a[i],t[i]="object"!=typeof r||null===r||r instanceof Array?r:e.extend(t[i],r);return t},e.replaceAll=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},e.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},e.quantity=function(t){if("string"==typeof t){var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}}return{value:t}},e.querySelector=function(t){return t instanceof Node?t:a.querySelector(t)},e.times=function(t){return Array.apply(null,new Array(t))},e.sum=function(t,e){return t+(e||0)},e.mapMultiply=function(t){return function(e){return e*t}},e.mapAdd=function(t){return function(e){return e+t}},e.serialMap=function(t,n){var a=[],r=Math.max.apply(null,t.map((function(t){return t.length})));return e.times(r).forEach((function(e,r){var i=t.map((function(t){return t[r]}));a[r]=n.apply(null,i)})),a},e.roundWithPrecision=function(t,n){var a=Math.pow(10,n||e.precision);return Math.round(t*a)/a},e.precision=8,e.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(e.escapingMap).reduce((function(t,n){return e.replaceAll(t,n,e.escapingMap[n])}),t))},e.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(e.escapingMap).reduce((function(t,n){return e.replaceAll(t,e.escapingMap[n],n)}),t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(t){}return t},e.createSvg=function(t,n,a,r){var i;return n=n||"100%",a=a||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter((function(t){return t.getAttributeNS(e.namespaces.xmlns,"ct")})).forEach((function(e){t.removeChild(e)})),(i=new e.Svg("svg").attr({width:n,height:a}).addClass(r))._node.style.width=n,i._node.style.height=a,t.appendChild(i._node),i},e.normalizeData=function(t,n,a){var r,i={raw:t,normalized:{}};return i.normalized.series=e.getDataArray({series:t.series||[]},n,a),r=i.normalized.series.every((function(t){return t instanceof Array}))?Math.max.apply(null,i.normalized.series.map((function(t){return t.length}))):i.normalized.series.length,i.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(i.normalized.labels,e.times(Math.max(0,r-i.normalized.labels.length)).map((function(){return""}))),n&&e.reverseData(i.normalized),i},e.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},e.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},e.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},e.getDataArray=function(t,n,a){return t.series.map((function t(n){if(e.safeHasProperty(n,"value"))return t(n.value);if(e.safeHasProperty(n,"data"))return t(n.data);if(n instanceof Array)return n.map(t);if(!e.isDataHoleValue(n)){if(a){var r={};return"string"==typeof a?r[a]=e.getNumberOrUndefined(n):r.y=e.getNumberOrUndefined(n),r.x=n.hasOwnProperty("x")?e.getNumberOrUndefined(n.x):r.x,r.y=n.hasOwnProperty("y")?e.getNumberOrUndefined(n.y):r.y,r}return e.getNumberOrUndefined(n)}}))},e.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},e.getMetaData=function(t,e){var n=t.data?t.data[e]:t[e];return n?n.meta:void 0},e.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},e.projectLength=function(t,e,n){return e/n.range*t},e.getAvailableHeight=function(t,n){return Math.max((e.quantity(n.height).value||t.height())-(n.chartPadding.top+n.chartPadding.bottom)-n.axisX.offset,0)},e.getHighLow=function(t,n,a){var r={high:void 0===(n=e.extend({},n,a?n["axis"+a.toUpperCase()]:{})).high?-Number.MAX_VALUE:+n.high,low:void 0===n.low?Number.MAX_VALUE:+n.low},i=void 0===n.high,s=void 0===n.low;return(i||s)&&function t(e){if(void 0!==e)if(e instanceof Array)for(var n=0;n<e.length;n++)t(e[n]);else{var o=a?+e[a]:+e;i&&o>r.high&&(r.high=o),s&&o<r.low&&(r.low=o)}}(t),(n.referenceValue||0===n.referenceValue)&&(r.high=Math.max(n.referenceValue,r.high),r.low=Math.min(n.referenceValue,r.low)),r.high<=r.low&&(0===r.low?r.high=1:r.low<0?r.high=0:(r.high>0||(r.high=1),r.low=0)),r},e.isNumeric=function(t){return null!==t&&isFinite(t)},e.isFalseyButZero=function(t){return!t&&0!==t},e.getNumberOrUndefined=function(t){return e.isNumeric(t)?+t:void 0},e.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},e.getMultiValue=function(t,n){return e.isMultiValue(t)?e.getNumberOrUndefined(t[n||"y"]):e.getNumberOrUndefined(t)},e.rho=function(t){if(1===t)return t;function e(t,n){return t%n==0?n:e(n,t%n)}function n(t){return t*t+1}var a,r=2,i=2;if(t%2==0)return 2;do{r=n(r)%t,i=n(n(i))%t,a=e(Math.abs(r-i),t)}while(1===a);return a},e.getBounds=function(t,n,a,r){var i,s,o,l=0,u={high:n.high,low:n.low};u.valueRange=u.high-u.low,u.oom=e.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var h=e.projectLength(t,u.step,u)<a,c=r?e.rho(u.range):0;if(r&&e.projectLength(t,1,u)>=a)u.step=1;else if(r&&c<u.step&&e.projectLength(t,c,u)>=a)u.step=c;else for(;;){if(h&&e.projectLength(t,u.step,u)<=a)u.step*=2;else{if(h||!(e.projectLength(t,u.step/2,u)>=a))break;if(u.step/=2,r&&u.step%1!=0){u.step*=2;break}}if(l++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}function f(t,e){return t===(t+=e)&&(t*=1+(e>0?2221e-19:-2221e-19)),t}for(u.step=Math.max(u.step,2221e-19),s=u.min,o=u.max;s+u.step<=u.low;)s=f(s,u.step);for(;o-u.step>=u.high;)o=f(o,-u.step);u.min=s,u.max=o,u.range=u.max-u.min;var d=[];for(i=u.min;i<=u.max;i=f(i,u.step)){var p=e.roundWithPrecision(i);p!==d[d.length-1]&&d.push(p)}return u.values=d,u},e.polarToCartesian=function(t,e,n,a){var r=(a-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}},e.createChartRect=function(t,n,a){var r=!(!n.axisX&&!n.axisY),i=r?n.axisY.offset:0,s=r?n.axisX.offset:0,o=t.width()||e.quantity(n.width).value||0,l=t.height()||e.quantity(n.height).value||0,u=e.normalizePadding(n.chartPadding,a);o=Math.max(o,i+u.left+u.right),l=Math.max(l,s+u.top+u.bottom);var h={padding:u,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return r?("start"===n.axisX.position?(h.y2=u.top+s,h.y1=Math.max(l-u.bottom,h.y2+1)):(h.y2=u.top,h.y1=Math.max(l-u.bottom-s,h.y2+1)),"start"===n.axisY.position?(h.x1=u.left+i,h.x2=Math.max(o-u.right,h.x1+1)):(h.x1=u.left,h.x2=Math.max(o-u.right-i,h.x1+1))):(h.x1=u.left,h.x2=Math.max(o-u.right,h.x1+1),h.y2=u.top,h.y1=Math.max(l-u.bottom,h.y2+1)),h},e.createGrid=function(t,n,a,r,i,s,o,l){var u={};u[a.units.pos+"1"]=t,u[a.units.pos+"2"]=t,u[a.counterUnits.pos+"1"]=r,u[a.counterUnits.pos+"2"]=r+i;var h=s.elem("line",u,o.join(" "));l.emit("draw",e.extend({type:"grid",axis:a,index:n,group:s,element:h},u))},e.createGridBackground=function(t,e,n,a){var r=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},n,!0);a.emit("draw",{type:"gridBackground",group:t,element:r})},e.createLabel=function(t,n,r,i,s,o,l,u,h,c,f){var d,p={};if(p[s.units.pos]=t+l[s.units.pos],p[s.counterUnits.pos]=l[s.counterUnits.pos],p[s.units.len]=n,p[s.counterUnits.len]=Math.max(0,o-10),c){var g=a.createElement("span");g.className=h.join(" "),g.setAttribute("xmlns",e.namespaces.xhtml),g.innerText=i[r],g.style[s.units.len]=Math.round(p[s.units.len])+"px",g.style[s.counterUnits.len]=Math.round(p[s.counterUnits.len])+"px",d=u.foreignObject(g,e.extend({style:"overflow: visible;"},p))}else d=u.elem("text",p,h.join(" ")).text(i[r]);f.emit("draw",e.extend({type:"label",axis:s,index:r,group:u,element:d,text:i[r]},p))},e.getSeriesOption=function(t,e,n){if(t.name&&e.series&&e.series[t.name]){var a=e.series[t.name];return a.hasOwnProperty(n)?a[n]:e[n]}return e[n]},e.optionsProvider=function(t,a,r){var i,s,o=e.extend({},t),l=[];function u(t){var l=i;if(i=e.extend({},o),a)for(s=0;s<a.length;s++)n.matchMedia(a[s][0]).matches&&(i=e.extend(i,a[s][1]));r&&t&&r.emit("optionsChanged",{previousOptions:l,currentOptions:i})}if(!n.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(a)for(s=0;s<a.length;s++){var h=n.matchMedia(a[s][0]);h.addListener(u),l.push(h)}return u(),{removeMediaQueryListeners:function(){l.forEach((function(t){t.removeListener(u)}))},getCurrentOptions:function(){return e.extend({},i)}}},e.splitIntoSegments=function(t,n,a){a=e.extend({},{increasingX:!1,fillHoles:!1},a);for(var r=[],i=!0,s=0;s<t.length;s+=2)void 0===e.getMultiValue(n[s/2].value)?a.fillHoles||(i=!0):(a.increasingX&&s>=2&&t[s]<=t[s-2]&&(i=!0),i&&(r.push({pathCoordinates:[],valueData:[]}),i=!1),r[r.length-1].pathCoordinates.push(t[s],t[s+1]),r[r.length-1].valueData.push(n[s/2]));return r}}(this||n,t),function(t,e){"use strict";e.Interpolation={},e.Interpolation.none=function(t){return t=e.extend({},{fillHoles:!1},t),function(n,a){for(var r=new e.Svg.Path,i=!0,s=0;s<n.length;s+=2){var o=n[s],l=n[s+1],u=a[s/2];void 0!==e.getMultiValue(u.value)?(i?r.move(o,l,!1,u):r.line(o,l,!1,u),i=!1):t.fillHoles||(i=!0)}return r}},e.Interpolation.simple=function(t){t=e.extend({},{divisor:2,fillHoles:!1},t);var n=1/Math.max(1,t.divisor);return function(a,r){for(var i,s,o,l=new e.Svg.Path,u=0;u<a.length;u+=2){var h=a[u],c=a[u+1],f=(h-i)*n,d=r[u/2];void 0!==d.value?(void 0===o?l.move(h,c,!1,d):l.curve(i+f,s,h-f,c,h,c,!1,d),i=h,s=c,o=d):t.fillHoles||(i=h=o=void 0)}return l}},e.Interpolation.cardinal=function(t){t=e.extend({},{tension:1,fillHoles:!1},t);var n=Math.min(1,Math.max(0,t.tension)),a=1-n;return function r(i,s){var o=e.splitIntoSegments(i,s,{fillHoles:t.fillHoles});if(o.length){if(o.length>1){var l=[];return o.forEach((function(t){l.push(r(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(l)}if(i=o[0].pathCoordinates,s=o[0].valueData,i.length<=4)return e.Interpolation.none()(i,s);for(var u=(new e.Svg.Path).move(i[0],i[1],!1,s[0]),h=0,c=i.length;c-2>h;h+=2){var f=[{x:+i[h-2],y:+i[h-1]},{x:+i[h],y:+i[h+1]},{x:+i[h+2],y:+i[h+3]},{x:+i[h+4],y:+i[h+5]}];c-4===h?f[3]=f[2]:h||(f[0]={x:+i[h],y:+i[h+1]}),u.curve(n*(-f[0].x+6*f[1].x+f[2].x)/6+a*f[2].x,n*(-f[0].y+6*f[1].y+f[2].y)/6+a*f[2].y,n*(f[1].x+6*f[2].x-f[3].x)/6+a*f[2].x,n*(f[1].y+6*f[2].y-f[3].y)/6+a*f[2].y,f[2].x,f[2].y,!1,s[(h+2)/2])}return u}return e.Interpolation.none()([])}},e.Interpolation.monotoneCubic=function(t){return t=e.extend({},{fillHoles:!1},t),function n(a,r){var i=e.splitIntoSegments(a,r,{fillHoles:t.fillHoles,increasingX:!0});if(i.length){if(i.length>1){var s=[];return i.forEach((function(t){s.push(n(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(s)}if(a=i[0].pathCoordinates,r=i[0].valueData,a.length<=4)return e.Interpolation.none()(a,r);var o,l,u=[],h=[],c=a.length/2,f=[],d=[],p=[],g=[];for(o=0;o<c;o++)u[o]=a[2*o],h[o]=a[2*o+1];for(o=0;o<c-1;o++)p[o]=h[o+1]-h[o],g[o]=u[o+1]-u[o],d[o]=p[o]/g[o];for(f[0]=d[0],f[c-1]=d[c-2],o=1;o<c-1;o++)0===d[o]||0===d[o-1]||d[o-1]>0!=d[o]>0?f[o]=0:(f[o]=3*(g[o-1]+g[o])/((2*g[o]+g[o-1])/d[o-1]+(g[o]+2*g[o-1])/d[o]),isFinite(f[o])||(f[o]=0));for(l=(new e.Svg.Path).move(u[0],h[0],!1,r[0]),o=0;o<c-1;o++)l.curve(u[o]+g[o]/3,h[o]+f[o]*g[o]/3,u[o+1]-g[o]/3,h[o+1]-f[o+1]*g[o]/3,u[o+1],h[o+1],!1,r[o+1]);return l}return e.Interpolation.none()([])}},e.Interpolation.step=function(t){return t=e.extend({},{postpone:!0,fillHoles:!1},t),function(n,a){for(var r,i,s,o=new e.Svg.Path,l=0;l<n.length;l+=2){var u=n[l],h=n[l+1],c=a[l/2];void 0!==c.value?(void 0===s?o.move(u,h,!1,c):(t.postpone?o.line(u,i,!1,s):o.line(r,h,!1,c),o.line(u,h,!1,c)),r=u,i=h,s=c):t.fillHoles||(r=i=s=void 0)}return o}}}(0,t),function(t,e){"use strict";e.EventEmitter=function(){var t=[];return{addEventHandler:function(e,n){t[e]=t[e]||[],t[e].push(n)},removeEventHandler:function(e,n){t[e]&&(n?(t[e].splice(t[e].indexOf(n),1),0===t[e].length&&delete t[e]):delete t[e])},emit:function(e,n){t[e]&&t[e].forEach((function(t){t(n)})),t["*"]&&t["*"].forEach((function(t){t(e,n)}))}}}}(0,t),function(t,e){"use strict";function n(t){var e=[];if(t.length)for(var n=0;n<t.length;n++)e.push(t[n]);return e}e.Class={extend:function(t,n){var a=n||this.prototype||e.Class,r=Object.create(a);e.Class.cloneDefinitions(r,t);var i=function(){var t,n=r.constructor||function(){};return t=this===e?Object.create(r):this,n.apply(t,Array.prototype.slice.call(arguments,0)),t};return i.prototype=r,i.super=a,i.extend=this.extend,i},cloneDefinitions:function(){var t=n(arguments),e=t[0];return t.splice(1,t.length-1).forEach((function(t){Object.getOwnPropertyNames(t).forEach((function(n){delete e[n],Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))})),e}}}(0,t),function(t,e){"use strict";var n=t.window;function a(){n.addEventListener("resize",this.resizeListener),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}e.Base=e.Class.extend({constructor:function(t,n,r,i,s){this.container=e.querySelector(t),this.data=n||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=r,this.options=i,this.responsiveOptions=s,this.eventEmitter=e.EventEmitter(),this.supportsForeignObject=e.Svg.isSupported("Extensibility"),this.supportsAnimations=e.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(a.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(t,n,a){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),n&&(this.options=e.extend({},a?this.options:this.defaultOptions,n),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?n.clearTimeout(this.initializeTimeoutId):(n.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(t,e){return this.eventEmitter.addEventHandler(t,e),this},off:function(t,e){return this.eventEmitter.removeEventHandler(t,e),this},version:e.version,supportsForeignObject:!1})}(this||n,t),function(t,e){"use strict";var n=t.document;e.Svg=e.Class.extend({constructor:function(t,a,r,i,s){t instanceof Element?this._node=t:(this._node=n.createElementNS(e.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":e.namespaces.ct})),a&&this.attr(a),r&&this.addClass(r),i&&(s&&i._node.firstChild?i._node.insertBefore(this._node,i._node.firstChild):i._node.appendChild(this._node))},attr:function(t,n){return"string"==typeof t?n?this._node.getAttributeNS(n,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(n){if(void 0!==t[n])if(-1!==n.indexOf(":")){var a=n.split(":");this._node.setAttributeNS(e.namespaces[a[0]],n,t[n])}else this._node.setAttribute(n,t[n])}.bind(this)),this)},elem:function(t,n,a,r){return new e.Svg(t,n,a,this,r)},parent:function(){return this._node.parentNode instanceof SVGElement?new e.Svg(this._node.parentNode):null},root:function(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new e.Svg(t)},querySelector:function(t){var n=this._node.querySelector(t);return n?new e.Svg(n):null},querySelectorAll:function(t){var n=this._node.querySelectorAll(t);return n.length?new e.Svg.List(n):null},getNode:function(){return this._node},foreignObject:function(t,a,r,i){if("string"==typeof t){var s=n.createElement("div");s.innerHTML=t,t=s.firstChild}t.setAttribute("xmlns",e.namespaces.xmlns);var o=this.elem("foreignObject",a,r,i);return o._node.appendChild(t),o},text:function(t){return this._node.appendChild(n.createTextNode(t)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(t){return this._node.parentNode.replaceChild(t._node,this._node),t},append:function(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter((function(t,e,n){return n.indexOf(t)===e})).join(" ")),this},removeClass:function(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter((function(t){return-1===e.indexOf(t)})).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(t,n,a){return void 0===n&&(n=!0),Object.keys(t).forEach(function(r){function i(t,n){var i,s,o,l={};t.easing&&(o=t.easing instanceof Array?t.easing:e.Svg.Easing[t.easing],delete t.easing),t.begin=e.ensureUnit(t.begin,"ms"),t.dur=e.ensureUnit(t.dur,"ms"),o&&(t.calcMode="spline",t.keySplines=o.join(" "),t.keyTimes="0;1"),n&&(t.fill="freeze",l[r]=t.from,this.attr(l),s=e.quantity(t.begin||0).value,t.begin="indefinite"),i=this.elem("animate",e.extend({attributeName:r},t)),n&&setTimeout(function(){try{i._node.beginElement()}catch(e){l[r]=t.to,this.attr(l),i.remove()}}.bind(this),s),a&&i._node.addEventListener("beginEvent",function(){a.emit("animationBegin",{element:this,animate:i._node,params:t})}.bind(this)),i._node.addEventListener("endEvent",function(){a&&a.emit("animationEnd",{element:this,animate:i._node,params:t}),n&&(l[r]=t.to,this.attr(l),i.remove())}.bind(this))}t[r]instanceof Array?t[r].forEach(function(t){i.bind(this)(t,!1)}.bind(this)):i.bind(this)(t[r],n)}.bind(this)),this}}),e.Svg.isSupported=function(t){return n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")},e.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},e.Svg.List=e.Class.extend({constructor:function(t){var n=this;this.svgElements=[];for(var a=0;a<t.length;a++)this.svgElements.push(new e.Svg(t[a]));Object.keys(e.Svg.prototype).filter((function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)})).forEach((function(t){n[t]=function(){var a=Array.prototype.slice.call(arguments,0);return n.svgElements.forEach((function(n){e.Svg.prototype[t].apply(n,a)})),n}}))}})}(this||n,t),function(t,e){"use strict";var n={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},a={accuracy:3};function r(t,n,a,r,i,s){var o=e.extend({command:i?t.toLowerCase():t.toUpperCase()},n,s?{data:s}:{});a.splice(r,0,o)}function i(t,e){t.forEach((function(a,r){n[a.command.toLowerCase()].forEach((function(n,i){e(a,n,r,i,t)}))}))}e.Svg.Path=e.Class.extend({constructor:function(t,n){this.pathElements=[],this.pos=0,this.close=t,this.options=e.extend({},a,n)},position:function(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos},remove:function(t){return this.pathElements.splice(this.pos,t),this},move:function(t,e,n,a){return r("M",{x:+t,y:+e},this.pathElements,this.pos++,n,a),this},line:function(t,e,n,a){return r("L",{x:+t,y:+e},this.pathElements,this.pos++,n,a),this},curve:function(t,e,n,a,i,s,o,l){return r("C",{x1:+t,y1:+e,x2:+n,y2:+a,x:+i,y:+s},this.pathElements,this.pos++,o,l),this},arc:function(t,e,n,a,i,s,o,l,u){return r("A",{rx:+t,ry:+e,xAr:+n,lAf:+a,sf:+i,x:+s,y:+o},this.pathElements,this.pos++,l,u),this},scale:function(t,e){return i(this.pathElements,(function(n,a){n[a]*="x"===a[0]?t:e})),this},translate:function(t,e){return i(this.pathElements,(function(n,a){n[a]+="x"===a[0]?t:e})),this},transform:function(t){return i(this.pathElements,(function(e,n,a,r,i){var s=t(e,n,a,r,i);(s||0===s)&&(e[n]=s)})),this},parse:function(t){var a=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t}),[]);"Z"===a[a.length-1][0].toUpperCase()&&a.pop();var r=a.map((function(t){var a=t.shift(),r=n[a.toLowerCase()];return e.extend({command:a},r.reduce((function(e,n,a){return e[n]=+t[a],e}),{}))})),i=[this.pos,0];return Array.prototype.push.apply(i,r),Array.prototype.splice.apply(this.pathElements,i),this.pos+=r.length,this},stringify:function(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,a){var r=n[a.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(a[e]*t)/t:a[e]}.bind(this));return e+a.command+r.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function(t){var n=new e.Svg.Path(t||this.close);return n.pos=this.pos,n.pathElements=this.pathElements.slice().map((function(t){return e.extend({},t)})),n.options=e.extend({},this.options),n},splitByCommand:function(t){var n=[new e.Svg.Path];return this.pathElements.forEach((function(a){a.command===t.toUpperCase()&&0!==n[n.length-1].pathElements.length&&n.push(new e.Svg.Path),n[n.length-1].pathElements.push(a)})),n}}),e.Svg.Path.elementDescriptions=n,e.Svg.Path.join=function(t,n,a){for(var r=new e.Svg.Path(n,a),i=0;i<t.length;i++)for(var s=t[i],o=0;o<s.pathElements.length;o++)r.pathElements.push(s.pathElements[o]);return r}}(0,t),function(t,e){"use strict";t.window,t.document;var n={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};e.Axis=e.Class.extend({constructor:function(t,e,a,r){this.units=t,this.counterUnits=t===n.x?n.y:n.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=a,this.options=r},createGridAndLabels:function(t,n,a,r,i){var s=r["axis"+this.units.pos.toUpperCase()],o=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(s.labelInterpolationFnc);o.forEach(function(u,h){var c,f={x:0,y:0};c=o[h+1]?o[h+1]-u:Math.max(this.axisLength-u,30),e.isFalseyButZero(l[h])&&""!==l[h]||("x"===this.units.pos?(u=this.chartRect.x1+u,f.x=r.axisX.labelOffset.x,"start"===r.axisX.position?f.y=this.chartRect.padding.top+r.axisX.labelOffset.y+(a?5:20):f.y=this.chartRect.y1+r.axisX.labelOffset.y+(a?5:20)):(u=this.chartRect.y1-u,f.y=r.axisY.labelOffset.y-(a?c:0),"start"===r.axisY.position?f.x=a?this.chartRect.padding.left+r.axisY.labelOffset.x:this.chartRect.x1-10:f.x=this.chartRect.x2+r.axisY.labelOffset.x+10),s.showGrid&&e.createGrid(u,h,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[r.classNames.grid,r.classNames[this.units.dir]],i),s.showLabel&&e.createLabel(u,c,h,l,this,s.offset,f,n,[r.classNames.label,r.classNames[this.units.dir],"start"===s.position?r.classNames[s.position]:r.classNames.end],a,i))}.bind(this))},projectValue:function(t,e,n){throw new Error("Base axis can't be instantiated!")}}),e.Axis.units=n}(this||n,t),function(t,e){"use strict";t.window,t.document,e.AutoScaleAxis=e.Axis.extend({constructor:function(t,n,a,r){var i=r.highLow||e.getHighLow(n,r,t.pos);this.bounds=e.getBounds(a[t.rectEnd]-a[t.rectStart],i,r.scaleMinSpace||20,r.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},e.AutoScaleAxis.super.constructor.call(this,t,a,this.bounds.values,r)},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||n,t),function(t,e){"use strict";t.window,t.document,e.FixedScaleAxis=e.Axis.extend({constructor:function(t,n,a,r){var i=r.highLow||e.getHighLow(n,r,t.pos);this.divisor=r.divisor||1,this.ticks=r.ticks||e.times(this.divisor).map(function(t,e){return i.low+(i.high-i.low)/this.divisor*e}.bind(this)),this.ticks.sort((function(t,e){return t-e})),this.range={min:i.low,max:i.high},e.FixedScaleAxis.super.constructor.call(this,t,a,this.ticks,r),this.stepLength=this.axisLength/this.divisor},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||n,t),function(t,e){"use strict";t.window,t.document,e.StepAxis=e.Axis.extend({constructor:function(t,n,a,r){e.StepAxis.super.constructor.call(this,t,a,r.ticks,r);var i=Math.max(1,r.ticks.length-(r.stretch?1:0));this.stepLength=this.axisLength/i},projectValue:function(t,e){return this.stepLength*e}})}(this||n,t),function(t,e){"use strict";t.window,t.document;var n={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Line=e.Base.extend({constructor:function(t,a,r,i){e.Line.super.constructor.call(this,t,a,n,e.extend({},n,r),i)},createChart:function(t){var a=e.normalizeData(this.data,t.reverseData,!0);this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart);var r,i,s=this.svg.elem("g").addClass(t.classNames.gridGroup),o=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),u=e.createChartRect(this.svg,t,n.padding);r=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,a.normalized.series,u,e.extend({},t.axisX,{ticks:a.normalized.labels,stretch:t.fullWidth})):t.axisX.type.call(e,e.Axis.units.x,a.normalized.series,u,t.axisX),i=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,a.normalized.series,u,e.extend({},t.axisY,{high:e.isNumeric(t.high)?t.high:t.axisY.high,low:e.isNumeric(t.low)?t.low:t.axisY.low})):t.axisY.type.call(e,e.Axis.units.y,a.normalized.series,u,t.axisY),r.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),i.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(s,u,t.classNames.gridBackground,this.eventEmitter),a.raw.series.forEach(function(n,s){var l=o.elem("g");l.attr({"ct:series-name":n.name,"ct:meta":e.serialize(n.meta)}),l.addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(s)].join(" "));var h=[],c=[];a.normalized.series[s].forEach(function(t,o){var l={x:u.x1+r.projectValue(t,o,a.normalized.series[s]),y:u.y1-i.projectValue(t,o,a.normalized.series[s])};h.push(l.x,l.y),c.push({value:t,valueIndex:o,meta:e.getMetaData(n,o)})}.bind(this));var f={lineSmooth:e.getSeriesOption(n,t,"lineSmooth"),showPoint:e.getSeriesOption(n,t,"showPoint"),showLine:e.getSeriesOption(n,t,"showLine"),showArea:e.getSeriesOption(n,t,"showArea"),areaBase:e.getSeriesOption(n,t,"areaBase")},d=("function"==typeof f.lineSmooth?f.lineSmooth:f.lineSmooth?e.Interpolation.monotoneCubic():e.Interpolation.none())(h,c);if(f.showPoint&&d.pathElements.forEach(function(a){var o=l.elem("line",{x1:a.x,y1:a.y,x2:a.x+.01,y2:a.y},t.classNames.point).attr({"ct:value":[a.data.value.x,a.data.value.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(a.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:a.data.value,index:a.data.valueIndex,meta:a.data.meta,series:n,seriesIndex:s,axisX:r,axisY:i,group:l,element:o,x:a.x,y:a.y})}.bind(this)),f.showLine){var p=l.elem("path",{d:d.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:a.normalized.series[s],path:d.clone(),chartRect:u,index:s,series:n,seriesIndex:s,seriesMeta:n.meta,axisX:r,axisY:i,group:l,element:p})}if(f.showArea&&i.range){var g=Math.max(Math.min(f.areaBase,i.range.max),i.range.min),v=u.y1-i.projectValue(g);d.splitByCommand("M").filter((function(t){return t.pathElements.length>1})).map((function(t){var e=t.pathElements[0],n=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,v).line(e.x,e.y).position(t.pathElements.length+1).line(n.x,v)})).forEach(function(e){var o=l.elem("path",{d:e.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:a.normalized.series[s],path:e.clone(),series:n,seriesIndex:s,axisX:r,axisY:i,chartRect:u,index:s,group:l,element:o})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:i.bounds,chartRect:u,axisX:r,axisY:i,svg:this.svg,options:t})}})}(this||n,t),function(t,e){"use strict";t.window,t.document;var n={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Bar=e.Base.extend({constructor:function(t,a,r,i){e.Bar.super.constructor.call(this,t,a,n,e.extend({},n,r),i)},createChart:function(t){var a,r;t.distributeSeries?(a=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y")).normalized.series=a.normalized.series.map((function(t){return[t]})):a=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y"),this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var i=this.svg.elem("g").addClass(t.classNames.gridGroup),s=this.svg.elem("g"),o=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars&&0!==a.normalized.series.length){var l=e.serialMap(a.normalized.series,(function(){return Array.prototype.slice.call(arguments).map((function(t){return t})).reduce((function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}}),{x:0,y:0})}));r=e.getHighLow([l],t,t.horizontalBars?"x":"y")}else r=e.getHighLow(a.normalized.series,t,t.horizontalBars?"x":"y");r.high=+t.high||(0===t.high?0:r.high),r.low=+t.low||(0===t.low?0:r.low);var u,h,c,f,d,p=e.createChartRect(this.svg,t,n.padding);h=t.distributeSeries&&t.stackBars?a.normalized.labels.slice(0,1):a.normalized.labels,t.horizontalBars?(u=f=void 0===t.axisX.type?new e.AutoScaleAxis(e.Axis.units.x,a.normalized.series,p,e.extend({},t.axisX,{highLow:r,referenceValue:0})):t.axisX.type.call(e,e.Axis.units.x,a.normalized.series,p,e.extend({},t.axisX,{highLow:r,referenceValue:0})),c=d=void 0===t.axisY.type?new e.StepAxis(e.Axis.units.y,a.normalized.series,p,{ticks:h}):t.axisY.type.call(e,e.Axis.units.y,a.normalized.series,p,t.axisY)):(c=f=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,a.normalized.series,p,{ticks:h}):t.axisX.type.call(e,e.Axis.units.x,a.normalized.series,p,t.axisX),u=d=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,a.normalized.series,p,e.extend({},t.axisY,{highLow:r,referenceValue:0})):t.axisY.type.call(e,e.Axis.units.y,a.normalized.series,p,e.extend({},t.axisY,{highLow:r,referenceValue:0})));var g=t.horizontalBars?p.x1+u.projectValue(0):p.y1-u.projectValue(0),v=[];c.createGridAndLabels(i,o,this.supportsForeignObject,t,this.eventEmitter),u.createGridAndLabels(i,o,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(i,p,t.classNames.gridBackground,this.eventEmitter),a.raw.series.forEach(function(n,r){var i,o,l=r-(a.raw.series.length-1)/2;i=t.distributeSeries&&!t.stackBars?c.axisLength/a.normalized.series.length/2:t.distributeSeries&&t.stackBars?c.axisLength/2:c.axisLength/a.normalized.series[r].length/2,(o=s.elem("g")).attr({"ct:series-name":n.name,"ct:meta":e.serialize(n.meta)}),o.addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(r)].join(" ")),a.normalized.series[r].forEach(function(s,h){var m,y,b,x;if(x=t.distributeSeries&&!t.stackBars?r:t.distributeSeries&&t.stackBars?0:h,m=t.horizontalBars?{x:p.x1+u.projectValue(s&&s.x?s.x:0,h,a.normalized.series[r]),y:p.y1-c.projectValue(s&&s.y?s.y:0,x,a.normalized.series[r])}:{x:p.x1+c.projectValue(s&&s.x?s.x:0,x,a.normalized.series[r]),y:p.y1-u.projectValue(s&&s.y?s.y:0,h,a.normalized.series[r])},c instanceof e.StepAxis&&(c.options.stretch||(m[c.units.pos]+=i*(t.horizontalBars?-1:1)),m[c.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1)),b=v[h]||g,v[h]=b-(g-m[c.counterUnits.pos]),void 0!==s){var w={};w[c.units.pos+"1"]=m[c.units.pos],w[c.units.pos+"2"]=m[c.units.pos],!t.stackBars||"accumulate"!==t.stackMode&&t.stackMode?(w[c.counterUnits.pos+"1"]=g,w[c.counterUnits.pos+"2"]=m[c.counterUnits.pos]):(w[c.counterUnits.pos+"1"]=b,w[c.counterUnits.pos+"2"]=v[h]),w.x1=Math.min(Math.max(w.x1,p.x1),p.x2),w.x2=Math.min(Math.max(w.x2,p.x1),p.x2),w.y1=Math.min(Math.max(w.y1,p.y2),p.y1),w.y2=Math.min(Math.max(w.y2,p.y2),p.y1);var k=e.getMetaData(n,h);y=o.elem("line",w,t.classNames.bar).attr({"ct:value":[s.x,s.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(k)}),this.eventEmitter.emit("draw",e.extend({type:"bar",value:s,index:h,meta:k,series:n,seriesIndex:r,axisX:f,axisY:d,chartRect:p,group:o,element:y},w))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:u.bounds,chartRect:p,axisX:f,axisY:d,svg:this.svg,options:t})}})}(this||n,t),function(t,e){"use strict";t.window,t.document;var n={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:e.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function a(t,e,n){var a=e.x>t.x;return a&&"explode"===n||!a&&"implode"===n?"start":a&&"implode"===n||!a&&"explode"===n?"end":"middle"}e.Pie=e.Base.extend({constructor:function(t,a,r,i){e.Pie.super.constructor.call(this,t,a,n,e.extend({},n,r),i)},createChart:function(t){var r,i,s,o,l,u=e.normalizeData(this.data),h=[],c=t.startAngle;this.svg=e.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),i=e.createChartRect(this.svg,t,n.padding),s=Math.min(i.width()/2,i.height()/2),l=t.total||u.normalized.series.reduce((function(t,e){return t+e}),0);var f=e.quantity(t.donutWidth);"%"===f.unit&&(f.value*=s/100),s-=t.donut&&!t.donutSolid?f.value/2:0,o="outside"===t.labelPosition||t.donut&&!t.donutSolid?s:"center"===t.labelPosition?0:t.donutSolid?s-f.value/2:s/2,o+=t.labelOffset;var d={x:i.x1+i.width()/2,y:i.y2+i.height()/2},p=1===u.raw.series.filter((function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t})).length;u.raw.series.forEach(function(t,e){h[e]=this.svg.elem("g",null,null)}.bind(this)),t.showLabel&&(r=this.svg.elem("g",null,null)),u.raw.series.forEach(function(n,i){if(0!==u.normalized.series[i]||!t.ignoreEmptyValues){h[i].attr({"ct:series-name":n.name}),h[i].addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(i)].join(" "));var g=l>0?c+u.normalized.series[i]/l*360:0,v=Math.max(0,c-(0===i||p?0:.2));g-v>=359.99&&(g=v+359.99);var m,y,b,x=e.polarToCartesian(d.x,d.y,s,v),w=e.polarToCartesian(d.x,d.y,s,g),k=new e.Svg.Path(!t.donut||t.donutSolid).move(w.x,w.y).arc(s,s,0,g-c>180,0,x.x,x.y);t.donut?t.donutSolid&&(b=s-f.value,m=e.polarToCartesian(d.x,d.y,b,c-(0===i||p?0:.2)),y=e.polarToCartesian(d.x,d.y,b,g),k.line(m.x,m.y),k.arc(b,b,0,g-c>180,1,y.x,y.y)):k.line(d.x,d.y);var _=t.classNames.slicePie;t.donut&&(_=t.classNames.sliceDonut,t.donutSolid&&(_=t.classNames.sliceDonutSolid));var S=h[i].elem("path",{d:k.stringify()},_);if(S.attr({"ct:value":u.normalized.series[i],"ct:meta":e.serialize(n.meta)}),t.donut&&!t.donutSolid&&(S._node.style.strokeWidth=f.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:u.normalized.series[i],totalDataSum:l,index:i,meta:n.meta,series:n,group:h[i],element:S,path:k.clone(),center:d,radius:s,startAngle:c,endAngle:g}),t.showLabel){var E,C;E=1===u.raw.series.length?{x:d.x,y:d.y}:e.polarToCartesian(d.x,d.y,o,c+(g-c)/2),C=u.normalized.labels&&!e.isFalseyButZero(u.normalized.labels[i])?u.normalized.labels[i]:u.normalized.series[i];var O=t.labelInterpolationFnc(C,i);if(O||0===O){var M=r.elem("text",{dx:E.x,dy:E.y,"text-anchor":a(d,E,t.labelDirection)},t.classNames.label).text(""+O);this.eventEmitter.emit("draw",{type:"label",index:i,group:r,element:M,text:""+O,x:E.x,y:E.y})}}c=g}}.bind(this)),this.eventEmitter.emit("created",{chartRect:i,svg:this.svg,options:t})},determineAnchorPosition:a})}(this||n,t),t}()}.apply(e,[]))||(t.exports=a)}).call(this,n(31))},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__9__},function(t,e,n){"use strict";t.exports=function(t,e,n,a){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{i=i+(r=r+e[a++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0}},function(t,e,n){"use strict";var a=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var a=0;a<8;a++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var i=a,s=r+n;t^=-1;for(var o=r;o<s;o++)t=t>>>8^i[255&(t^e[o])];return-1^t}},function(t,e,n){"use strict";var a=n(4),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){i=!1}for(var s=new a.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&i||!t.subarray&&r))return String.fromCharCode.apply(null,a.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,e.string2buf=function(t){var e,n,r,i,s,o=t.length,l=0;for(i=0;i<o;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new a.Buf8(l),s=0,i=0;s<l;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new a.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,a,r,i,o=e||t.length,u=new Array(2*o);for(a=0,n=0;n<o;)if((r=t[n++])<128)u[a++]=r;else if((i=s[r])>4)u[a++]=65533,n+=i-1;else{for(r&=2===i?31:3===i?15:7;i>1&&n<o;)r=r<<6|63&t[n++],i--;i>1?u[a++]=65533:r<65536?u[a++]=r:(r-=65536,u[a++]=55296|r>>10&1023,u[a++]=56320|1023&r)}return l(u,a)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__15__},function(t,e){t.exports={executeLayout:function(t,e,n,a){if(t.isEnabled()){t.getModel().beginUpdate();try{e()}catch(t){throw t}finally{if(null==navigator.userAgent||navigator.userAgent.indexOf("Camino")<0){var r=new mxMorphing(t);r.addListener(mxEvent.DONE,mxUtils.bind(this,(function(){t.getModel().endUpdate(),null!=a&&a()}))),r.startAnimation()}else t.getModel().endUpdate(),null!=a&&a()}}},executeLayoutList:function(t,e,n){for(var a=t.getSelectionCells(),r=0;r<e.length;r++){var i=new window[e[r].layout](t);if(null!=e[r].config)for(var s in e[r].config)i[s]=e[r].config[s];this.executeLayout(t,(function(){i.execute(t.getDefaultParent(),0==a.length?null:a)}),r==e.length-1,n)}},csvToArray:function(t){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test(t))return null;var e=[];return t.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,(function(t,n,a,r){return void 0!==n?e.push(n.replace(/\\'/g,"'")):void 0!==a?e.push(a.replace(/\\"/g,'"')):void 0!==r&&e.push(r),""})),/,\s*$/.test(t)&&e.push(""),e},importCsv:function(t,e){try{var n=e.split("\n"),a=[],r=[],i={};if(n.length>0){for(var s={},o=null,l=null,u=null,h=null,c=null,f=null,d=null,p=null,g="",v="auto",m="auto",y=null,b=null,x=40,w=40,k=100,_=0,S=(t.view,t.getGraphBounds(),function(){}),E=t.getFreeInsertPoint(),C=E.x,O=E.y,M=O,T=null,A="auto",R=(p=null,[]),N=null,L=null,D=0;D<n.length&&"#"==n[D].charAt(0);){e=n[D];for(D++;D<n.length&&"\\"==e.charAt(e.length-1)&&"#"==n[D].charAt(0);)e=e.substring(0,e.length-1)+mxUtils.trim(n[D].substring(1)),D++;if("#"!=e.charAt(1)){var P=e.indexOf(":");if(P>0){var I=mxUtils.trim(e.substring(1,P)),F=mxUtils.trim(e.substring(P+1));"label"==I?T=t.sanitizeHtml(F):"labelname"==I&&F.length>0&&"-"!=F?h=F:"labels"==I&&F.length>0&&"-"!=F?c=JSON.parse(F):"style"==I?o=F:"parentstyle"==I?f=F:"stylename"==I&&F.length>0&&"-"!=F?u=F:"styles"==I&&F.length>0&&"-"!=F?l=JSON.parse(F):"identity"==I&&F.length>0&&"-"!=F?d=F:"parent"==I&&F.length>0&&"-"!=F?p=F:"namespace"==I&&F.length>0&&"-"!=F?g=F:"width"==I?v=F:"height"==I?m=F:"left"==I&&F.length>0?y=F:"top"==I&&F.length>0?b=F:"ignore"==I?L=F.split(","):"connect"==I?R.push(JSON.parse(F)):"link"==I?N=F:"padding"==I?_=parseFloat(F):"edgespacing"==I?x=parseFloat(F):"nodespacing"==I?w=parseFloat(F):"levelspacing"==I?k=parseFloat(F):"layout"==I&&(A=F)}}}if(null==n[D])throw new Error(mxResources.get("invalidOrMissingFile"));for(var z=this.csvToArray(n[D]),G=null,V=null,H=[],j=0;j<z.length;j++)d==z[j]&&(G=j),p==z[j]&&(V=j),H.push(mxUtils.trim(z[j]).replace(/[^a-z0-9]+/gi,"_").replace(/^\d+/,"").replace(/_+$/,""));if(null==T&&(T="%"+H[0]+"%"),null!=R)for(var B=0;B<R.length;B++)null==s[R[B].to]&&(s[R[B].to]={});var U=[];for(j=D+1;j<n.length;j++){if(null==(X=this.csvToArray(n[j]))){var Y=n[j].length>40?n[j].substring(0,40)+"...":n[j];throw new Error(Y+" ("+j+"):\n"+mxResources.get("containsValidationErrors"))}X.length>0&&U.push(X)}t.model.beginUpdate();try{for(j=0;j<U.length;j++){var X=U[j],$=null,Z=null!=G?g+X[G]:null;null!=Z&&($=t.model.getCell(Z));var W=null!=$,K=new mxCell(T,new mxGeometry(C,M,0,0),o||"whiteSpace=wrap;html=1;");K.vertex=!0,K.id=Z;for(var J=0;J<X.length;J++)t.setAttributeForCell(K,H[J],X[J]);if(null!=h&&null!=c){var q=c[K.getAttribute(h)];null!=q&&t.labelChanged(K,q)}if(null!=u&&null!=l){var Q=l[K.getAttribute(u)];null!=Q&&(K.style=Q)}if(t.setAttributeForCell(K,"placeholders","1"),K.style=t.replacePlaceholders(K,K.style),W&&(t.model.setGeometry($,K.geometry),t.model.setStyle($,K.style),mxUtils.indexOf(r,$)<0&&r.push($)),$=K,!W)for(B=0;B<R.length;B++)s[R[B].to][$.getAttribute(R[B].to)]=$;null!=N&&"link"!=N&&(t.setLinkForCell($,$.getAttribute(N)),t.setAttributeForCell($,N,null)),t.fireEvent(new mxEventObject("cellsInserted","cells",[$]));var tt=t.getPreferredSizeForCell($);if($.vertex&&(null!=y&&null!=$.getAttribute(y)&&($.geometry.x=C+parseFloat($.getAttribute(y))),null!=b&&null!=$.getAttribute(b)&&($.geometry.y=O+parseFloat($.getAttribute(b))),"@"==v.charAt(0)&&null!=$.getAttribute(v.substring(1))?$.geometry.width=parseFloat($.getAttribute(v.substring(1))):$.geometry.width="auto"==v?tt.width+_:parseFloat(v),"@"==m.charAt(0)&&null!=$.getAttribute(m.substring(1))?$.geometry.height=parseFloat($.getAttribute(m.substring(1))):$.geometry.height="auto"==m?tt.height+_:parseFloat(m),M+=$.geometry.height+w),W)null==i[Z]&&(i[Z]=[]),i[Z].push($);else{p=null!=V?t.model.getCell(g+X[V]):null;a.push($),null!=p?(p.style=t.replacePlaceholders(p,f),t.addCell($,p)):r.push(t.addCell($))}}var et=r.slice(),nt=r.slice();for(B=0;B<R.length;B++){var at=R[B];for(j=0;j<a.length;j++){$=a[j];var rt=mxUtils.bind(this,(function(e,n,a){var r=n.getAttribute(a.from);if(null!=r&&(t.setAttributeForCell(n,a.from,null),""!=r))for(var i=r.split(","),o=0;o<i.length;o++){var l=s[a.to][i[o]];if(null!=l){var u=a.label;null!=a.fromlabel&&(u=(n.getAttribute(a.fromlabel)||"")+(u||"")),null!=a.tolabel&&(u=(u||"")+(l.getAttribute(a.tolabel)||""));var h="target"==a.placeholders==!a.invert?l:e,c=null!=a.style?t.replacePlaceholders(h,a.style):t.createCurrentEdgeStyle();nt.push(t.insertEdge(null,null,u||"",a.invert?l:e,a.invert?e:l,c)),mxUtils.remove(a.invert?e:l,et)}}}));if(rt($,$,at),null!=i[$.id])for(J=0;J<i[$.id].length;J++)rt($,i[$.id][J],at)}}if(null!=L)for(j=0;j<a.length;j++)for($=a[j],J=0;J<L.length;J++)t.setAttributeForCell($,mxUtils.trim(L[J]),null);if(r.length>0){(ft=new mxParallelEdgeLayout(t)).spacing=x;var it=function(){ft.spacing>0&&ft.execute(t.getDefaultParent());for(var e=0;e<r.length;e++){var n=t.getCellGeometry(r[e]);n.x=Math.round(t.snap(n.x)),n.y=Math.round(t.snap(n.y)),"auto"==v&&(n.width=Math.round(t.snap(n.width))),"auto"==m&&(n.height=Math.round(t.snap(n.height)))}};if("["==A.charAt(0)){var st=S;t.view.validate(),this.executeLayoutList(t,JSON.parse(A),(function(){it(),st()})),S=null}else if("circle"==A){var ot=new mxCircleLayout(t);ot.resetEdges=!1;var lt=ot.isVertexIgnored;ot.isVertexIgnored=function(t){return lt.apply(this,arguments)||mxUtils.indexOf(r,t)<0},this.executeLayout(t,(function(){ot.execute(t.getDefaultParent()),it()}),!0,S),S=null}else if("horizontaltree"==A||"verticaltree"==A||"auto"==A&&nt.length==2*r.length-1&&1==et.length){t.view.validate();var ut=new mxCompactTreeLayout(t,"horizontaltree"==A);ut.levelDistance=w,ut.edgeRouting=!1,ut.resetEdges=!1,this.executeLayout(t,(function(){ut.execute(t.getDefaultParent(),et.length>0?et[0]:null)}),!0,S),S=null}else if("horizontalflow"==A||"verticalflow"==A||"auto"==A&&1==et.length){t.view.validate();var ht=new mxHierarchicalLayout(t,"horizontalflow"==A?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH);ht.intraCellSpacing=w,ht.parallelEdgeSpacing=x,ht.interRankCellSpacing=k,ht.disableEdgeStyle=!1,this.executeLayout(t,(function(){ht.execute(t.getDefaultParent(),nt),t.moveCells(nt,C,O)}),!0,S),S=null}else if("organic"==A||"auto"==A&&nt.length>r.length){t.view.validate();var ct=new mxFastOrganicLayout(t);ct.forceConstant=3*w,ct.resetEdges=!1;var ft,dt=ct.isVertexIgnored;ct.isVertexIgnored=function(t){return dt.apply(this,arguments)||mxUtils.indexOf(r,t)<0},(ft=new mxParallelEdgeLayout(t)).spacing=x,this.executeLayout(t,(function(){ct.execute(t.getDefaultParent()),it()}),!0,S),S=null}}}finally{t.model.endUpdate()}null!=S&&S()}}catch(B){console.log(B)}}}},function(t){t.exports=JSON.parse('{"type":"panel","name":"FlowCharting","id":"agenty-flowcharting-panel","info":{"description":"Flowcharting is a plugin for grafana. It aims to display complexe diagram draws with draw.io like Visio","author":{"name":"Arnaud GENTY","url":"https://github.com/algenty/grafana-flowcharting"},"keywords":["flowchart","panel","diagram","workflow","floorplan","map","organigram","draw.io","visio","mxgraph"],"links":[{"name":"Project site","url":"https://github.com/algenty/grafana-flowcharting"},{"name":"Documentation","url":"https://algenty.github.io/flowcharting-repository/"},{"name":"Demonstration","url":"https://play.grafana.org/d/Unu5JcjWk/flowcharting-index?orgId=1"},{"name":"Apache License","url":"https://github.com/algenty/grafana-flowcharting/blob/master/LICENSE"}],"version":"0.9.0","updated":"2019-05-11","logos":{"small":"img/agenty-flowcharting.svg","large":"img/agenty-flowcharting.svg"}},"dependencies":{"grafanaVersion":"6.x.x","plugins":[]}}')},function(t,e,n){function a(t,e,n,a,r,i,s){try{var o=t[i](s),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(a,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){a(s,r,i,o,l,"next",t)}function l(t){a(s,r,i,o,l,"throw",t)}o(void 0)}))}}var i=n(19),s=n(28),o=n(29);t.exports={stringToBytes:function(t){for(var e=new Array(t.length),n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e},bytesToString:function(t){for(var e="",n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return e},encode:function(t,e,n,a){var r=t;if(e)try{r=encodeURIComponent(r)}catch(t){return void console.error(t)}if(n&&r.length>0)try{r=this.bytesToString(i.deflateRaw(r))}catch(t){return void console.error(t)}if(a)try{r=btoa(r)}catch(t){return void console.error(t)}return r},removeLinebreaks:function(t){return t.replace(/(\r\n|\n|\r)/gm,"")},isencoded:function(t){try{var e=this.parseXml(t).documentElement;if(null==e||"mxfile"!==e.nodeName)return-1===t.indexOf("mxGraphModel");if(e.getElementsByTagName("diagram").length>0)return!0}catch(t){return!0}return!1},decode:function(t,e,n,a){try{var r=this.parseXml(t).documentElement;if(null!=r&&"mxfile"===r.nodeName){var s=r.getElementsByTagName("diagram");s.length>0&&(t=this.getTextContent(s[0]))}}catch(t){}return a&&(t=atob(t)),n&&t.length>0&&(t=this.bytesToString(i.inflateRaw(t))),e&&(t=decodeURIComponent(t)),t},parseXml:function(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");var e=this.createXmlDocument();return e.async="false",e.loadXML(t),e},createXmlDocument:function(){var t=null;return document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM")),t},decodeFromUri:function(t){try{t=decodeURIComponent(t)}catch(t){return void console.error(t)}return t},getTextContent:function(t){return null!=t?t[void 0===t.textContent?"text":"textContent"]:""},normalizeXml:function(t){try{var e=t;return e=(e=e.replace(/>\s*/g,">")).replace(/\s*</g,"<"),t}catch(t){return}},sleep:function(t,e){return r(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(t){return new Promise((function(e){return setTimeout(e,t)}))},n.next=3,a(t);case 3:e&&console.log(e);case 4:case"end":return n.stop()}}),n)})))()},uniqueID:function(){function t(){return Math.random().toString(16).slice(-4)}return"".concat(t()+t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()).concat(t()).concat(t())},stringToJsRegex:function(t){if("/"!==t[0])return new RegExp("^".concat(t,"$"));var e=t.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return new RegExp(e[1],e[2])},matchString:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==t||null==e||0===t.length||0===e.length)return!1;if(t===e)return!0;if(n){var a=this.stringToJsRegex(e);return t.toString().match(a)}return!1},minify:function(t){try{return s.xmlmin(t,!1)}catch(e){return this.log(3,"Error in minify",e),t}},prettify:function(t){try{return s.xml(t)}catch(e){return this.log(3,"Error in prettify",e),t}},prettifyJSON:function(t){try{return s.json(t)}catch(e){return this.log(3,"Error in prettify",e),t}},addScript:function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t);var n=document.getElementsByTagName("script")[0];null!=n&&n.parentNode.insertBefore(e,n)},loadJS:function(t){try{var e=this.loadFile(t);e&&this.evalRaw(e)}catch(e){null!=window.console&&console.error("LoadJS failed:",t,e)}},loadFile:function(t){try{var e=mxUtils.load(t);if(null!=e&&e.getStatus()>=200&&e.getStatus()<=299)return e.getText()}catch(e){null!=window.console&&console.error("Error loadFile:",t,e)}},$loadFile:function(t){var e;return $.ajax({type:"GET",url:t,async:!1,success:function(t){e=t},error:function(e){console.log("Error when download "+t)}}),e},evalRaw:function(t){try{eval.call(window,t)}catch(t){null!=window.console&&console.error("Error eval.call : ",t)}},evalIt:function(t){var e=t;try{e=o(t)}catch(n){e=t}return e},getfileContent:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;(e=r(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:a=e.sent,console.log(getfileContent,t,a);case 7:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})()}))}},function(t,e,n){"use strict";var a={};(0,n(4).assign)(a,n(20),n(23),n(14)),t.exports=a},function(t,e,n){"use strict";var a=n(21),r=n(4),i=n(12),s=n(8),o=n(13),l=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(s[n]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var h;if(h="string"==typeof e.dictionary?i.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=a.deflateSetDictionary(this.strm,h)))throw new Error(s[n]);this._dict_set=!0}}function h(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}u.prototype.push=function(t,e){var n,s,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=i.string2buf(t):"[object ArrayBuffer]"===l.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(u),o.next_out=0,o.avail_out=u),1!==(n=a.deflate(o,s))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(i.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===s?(n=a.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),o.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=u,e.deflate=h,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,h(t,e)}},function(t,e,n){"use strict";var a,r=n(4),i=n(22),s=n(10),o=n(11),l=n(8);function u(t,e){return t.msg=l[e],e}function h(t){return(t<<1)-(t>4?9:0)}function c(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function d(t,e){i._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function v(t,e){var n,a,r=t.max_chain_length,i=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,h=t.w_mask,c=t.prev,f=t.strstart+258,d=u[i+s-1],p=u[i+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(n=e)+s]===p&&u[n+s-1]===d&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<f);if(a=258-(f-i),i=f-258,a>s){if(t.match_start=e,s=a,a>=o)break;d=u[i+s-1],p=u[i+s]}}}while((e=c[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function m(t){var e,n,a,i,l,u,h,c,f,d,p=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-262)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;do{a=t.head[--e],t.head[e]=a>=p?a-p:0}while(--n);e=n=p;do{a=t.prev[--e],t.prev[e]=a>=p?a-p:0}while(--n);i+=p}if(0===t.strm.avail_in)break;if(u=t.strm,h=t.window,c=t.strstart+t.lookahead,f=i,d=void 0,(d=u.avail_in)>f&&(d=f),n=0===d?0:(u.avail_in-=d,r.arraySet(h,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=s(u.adler,h,d,c):2===u.state.wrap&&(u.adler=o(u.adler,h,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function y(t,e){for(var n,a;;){if(t.lookahead<262){if(m(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=v(t,n)),t.match_length>=3)if(a=i._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function b(t,e){for(var n,a,r;;){if(t.lookahead<262){if(m(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=v(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,a=i._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,a&&(d(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((a=i._tr_tally(t,0,t.window[t.strstart-1]))&&d(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=i._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}function x(t,e,n,a,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=a,this.func=r}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(1146),this.dyn_dtree=new r.Buf16(122),this.bl_tree=new r.Buf16(78),c(this.dyn_ltree),c(this.dyn_dtree),c(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(16),this.heap=new r.Buf16(573),c(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(573),c(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,i._tr_init(e),0):u(t,-2)}function _(t){var e,n=k(t);return 0===n&&((e=t.state).window_size=2*e.w_size,c(e.head),e.max_lazy_match=a[e.level].max_lazy,e.good_match=a[e.level].good_length,e.nice_match=a[e.level].nice_length,e.max_chain_length=a[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function S(t,e,n,a,i,s){if(!t)return-2;var o=1;if(-1===e&&(e=6),a<0?(o=0,a=-a):a>15&&(o=2,a-=16),i<1||i>9||8!==n||a<8||a>15||e<0||e>9||s<0||s>4)return u(t,-2);8===a&&(a=9);var l=new w;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=n,_(t)}a=[new x(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(m(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+n;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,d(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(d(t,!1),t.strm.avail_out),1)})),new x(4,4,8,4,y),new x(4,5,16,8,y),new x(4,6,32,32,y),new x(4,4,16,16,b),new x(8,16,32,32,b),new x(8,16,128,128,b),new x(8,32,128,256,b),new x(32,128,258,1024,b),new x(32,258,258,4096,b)],e.deflateInit=function(t,e){return S(t,e,8,15,8,0)},e.deflateInit2=S,e.deflateReset=_,e.deflateResetKeep=k,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var n,r,s,l;if(!t||!t.state||e>5||e<0)return t?u(t,-2):-2;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&4!==e)return u(t,0===t.avail_out?-5:-2);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,p(r,31),p(r,139),p(r,8),r.gzhead?(p(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),p(r,255&r.gzhead.time),p(r,r.gzhead.time>>8&255),p(r,r.gzhead.time>>16&255),p(r,r.gzhead.time>>24&255),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(p(r,255&r.gzhead.extra.length),p(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=o(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(p(r,0),p(r,0),p(r,0),p(r,0),p(r,0),p(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),p(r,3),r.status=113);else{var v=8+(r.w_bits-8<<4)<<8;v|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(v|=32),v+=31-v%31,r.status=113,g(r,v),0!==r.strstart&&(g(r,t.adler>>>16),g(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending!==r.pending_buf_size));)p(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,p(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),f(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,p(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&f(t),r.pending+2<=r.pending_buf_size&&(p(r,255&t.adler),p(r,t.adler>>8&255),t.adler=0,r.status=113)):r.status=113),0!==r.pending){if(f(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&h(e)<=h(n)&&4!==e)return u(t,-5);if(666===r.status&&0!==t.avail_in)return u(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&666!==r.status){var y=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(m(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,a,r,s,o=t.window;;){if(t.lookahead<=258){if(m(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(a=o[r=t.strstart-1])===o[++r]&&a===o[++r]&&a===o[++r]){s=t.strstart+258;do{}while(a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&r<s);t.match_length=258-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=i._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=i._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(d(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(d(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(d(t,!1),0===t.strm.avail_out)?1:2}(r,e):a[r.level].func(r,e);if(3!==y&&4!==y||(r.status=666),1===y||3===y)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===y&&(1===e?i._tr_align(r):5!==e&&(i._tr_stored_block(r,0,0,!1),3===e&&(c(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),f(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(p(r,255&t.adler),p(r,t.adler>>8&255),p(r,t.adler>>16&255),p(r,t.adler>>24&255),p(r,255&t.total_in),p(r,t.total_in>>8&255),p(r,t.total_in>>16&255),p(r,t.total_in>>24&255)):(g(r,t.adler>>>16),g(r,65535&t.adler)),f(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?u(t,-2):(t.state=null,113===e?u(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var n,a,i,o,l,u,h,f,d=e.length;if(!t||!t.state)return-2;if(2===(o=(n=t.state).wrap)||1===o&&42!==n.status||n.lookahead)return-2;for(1===o&&(t.adler=s(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===o&&(c(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new r.Buf8(n.w_size),r.arraySet(f,e,d-n.w_size,n.w_size,0),e=f,d=n.w_size),l=t.avail_in,u=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,m(n);n.lookahead>=3;){a=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[a+3-1])&n.hash_mask,n.prev[a&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=a,a++}while(--i);n.strstart=a,n.lookahead=2,m(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=u,t.input=h,t.avail_in=l,n.wrap=o,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var a=n(4);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);r(u);var h=new Array(60);r(h);var c=new Array(512);r(c);var f=new Array(256);r(f);var d=new Array(29);r(d);var p,g,v,m=new Array(30);function y(t,e,n,a,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=t&&t.length}function b(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function x(t){return t<256?c[t]:c[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function k(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function _(t,e,n){k(t,n[2*e],n[2*e+1])}function S(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function E(t,e,n){var a,r,i=new Array(16),s=0;for(a=1;a<=15;a++)i[a]=s=s+n[a-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=S(i[o]++,o))}}function C(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function O(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function M(t,e,n,a){var r=2*e,i=2*n;return t[r]<t[i]||t[r]===t[i]&&a[e]<=a[n]}function T(t,e,n){for(var a=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&M(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!M(e,a,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=a}function A(t,e,n){var a,r,o,l,u=0;if(0!==t.last_lit)do{a=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],r=t.pending_buf[t.l_buf+u],u++,0===a?_(t,r,e):(_(t,(o=f[r])+256+1,e),0!==(l=i[o])&&k(t,r-=d[o],l),_(t,o=x(--a),n),0!==(l=s[o])&&k(t,a-=m[o],l))}while(u<t.last_lit);_(t,256,e)}function R(t,e){var n,a,r,i=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==i[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)i[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=s[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)T(t,i,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,i,1),a=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=a,i[2*r]=i[2*n]+i[2*a],t.depth[r]=(t.depth[n]>=t.depth[a]?t.depth[n]:t.depth[a])+1,i[2*n+1]=i[2*a+1]=r,t.heap[1]=r++,T(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,a,r,i,s,o,l=e.dyn_tree,u=e.max_code,h=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(i=0;i<=15;i++)t.bl_count[i]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(i=l[2*l[2*(a=t.heap[n])+1]+1]+1)>p&&(i=p,g++),l[2*a+1]=i,a>u||(t.bl_count[i]++,s=0,a>=d&&(s=f[a-d]),o=l[2*a],t.opt_len+=o*(i+s),c&&(t.static_len+=o*(h[2*a+1]+s)));if(0!==g){do{for(i=p-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(i=p;0!==i;i--)for(a=t.bl_count[i];0!==a;)(r=t.heap[--n])>u||(l[2*r+1]!==i&&(t.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),a--)}}(t,e),E(i,u,t.bl_count)}function N(t,e,n){var a,r,i=-1,s=e[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,a=0;a<=n;a++)r=s,s=e[2*(a+1)+1],++o<l&&r===s||(o<u?t.bl_tree[2*r]+=o:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,i=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))}function L(t,e,n){var a,r,i=-1,s=e[1],o=0,l=7,u=4;for(0===s&&(l=138,u=3),a=0;a<=n;a++)if(r=s,s=e[2*(a+1)+1],!(++o<l&&r===s)){if(o<u)do{_(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==i&&(_(t,r,t.bl_tree),o--),_(t,16,t.bl_tree),k(t,o-3,2)):o<=10?(_(t,17,t.bl_tree),k(t,o-3,3)):(_(t,18,t.bl_tree),k(t,o-11,7));o=0,i=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4)}}r(m);var D=!1;function P(t,e,n,r){k(t,0+(r?1:0),3),function(t,e,n,r){O(t),r&&(w(t,n),w(t,~n)),a.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){D||(!function(){var t,e,n,a,r,l=new Array(16);for(n=0,a=0;a<28;a++)for(d[a]=n,t=0;t<1<<i[a];t++)f[n++]=a;for(f[n-1]=a,r=0,a=0;a<16;a++)for(m[a]=r,t=0;t<1<<s[a];t++)c[r++]=a;for(r>>=7;a<30;a++)for(m[a]=r<<7,t=0;t<1<<s[a]-7;t++)c[256+r++]=a;for(e=0;e<=15;e++)l[e]=0;for(t=0;t<=143;)u[2*t+1]=8,t++,l[8]++;for(;t<=255;)u[2*t+1]=9,t++,l[9]++;for(;t<=279;)u[2*t+1]=7,t++,l[7]++;for(;t<=287;)u[2*t+1]=8,t++,l[8]++;for(E(u,287,l),t=0;t<30;t++)h[2*t+1]=5,h[2*t]=S(t,5);p=new y(u,i,257,286,15),g=new y(h,s,0,30,15),v=new y(new Array(0),o,0,19,7)}(),D=!0),t.l_desc=new b(t.dyn_ltree,p),t.d_desc=new b(t.dyn_dtree,g),t.bl_desc=new b(t.bl_tree,v),t.bi_buf=0,t.bi_valid=0,C(t)},e._tr_stored_block=P,e._tr_flush_block=function(t,e,n,a){var r,i,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),s=function(t){var e;for(N(t,t.dyn_ltree,t.l_desc.max_code),N(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=r&&(r=i)):r=i=n+5,n+4<=r&&-1!==e?P(t,e,n,a):4===t.strategy||i===r?(k(t,2+(a?1:0),3),A(t,u,h)):(k(t,4+(a?1:0),3),function(t,e,n,a){var r;for(k(t,e-257,5),k(t,n-1,5),k(t,a-4,4),r=0;r<a;r++)k(t,t.bl_tree[2*l[r]+1],3);L(t,t.dyn_ltree,e-1),L(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),A(t,t.dyn_ltree,t.dyn_dtree)),C(t),a&&O(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+256+1)]++,t.dyn_dtree[2*x(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){k(t,2,3),_(t,256,u),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var a=n(24),r=n(4),i=n(12),s=n(14),o=n(8),l=n(13),u=n(27),h=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(o[n]);if(this.header=new u,a.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=i.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=a.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(o[n])}function f(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}c.prototype.push=function(t,e){var n,o,l,u,c,f=this.strm,d=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?f.input=i.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(d),f.next_out=0,f.avail_out=d),(n=a.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(n=a.inflateSetDictionary(this.strm,p)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==s.Z_STREAM_END&&(0!==f.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(f.output,f.next_out),u=f.next_out-l,c=i.buf2string(f.output,l),f.next_out=u,f.avail_out=d-u,u&&r.arraySet(f.output,f.output,l,u,0),this.onData(c)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,n){"use strict";var a=n(4),r=n(10),i=n(11),s=n(25),o=n(26);function l(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new a.Buf32(852),e.distcode=e.distdyn=new a.Buf32(592),e.sane=1,e.back=-1,0):-2}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,h(t)):-2}function f(t,e){var n,a;return t&&t.state?(a=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==a.window&&a.wbits!==e&&(a.window=null),a.wrap=n,a.wbits=e,c(t))):-2}function d(t,e){var n,a;return t?(a=new u,t.state=a,a.window=null,0!==(n=f(t,e))&&(t.state=null),n):-2}var p,g,v=!0;function m(t){if(v){var e;for(p=new a.Buf32(512),g=new a.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(2,t.lens,0,32,g,0,t.work,{bits:5}),v=!1}t.lencode=p,t.lenbits=9,t.distcode=g,t.distbits=5}function y(t,e,n,r){var i,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new a.Buf8(s.wsize)),r>=s.wsize?(a.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>r&&(i=r),a.arraySet(s.window,e,n-r,i,s.wnext),(r-=i)?(a.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}e.inflateReset=c,e.inflateReset2=f,e.inflateResetKeep=h,e.inflateInit=function(t){return d(t,15)},e.inflateInit2=d,e.inflate=function(t,e){var n,u,h,c,f,d,p,g,v,b,x,w,k,_,S,E,C,O,M,T,A,R,N,L,D=0,P=new a.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),f=t.next_out,h=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=n.hold,v=n.bits,b=d,x=p,R=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(2&n.wrap&&35615===g){n.check=0,P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0),g=0,v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",n.mode=30;break}if(v-=4,A=8+(15&(g>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,t.adler=n.check=1,n.mode=512&g?10:12,g=0,v=0;break;case 2:for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(n.flags=g,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0)),g=0,v=0,n.mode=3;case 3:for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}n.head&&(n.head.time=g),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,P[2]=g>>>16&255,P[3]=g>>>24&255,n.check=i(n.check,P,4,0)),g=0,v=0,n.mode=4;case 4:for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0)),g=0,v=0,n.mode=5;case 5:if(1024&n.flags){for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0)),g=0,v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((w=n.length)>d&&(w=d),w&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),a.arraySet(n.head.extra,u,c,w,A)),512&n.flags&&(n.check=i(n.check,u,w,c)),d-=w,c+=w,n.length-=w),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===d)break t;w=0;do{A=u[c+w++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&w<d);if(512&n.flags&&(n.check=i(n.check,u,w,c)),d-=w,c+=w,A)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===d)break t;w=0;do{A=u[c+w++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&w<d);if(512&n.flags&&(n.check=i(n.check,u,w,c)),d-=w,c+=w,A)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;v<16;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}g=0,v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}t.adler=n.check=l(g),g=0,v=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,n.hold=g,n.bits=v,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){g>>>=7&v,v-=7&v,n.mode=27;break}for(;v<3;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}switch(n.last=1&g,v-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(m(n),n.mode=20,6===e){g>>>=2,v-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}g>>>=2,v-=2;break;case 14:for(g>>>=7&v,v-=7&v;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,g=0,v=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(w=n.length){if(w>d&&(w=d),w>p&&(w=p),0===w)break t;a.arraySet(h,u,c,w,f),d-=w,c+=w,p-=w,f+=w,n.length-=w;break}n.mode=12;break;case 17:for(;v<14;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(n.nlen=257+(31&g),g>>>=5,v-=5,n.ndist=1+(31&g),g>>>=5,v-=5,n.ncode=4+(15&g),g>>>=4,v-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;v<3;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}n.lens[I[n.have++]]=7&g,g>>>=3,v-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},R=o(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,R){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(D=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,C=65535&D,!((S=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(C<16)g>>>=S,v-=S,n.lens[n.have++]=C;else{if(16===C){for(L=S+2;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g>>>=S,v-=S,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],w=3+(3&g),g>>>=2,v-=2}else if(17===C){for(L=S+3;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}v-=S,A=0,w=3+(7&(g>>>=S)),g>>>=3,v-=3}else{for(L=S+7;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}v-=S,A=0,w=11+(127&(g>>>=S)),g>>>=7,v-=7}if(n.have+w>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},R=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,R){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},R=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,R){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(d>=6&&p>=258){t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,n.hold=g,n.bits=v,s(t,x),f=t.next_out,h=t.output,p=t.avail_out,c=t.next_in,u=t.input,d=t.avail_in,g=n.hold,v=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(D=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,C=65535&D,!((S=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(E&&0==(240&E)){for(O=S,M=E,T=C;E=(D=n.lencode[T+((g&(1<<O+M)-1)>>O)])>>>16&255,C=65535&D,!(O+(S=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}g>>>=O,v-=O,n.back+=O}if(g>>>=S,v-=S,n.back+=S,n.length=C,0===E){n.mode=26;break}if(32&E){n.back=-1,n.mode=12;break}if(64&E){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&E,n.mode=22;case 22:if(n.extra){for(L=n.extra;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(D=n.distcode[g&(1<<n.distbits)-1])>>>16&255,C=65535&D,!((S=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(0==(240&E)){for(O=S,M=E,T=C;E=(D=n.distcode[T+((g&(1<<O+M)-1)>>O)])>>>16&255,C=65535&D,!(O+(S=D>>>24)<=v);){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}g>>>=O,v-=O,n.back+=O}if(g>>>=S,v-=S,n.back+=S,64&E){t.msg="invalid distance code",n.mode=30;break}n.offset=C,n.extra=15&E,n.mode=24;case 24:if(n.extra){for(L=n.extra;v<L;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===p)break t;if(w=x-p,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}w>n.wnext?(w-=n.wnext,k=n.wsize-w):k=n.wnext-w,w>n.length&&(w=n.length),_=n.window}else _=h,k=f-n.offset,w=n.length;w>p&&(w=p),p-=w,n.length-=w;do{h[f++]=_[k++]}while(--w);0===n.length&&(n.mode=21);break;case 26:if(0===p)break t;h[f++]=n.length,p--,n.mode=21;break;case 27:if(n.wrap){for(;v<32;){if(0===d)break t;d--,g|=u[c++]<<v,v+=8}if(x-=p,t.total_out+=x,n.total+=x,x&&(t.adler=n.check=n.flags?i(n.check,h,x,f-x):r(n.check,h,x,f-x)),x=p,(n.flags?g:l(g))!==n.check){t.msg="incorrect data check",n.mode=30;break}g=0,v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;v<32;){if(0===d)break t;d--,g+=u[c++]<<v,v+=8}if(g!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}g=0,v=0}n.mode=29;case 29:R=1;break t;case 30:R=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=p,t.next_in=c,t.avail_in=d,n.hold=g,n.bits=v,(n.wsize||x!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&y(t,t.output,t.next_out,x-t.avail_out)?(n.mode=31,-4):(b-=t.avail_in,x-=t.avail_out,t.total_in+=b,t.total_out+=x,n.total+=x,n.wrap&&x&&(t.adler=n.check=n.flags?i(n.check,h,x,t.next_out-x):r(n.check,h,x,t.next_out-x)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===b&&0===x||4===e)&&0===R&&(R=-5),R)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var n,a=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&r(1,e,a,0)!==n.check?-3:y(t,e,a,a)?(n.mode=31,-4):(n.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,a,r,i,s,o,l,u,h,c,f,d,p,g,v,m,y,b,x,w,k,_,S,E,C;n=t.state,a=t.next_in,E=t.input,r=a+(t.avail_in-5),i=t.next_out,C=t.output,s=i-(e-t.avail_out),o=i+(t.avail_out-257),l=n.dmax,u=n.wsize,h=n.whave,c=n.wnext,f=n.window,d=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(d+=E[a++]<<p,p+=8,d+=E[a++]<<p,p+=8),b=g[d&m];e:for(;;){if(d>>>=x=b>>>24,p-=x,0===(x=b>>>16&255))C[i++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=g[(65535&b)+(d&(1<<x)-1)];continue e}if(32&x){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(x&=15)&&(p<x&&(d+=E[a++]<<p,p+=8),w+=d&(1<<x)-1,d>>>=x,p-=x),p<15&&(d+=E[a++]<<p,p+=8,d+=E[a++]<<p,p+=8),b=v[d&y];n:for(;;){if(d>>>=x=b>>>24,p-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=v[(65535&b)+(d&(1<<x)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(k=65535&b,p<(x&=15)&&(d+=E[a++]<<p,(p+=8)<x&&(d+=E[a++]<<p,p+=8)),(k+=d&(1<<x)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=x,p-=x,k>(x=i-s)){if((x=k-x)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(_=0,S=f,0===c){if(_+=u-x,x<w){w-=x;do{C[i++]=f[_++]}while(--x);_=i-k,S=C}}else if(c<x){if(_+=u+c-x,(x-=c)<w){w-=x;do{C[i++]=f[_++]}while(--x);if(_=0,c<w){w-=x=c;do{C[i++]=f[_++]}while(--x);_=i-k,S=C}}}else if(_+=c-x,x<w){w-=x;do{C[i++]=f[_++]}while(--x);_=i-k,S=C}for(;w>2;)C[i++]=S[_++],C[i++]=S[_++],C[i++]=S[_++],w-=3;w&&(C[i++]=S[_++],w>1&&(C[i++]=S[_++]))}else{_=i-k;do{C[i++]=C[_++],C[i++]=C[_++],C[i++]=C[_++],w-=3}while(w>2);w&&(C[i++]=C[_++],w>1&&(C[i++]=C[_++]))}break}}break}}while(a<r&&i<o);a-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=a,t.next_out=i,t.avail_in=a<r?r-a+5:5-(a-r),t.avail_out=i<o?o-i+257:257-(i-o),n.hold=d,n.bits=p}},function(t,e,n){"use strict";var a=n(4),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,u,h,c,f){var d,p,g,v,m,y,b,x,w,k=f.bits,_=0,S=0,E=0,C=0,O=0,M=0,T=0,A=0,R=0,N=0,L=null,D=0,P=new a.Buf16(16),I=new a.Buf16(16),F=null,z=0;for(_=0;_<=15;_++)P[_]=0;for(S=0;S<l;S++)P[e[n+S]]++;for(O=k,C=15;C>=1&&0===P[C];C--);if(O>C&&(O=C),0===C)return u[h++]=20971520,u[h++]=20971520,f.bits=1,0;for(E=1;E<C&&0===P[E];E++);for(O<E&&(O=E),A=1,_=1;_<=15;_++)if(A<<=1,(A-=P[_])<0)return-1;if(A>0&&(0===t||1!==C))return-1;for(I[1]=0,_=1;_<15;_++)I[_+1]=I[_]+P[_];for(S=0;S<l;S++)0!==e[n+S]&&(c[I[e[n+S]]++]=S);if(0===t?(L=F=c,y=19):1===t?(L=r,D-=257,F=i,z-=257,y=256):(L=s,F=o,y=-1),N=0,S=0,_=E,m=h,M=O,T=0,g=-1,v=(R=1<<O)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){b=_-T,c[S]<y?(x=0,w=c[S]):c[S]>y?(x=F[z+c[S]],w=L[D+c[S]]):(x=96,w=0),d=1<<_-T,E=p=1<<M;do{u[m+(N>>T)+(p-=d)]=b<<24|x<<16|w|0}while(0!==p);for(d=1<<_-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,S++,0==--P[_]){if(_===C)break;_=e[n+c[S]]}if(_>O&&(N&v)!==g){for(0===T&&(T=O),m+=E,A=1<<(M=_-T);M+T<C&&!((A-=P[M+T])<=0);)M++,A<<=1;if(R+=1<<M,1===t&&R>852||2===t&&R>592)return 1;u[g=N&v]=O<<24|M<<16|m-h|0}}return 0!==N&&(u[m+N]=_-T<<24|64<<16|0),f.bits=O,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e){function n(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}for(var n=["\n"],a=0;a<100;a++)n.push(n[a]+e);return n}function a(){this.step="    ",this.shift=n(this.step)}function r(t,e){return e-(t.replace(/\(/g,"").length-t.replace(/\)/g,"").length)}function i(t,e){return t.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+e+e+"AND ").replace(/ BETWEEN /gi,"~::~"+e+"BETWEEN ").replace(/ CASE /gi,"~::~"+e+"CASE ").replace(/ ELSE /gi,"~::~"+e+"ELSE ").replace(/ END /gi,"~::~"+e+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+e+"ON ").replace(/ OR /gi,"~::~"+e+e+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+e+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+e).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+e+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}a.prototype.xml=function(t,e){var a=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=a.length,i=!1,s=0,o="",l=0,u=e?n(e):this.shift;for(l=0;l<r;l++)a[l].search(/<!/)>-1?(o+=u[s]+a[l],i=!0,(a[l].search(/-->/)>-1||a[l].search(/\]>/)>-1||a[l].search(/!DOCTYPE/)>-1)&&(i=!1)):a[l].search(/-->/)>-1||a[l].search(/\]>/)>-1?(o+=a[l],i=!1):/^<\w/.exec(a[l-1])&&/^<\/\w/.exec(a[l])&&/^<[\w:\-\.\,]+/.exec(a[l-1])==/^<\/[\w:\-\.\,]+/.exec(a[l])[0].replace("/","")?(o+=a[l],i||s--):a[l].search(/<\w/)>-1&&-1==a[l].search(/<\//)&&-1==a[l].search(/\/>/)?o=o+=i?a[l]:u[s++]+a[l]:a[l].search(/<\w/)>-1&&a[l].search(/<\//)>-1?o=o+=i?a[l]:u[s]+a[l]:a[l].search(/<\//)>-1?o=o+=i?a[l]:u[--s]+a[l]:a[l].search(/\/>/)>-1?o=o+=i?a[l]:u[s]+a[l]:a[l].search(/<\?/)>-1||a[l].search(/xmlns\:/)>-1||a[l].search(/xmlns\=/)>-1?o+=u[s]+a[l]:o+=a[l];return"\n"==o[0]?o.slice(1):o},a.prototype.json=function(t,e){e=e||this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},a.prototype.css=function(t,e){var a=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=a.length,i=0,s="",o=0,l=e?n(e):this.shift;for(o=0;o<r;o++)/\{/.exec(a[o])?s+=l[i++]+a[o]:/\}/.exec(a[o])?s+=l[--i]+a[o]:(/\*\\/.exec(a[o]),s+=l[i]+a[o]);return s.replace(/^\n{1,}/,"")},a.prototype.sql=function(t,e){var a=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),s=a.length,o=[],l=0,u=this.step,h=0,c="",f=0,d=e?n(e):this.shift;for(f=0;f<s;f++)o=f%2?o.concat(a[f]):o.concat(i(a[f],u));for(s=o.length,f=0;f<s;f++){h=r(o[f],h),/\s{0,}\s{0,}SELECT\s{0,}/.exec(o[f])&&(o[f]=o[f].replace(/\,/g,",\n"+u+u)),/\s{0,}\s{0,}SET\s{0,}/.exec(o[f])&&(o[f]=o[f].replace(/\,/g,",\n"+u+u)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(o[f])?c+=d[++l]+o[f]:/\'/.exec(o[f])?(h<1&&l&&l--,c+=o[f]):(c+=d[l]+o[f],h<1&&l&&l--)}return c=c.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},a.prototype.xmlmin=function(t,e){return(e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},a.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},a.prototype.cssmin=function(t,e){return(e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},a.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},t.exports=new a},function(t,e,n){var a=n(30);t.exports=function(t,e,n){var r={},i="SAFE_EVAL_"+Math.floor(1e6*Math.random());r[i]={};return t="\n    (function(){\n      Function = undefined;\n      const keys = Object.getOwnPropertyNames(this).concat(['constructor']);\n      keys.forEach((key) => {\n        const item = this[key];\n        if(!item || typeof item.constructor !== 'function') return;\n        this[key].constructor = undefined;\n      });\n    })();\n  "+i+"="+t,e&&Object.keys(e).forEach((function(t){r[t]=e[t]})),a.runInNewContext(t,r,n),r[i]}},function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,a=n.eval,r=n.execScript;!a&&r&&(r.call(n,"null"),a=n.eval),forEach(Object_keys(t),(function(e){n[e]=t[e]})),forEach(globals,(function(e){t[e]&&(n[e]=t[e])}));var i=Object_keys(n),s=a.call(n,this.code);return forEach(Object_keys(n),(function(e){(e in t||-1===indexOf(i,e))&&(t[e]=n[e])})),forEach(globals,(function(e){e in t||defineProp(t,e,n[e])})),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),n},forEach(Object_keys(Script.prototype),(function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),e}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var a=n(6),r=n(1),i=n(9),s=n.n(i),o=n(15),l=n.n(o),u=n(3),h={formatValue:function(t,e,n){return s.a.valueFormats[e](t,n,null).toString()},getUnitFormats:function(){return s.a.getUnitFormats()},loadCss:function(){Object(a.loadPluginCss)({dark:"plugins/agenty-flowcharting-panel/static/css/flowchart.dark.css",light:"plugins/agenty-flowcharting-panel/static/css/flowchart.light.css"})},getTimeSeries:function(t){return new l.a({datapoints:t.datapoints||[],alias:t.target,unit:t.unit})},getFormatedDate:function(t,e){return Object(u.dateTime)(t).format(e)}},c=n(2),f=n.n(c),d=n(0),p=n(5),g=n.n(p);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=k(t);if(e){var r=k(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w(this,n)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function E(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}var C,O,M=function(){function t(e,n){_(this,t),this.shapeMaps=[],this.textMaps=[],this.linkMaps=[],this.eventMaps=[],this.valueMaps=[],this.rangeMaps=[],this.removeClick=2,this.highestLevel=-1,this.highestColor="",this.highestFormattedValue="",this.highestValue=void 0,this.execTimes=0,this.data=n,this.data.pattern=e,this.id=d.a.utils.uniqueID(),this.states=new Map}return E(t,[{key:"getData",value:function(){return this.data}},{key:"import",value:function(t){var e=this,n=d.a.trace.before(this.constructor.name+".import()");t.unit&&(this.data.unit=t.unit),t.type&&(this.data.type=t.type),t.metricType&&(this.data.metricType=t.metricType),t.alias&&(this.data.alias=t.alias),t.refId&&(this.data.refId=t.refId),t.column&&(this.data.column=t.column),t.aggregation&&(this.data.aggregation=t.aggregation),(t.decimals||0===t.decimals)&&(this.data.decimals=t.decimals),t.colors&&(this.data.colors=t.colors.slice(0)),this.data.reduce&&(this.data.reduce=!0);var a=void 0;t.colorOn&&(a=t.colorOn);var r=void 0;t.style&&(r=t.style);var i=!1,s=void 0,o=void 0;t.link&&(i=t.link),t.linkUrl&&(s=t.linkUrl),t.linkParams&&(o=t.linkParams);var l=void 0;t.linkOn&&(l=t.linkOn);var u=void 0;t.textOn&&(u=t.textOn);var h=void 0,c=void 0;t.textReplace&&(h=t.textReplace),t.textPattern&&(c=t.textPattern),t.pattern&&(this.data.pattern=t.pattern),t.dateFormat&&(this.data.dateFormat=t.dateFormat),t.thresholds&&(this.data.thresholds=t.thresholds.map((function(t){var e=t;return"string"==typeof e&&(e=parseFloat(e)),e}))),t.stringThresholds&&(this.data.stringThresholds=t.stringThresholds.slice(0)),t.stringWarning&&(this.data.stringThresholds[1]=t.stringWarning),t.stringCritical&&(this.data.stringThresholds[0]=t.stringCritical),(t.invert||!1===t.invert)&&(this.data.invert=t.invert),(t.gradient||!1===t.gradient)&&(this.data.gradient=t.gradient),(t.overlayIcon||!1===t.overlayIcon)&&(this.data.overlayIcon=t.overlayIcon),(t.tooltip||!1===t.tooltip)&&(this.data.tooltip=t.tooltip),t.tooltipLabel&&(this.data.tooltipLabel=t.tooltipLabel),(t.tooltipColors||!1===t.tooltipColors)&&(this.data.tooltipColors=t.tooltipColors),t.tooltipOn&&(this.data.tooltipOn=t.tooltipOn),t.tpDirection&&(this.data.tpDirection=t.tpDirection),(t.tpGraph||!1===this.data.tpGraph)&&(this.data.tpGraph=t.tpGraph),t.tpGraphSize&&(this.data.tpGraphSize=t.tpGraphSize),t.tpGraphType&&(this.data.tpGraphType=t.tpGraphType),(t.tpGraphLow||0===t.tpGraphLow)&&(this.data.tpGraphLow=t.tpGraphLow),(t.tpGraphHigh||0===t.tpGraphHigh)&&(this.data.tpGraphHigh=t.tpGraphHigh),t.tpGraphScale&&(this.data.tpGraphScale=t.tpGraphScale);var f=[];return t.shapeProp&&(this.data.shapeProp=t.shapeProp),(t.shapeRegEx||!1===t.shapeRegEx)&&(this.data.shapeRegEx=t.shapeRegEx),this.data.shapeData=[],f=[],null!=(f=void 0!==t.shapeMaps&&null!==t.shapeMaps&&t.shapeMaps.length>0?t.shapeMaps:t.shapeData)&&f.length>0&&f.forEach((function(t){r&&(t.style=r),a&&(t.colorOn=a),e.addShapeMap("").import(t)})),this.data.textProp=t.textProp||"id",(t.textRegEx||!1===t.textRegEx)&&(this.data.textRegEx=t.textRegEx),this.data.textData=[],f=[],void 0!==(f=void 0!==t.shapeMaps&&null!==t.shapeMaps&&t.shapeMaps.length>0?t.textMaps:t.textData)&&null!=f&&f.length>0&&f.forEach((function(t){h&&(t.textReplace=h),c&&(t.textPattern=c),u&&(t.textOn=u),e.addTextMap("").import(t)})),this.data.linkProp=t.linkProp||"id",(t.linkRegEx||!1===t.linkRegEx)&&(this.data.linkRegEx=t.linkRegEx),this.data.linkData=[],void 0!==t.linkData&&null!=t.linkData&&t.linkData.length>0&&t.linkData.forEach((function(t){s&&i&&(t.linkUrl=s),o&&i&&(t.linkParams=o),l&&(t.linkOn=l),e.addLinkMap("").import(t)})),this.data.eventProp=t.eventProp||"id",(t.eventRegEx||!1===t.eventRegEx)&&(this.data.eventRegEx=t.eventRegEx),this.data.eventData=[],void 0!==t.eventData&&null!=t.eventData&&t.eventData.length>0&&t.eventData.forEach((function(t){e.addEventMap("").import(t)})),this.data.mappingType=t.mappingType||1,this.data.valueData=[],void 0!==t.valueData&&null!=t.valueData&&t.valueData.length>0&&t.valueData.forEach((function(t){e.addValueMap("value","text").import(t)})),this.data.rangeData=[],void 0!==t.rangeData&&null!=t.rangeData&&t.rangeData.length>0&&t.rangeData.forEach((function(t){e.addRangeMap("from","to","text").import(t)})),this.data.sanitize=t.sanitize||!1,n.after(),this}},{key:"getId",value:function(){return this.id}},{key:"highlightCells",value:function(){this.states&&this.states.forEach((function(t){t.highlightCell()}))}},{key:"unhighlightCells",value:function(){this.states&&this.states.forEach((function(t){t.unhighlightCell()}))}},{key:"setOrder",value:function(t){this.data.order=t}},{key:"getOrder",value:function(){return this.data.order}},{key:"isHidden",value:function(){return this.data.hidden}},{key:"hide",value:function(){return this.data.hidden=!0,this}},{key:"show",value:function(){return this.data.hidden=!1,this}},{key:"invertColorOrder",value:function(){return this.data.colors.reverse(),this}},{key:"invertThesholds",value:function(){return this.invertColorOrder(),this.data.invert=!this.data.invert,this}},{key:"addColor",value:function(t){var e,n,a=this.data.thresholds,r=this.data.colors,i=r[t];if(t!==r.length-1){var s=r[t+1];if(e=g.a.scale([i,s]).mode("lrgb")(.5).hex(),"number"===this.data.type)n=(a[t]-a[t-1])/2+a[t-1];else n=this.data.stringThresholds[t-1]}else e=i;return this.data.colors.splice(t+1,0,e),"number"===this.data.type?this.data.thresholds.splice(t,0,n):"string"===this.data.type&&this.data.stringThresholds.splice(t,0,n),this}},{key:"removeColor",value:function(t){return this.data.thresholds.splice(t-1,1),this.data.stringThresholds.splice(t-1,1),this.data.colors.splice(t,1),this}},{key:"getColor",value:function(t){return this.data.colors[t]}},{key:"getColors",value:function(){return this.data.colors}},{key:"getColorsCount",value:function(){return this.data.colors.length}},{key:"toIconize",value:function(t){return!1!==this.data.overlayIcon&&(!0===this.data.overlayIcon&&t>=1)}},{key:"toTooltipize",value:function(t){return!1!==this.data.tooltip&&("a"===this.data.tooltipOn||"wc"===this.data.tooltipOn&&t>=1)}},{key:"matchMetric",value:function(t){return"serie"===this.data.metricType&&"serie"===t.type?d.a.utils.matchString(t.getName(),this.data.pattern):"table"===this.data.metricType&&"table"===t.type&&t.getName()===this.data.refId}},{key:"addShapeMap",value:function(t){var e=A.getDefaultData(),n=new A(t,e);return this.shapeMaps.push(n),this.data.shapeData.push(e),n}},{key:"removeShapeMap",value:function(t){return this.data.shapeData.splice(t,1),this.shapeMaps.splice(t,1),this}},{key:"getShapeMap",value:function(t){return this.shapeMaps[t]}},{key:"getShapeMaps",value:function(){return this.shapeMaps}},{key:"matchShape",value:function(t){var e=this,n=!1;return this.shapeMaps.forEach((function(a){a.match(t,e.data.shapeRegEx)&&(n=!0)})),n}},{key:"addTextMap",value:function(t){var e=R.getDefaultData(),n=new R(t,e);return this.textMaps.push(n),this.data.textData.push(e),n}},{key:"removeTextMap",value:function(t){this.data.textData.splice(t,1),this.textMaps.splice(t,1)}},{key:"getTextMap",value:function(t){return this.textMaps[t]}},{key:"getTextMaps",value:function(){return this.textMaps}},{key:"matchText",value:function(t){var e=!1;return this.textMaps.forEach((function(n){n.match(t)&&(e=!0)})),e}},{key:"addEventMap",value:function(t){var e=L.getDefaultData(),n=new L(t,e);return this.eventMaps.push(n),this.data.eventData.push(e),n}},{key:"removeEventMap",value:function(t){this.data.eventData.splice(t,1),this.eventMaps.splice(t,1)}},{key:"getEventMap",value:function(t){return this.eventMaps[t]}},{key:"getEventMaps",value:function(){return this.eventMaps}},{key:"matchEvent",value:function(t){var e=!1;return this.eventMaps.forEach((function(n){n.match(t)&&(e=!0)})),e}},{key:"addLinkMap",value:function(t){d.a.log.info("Rule.addLinkMap()");var e=N.getDefaultData(),n=new N(t,e);return n.import(e),this.linkMaps.push(n),this.data.linkData.push(e),n}},{key:"removeLinkMap",value:function(t){this.data.linkData.splice(t,1),this.linkMaps.splice(t,1)}},{key:"getLinkMap",value:function(t){return this.linkMaps[t]}},{key:"getLinkMaps",value:function(){return this.linkMaps}},{key:"matchLink",value:function(t){var e=!1;return this.linkMaps.forEach((function(n){n.match(t)&&(e=!0)})),e}},{key:"addValueMap",value:function(t,e){var n=P.getDefaultdata(),a=new P(t,e,n);return this.valueMaps.push(a),this.data.valueData.push(n),a}},{key:"removeValueMap",value:function(t){this.data.valueData.splice(t,1),this.valueMaps.splice(t,1)}},{key:"getValueMap",value:function(t){return this.valueMaps[t]}},{key:"getValueMaps",value:function(){return this.valueMaps}},{key:"addRangeMap",value:function(t,e,n){var a=D.getDefaultData(),r=new D(t,e,n,a);return this.rangeMaps.push(r),this.data.rangeData.push(a),r}},{key:"removeRangeMap",value:function(t){this.data.rangeData.splice(t,1),this.rangeMaps.splice(t,1)}},{key:"getRangeMap",value:function(t){return this.rangeMaps[t]}},{key:"getRangeMaps",value:function(){return this.rangeMaps}},{key:"hideRangeMap",value:function(t){return this.rangeMaps[t].hide(),this}},{key:"showRangeMap",value:function(t){return this.rangeMaps[t].show(),this}},{key:"getExectedTime",value:function(){return"number"==typeof this.execTimes?"".concat(this.execTimes.toFixed(2)," ms"):"".concat(this.execTimes," ms")}},{key:"getColorForValue",value:function(t){if(!this.data.gradient||"number"!==this.data.type){var e=this.getThresholdLevel(t);return this.getColorForLevel(e)}if("number"===this.data.type){var n=this.data.thresholds,a=this.data.colors,r=n.length;if(void 0===n||0===r)return a[0];for(var i=0,s=0;s<r;s++){if(t<n[s])break;i=s}if(0===i&&t<=n[0])return a[0];if(i===r-1)return a[i+1];var o=n[i+1]-n[i],l=(t-n[i])/o;return g.a.scale([a[i+1],a[i+2]]).mode("lrgb")(l).hex()}return""}},{key:"getColorForLevel",value:function(t){var e=this.data.colors;if(t<0)return e[0];var n=t;return this.data.invert||(n=this.data.colors.length-1-t),void 0!==e[n]?e[n]:e[0]}},{key:"getThresholdLevel",value:function(t){if("number"===this.data.type){var e=0,n=this.data.thresholds;if(void 0===n||0===n.length)return 0;for(var a=n.length,r=0;r<a;r++){if(t<n[r])break;e=r+1}return this.data.invert||(e=this.data.colors.length-1-e),e}if("string"===this.data.type){var i=0,s=this.getFormattedValue(t),o=this.data.stringThresholds;if(void 0===o||0===o.length)return 0;for(var l=o.length,u=0;u<l;u++){var h=o[u];if(d.a.utils.matchString(t,h)||d.a.utils.matchString(s,h)){i=u+1;break}}return this.data.invert||(i=this.data.colors.length-1-i),i}return 0}},{key:"getValueForMetric",value:function(t){if(this.matchMetric(t))try{return t.getValue(this.data.aggregation,this.data.column)}catch(t){return d.a.log.error("datapoint for metric is null",t),null}return"-"}},{key:"getFormattedValueForMetric",value:function(t){var e=this.getValueForMetric(t);return this.getFormattedValue(e)}},{key:"getFormattedValue",value:function(t){if("number"===this.data.type){if(!f.a.isFinite(t))return"Invalid Number";if(null==t)return"-";var e=this.decimalPlaces(t);return e="number"==typeof this.data.decimals?Math.min(this.data.decimals,e):e,h.formatValue(t,this.data.unit,this.data.decimals)}if("string"===this.data.type){null==t&&(t="null"),f.a.isArray(t)&&(t=t.join(", "));var n=this.data.mappingType||0;if(1===n&&this.valueMaps){for(var a=0;a<this.valueMaps.length;a+=1){var r=this.valueMaps[a];if(r.match(t))return r.getFormattedText(t)}return t.toString()}if(2===n&&this.rangeMaps){for(var i=0;i<this.rangeMaps.length;i+=1){var s=this.rangeMaps[i];if(s.match(t))return s.getFormattedText(t)}return t.toString()}if(null==t)return"null"}return"date"===this.data.type?null==t?"-":(f.a.isArray(t)&&(t=t[0]),h.getFormatedDate(t,this.data.dateFormat)):t}},{key:"defaultValueFormatter",value:function(t){return null==t||void 0===t?"":(f.a.isArray(t)&&(t=t.join(", ")),this.data.sanitize?this.$sanitize(t):f.a.escape(t))}},{key:"$sanitize",value:function(t){throw new Error("Method not implemented.")}},{key:"decimalPlaces",value:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}}],[{key:"getDefaultData",value:function(){return{order:1,pattern:".*",unit:"short",type:"number",metricType:"serie",alias:"myRule",refId:"A",column:"Time",hidden:!1,aggregation:"current",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],reduce:!0,dateFormat:"YYYY-MM-DD HH:mm:ss",thresholds:[50,80],stringThresholds:["/.*/","/.*/"],invert:!1,gradient:!1,overlayIcon:!1,tooltip:!1,tooltipLabel:"",tooltipColors:!1,tooltipOn:"a",tpDirection:"v",tpGraph:!1,tpGraphSize:"100%",tpGraphType:"line",tpGraphLow:null,tpGraphHigh:null,tpGraphScale:"linear",shapeProp:"id",shapeRegEx:!0,shapeData:[],textProp:"id",textRegEx:!0,textData:[],linkProp:"id",linkRegEx:!0,linkData:[],eventProp:"id",eventRegEx:!1,eventData:[],mappingType:1,valueData:[],rangeData:[],sanitize:!1}}}]),t}(),T=((C=function(){function t(e,n){_(this,t),this.data=n,this.data.pattern=e,this.id=d.a.utils.uniqueID()}return E(t,[{key:"import",value:function(t){return t.pattern&&(this.data.pattern=t.pattern),t.hidden&&(this.data.hidden=t.hidden),this}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!=t&&0!==t.length&&d.a.utils.matchString(t,this.data.pattern,e)}},{key:"getId",value:function(){return this.id}},{key:"show",value:function(){return this.data.hidden=!1,this}},{key:"hide",value:function(){return this.data.hidden=!0,this}},{key:"isHidden",value:function(){return void 0!==this.data.hidden&&this.data.hidden}},{key:"toVisible",value:function(){return!this.data.hidden}},{key:"export",value:function(){return{pattern:this.data.pattern,hidden:this.data.hidden}}}],[{key:"getDefaultMethods",value:function(){return this.methods}},{key:"getDefaultPlaceHolder",value:function(t){var e=this.methods.find((function(e){return e.value===t}));if(void 0!==e)return e.placeholder}},{key:"getDefaultValue",value:function(t){var e=this.methods.find((function(e){return e.value===t}));if(void 0!==e)return e.default}}]),t}()).methods=[],C),A=function(t){y(n,t);var e=x(n);function n(t,a){var r;return _(this,n),(r=e.call(this,t,a)).data=a,r}return E(n,[{key:"toColorize",value:function(t){return-1!==t&&("n"!==this.data.colorOn&&("a"===this.data.colorOn||"wc"===this.data.colorOn&&t>=1))}},{key:"import",value:function(t){return m(k(n.prototype),"import",this).call(this,t),t.style&&(this.data.style=t.style),t.colorOn&&(this.data.colorOn=t.colorOn),this}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,style:"fillColor",colorOn:"a"}}}]),n}(T),R=function(t){y(n,t);var e=x(n);function n(t,a){var r;return _(this,n),(r=e.call(this,t,a)).data=a,r}return E(n,[{key:"toLabelize",value:function(t){return"wmd"===this.data.textOn||"n"!==this.data.textOn&&("wc"===this.data.textOn&&t>=1||"co"===this.data.textOn&&t>=2)}},{key:"import",value:function(t){return m(k(n.prototype),"import",this).call(this,t),t.textReplace&&(this.data.textReplace=t.textReplace),t.textPattern&&(this.data.textPattern=t.textPattern),t.textOn&&(this.data.textOn=t.textOn),this}},{key:"getReplaceText",value:function(t,e){if("content"===this.data.textReplace)return e;if("pattern"===this.data.textReplace){var n=d.a.utils.stringToJsRegex(this.data.textPattern);return t.toString().match(n)?t.toString().replace(n,e):t}return"as"===this.data.textReplace?"".concat(t," ").concat(e):"anl"===this.data.textReplace?"".concat(t,"\n").concat(e):t}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,textReplace:"content",textPattern:"/.*/",textOn:"wmd"}}}]),n}(T),N=function(t){y(n,t);var e=x(n);function n(t,a){var r;return _(this,n),(r=e.call(this,t,a)).data=a,r}return E(n,[{key:"getLink",value:function(){return this.data.linkParams?this.data.linkUrl+window.location.search:this.data.linkUrl}},{key:"import",value:function(t){return m(k(n.prototype),"import",this).call(this,t),t.linkUrl&&(this.data.linkUrl=t.linkUrl),t.linkParams&&(this.data.linkParams=t.linkParams),t.linkOn&&(this.data.linkOn=t.linkOn),this}},{key:"toLinkable",value:function(t){return"a"===this.data.linkOn||"wc"===this.data.linkOn&&t>=1}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,linkUrl:"",linkParams:!1,linkOn:"a"}}}]),n}(T),L=((O=function(t){y(n,t);var e=x(n);function n(t,a){var r;return _(this,n),(r=e.call(this,t,a)).data=a,r}return E(n,[{key:"getPlaceHolder",value:function(){var t=n.getDefaultPlaceHolder(this.data.style);return void 0!==t?t:""}},{key:"getTypeahead",value:function(){var t=this,e=d.a.getFullAvailableVarNames(),a=n.methods.find((function(e){return e.value===t.data.style}));if(void 0!==a&&void 0!==a.typeahead)return e=e.concat(a.typeahead.split("|"));if("shape"===this.data.style){var r=n.getFormNames();Array.prototype.push.apply(e,r)}return e}},{key:"getValueByDefault",value:function(){var t=n.getDefaultValue(this.data.style);return void 0!==t?t:""}},{key:"toEventable",value:function(t){return-1===this.data.eventOn||t===this.data.eventOn}},{key:"import",value:function(t){return m(k(n.prototype),"import",this).call(this,t),t.style&&(this.data.style=t.style),t.eventOn&&(this.data.eventOn=t.eventOn),t.value&&(this.data.value=t.value),this}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,style:"shape",eventOn:0,value:""}}},{key:"getFormNames",value:function(){if(n.shapes.length>0)return n.shapes;var t=d.a.utils.loadFile(d.a.getVar(d.a.CONSTANTS.VAR_STG_CTXROOT)+d.a.CONSTANTS.CONF_FILE_SHAPESTXT);return void 0!==t&&0===n.shapes.length?(n.shapes=n.shapes.concat(t.split(/\n/)),n.shapes):n.shapes}}]),n}(T)).methods=d.a.CONSTANTS.EVENTMETHODS,O.shapes=[],O),D=function(){function t(e,n,a,r){_(this,t),this.data=r,this.data.from=e,this.data.to=n,this.data.text=a,this.data.hidden=!1}return E(t,[{key:"import",value:function(t){return this.data.from=t.from?t.from:void 0,this.data.to=t.to?t.to:void 0,this.data.text=t.text?t.text:void 0,this.data.hidden=!(!t.hidden&&!1!==t.hidden)&&t.hidden,this}},{key:"match",value:function(t){if(void 0!==t&&"string"==typeof t&&t.length>0||void 0!==t&&"number"==typeof t){var e=Number(t);return void 0!==this.data.from&&"string"==typeof t&&this.data.from.length>0||void 0!==this.data.from&&"number"==typeof t?e>=Number(this.data.from)&&(!(void 0!==this.data.to&&"string"==typeof this.data.to&&this.data.to.length>0||void 0!==this.data.from&&"number"==typeof this.data.to)||e<Number(this.data.to)):!(void 0!==this.data.to&&"string"==typeof this.data.to&&this.data.to.length>0||void 0!==this.data.to&&"number"==typeof this.data.to)||e<Number(this.data.to)}return!1}},{key:"getFormattedText",value:function(t){return this.match(t)?this.data.text:t}},{key:"show",value:function(){this.data.hidden=!1}},{key:"hide",value:function(){this.data.hidden=!0}},{key:"isHidden",value:function(){return this.data.hidden}},{key:"toVisible",value:function(){return!this.data.hidden}},{key:"export",value:function(){return{from:this.data.from,to:this.data.to,text:this.data.text,hidden:this.data.hidden}}}],[{key:"getDefaultData",value:function(){return{from:void 0,to:void 0,text:void 0,hidden:!1}}}]),t}(),P=function(){function t(e,n,a){_(this,t),this.data=a,this.data.value=e,this.data.text=n,this.data.hidden=!1,this.import(a)}return E(t,[{key:"import",value:function(t){return this.data.value=t.value||this.data.value||void 0,this.data.text=t.text||this.data.text||void 0,this.data.hidden=t.hidden||this.data.hidden||!1,this}},{key:"match",value:function(t){return null==t?"null"===this.data.value:!f.a.isString(t)&&Number(this.data.value)===Number(t)||d.a.utils.matchString(t.toString(),this.data.value)}},{key:"getFormattedText",value:function(t){return null!=t||"null"!==this.data.value&&"undefined"!==this.data.value?this.match(t)?this.data.text?this.data.text:"":"".concat(t):this.data.text?this.data.text:""}},{key:"show",value:function(){this.data.hidden=!1}},{key:"hide",value:function(){this.data.hidden=!0}},{key:"isHidden",value:function(){return this.data.hidden}},{key:"export",value:function(){return{value:this.data.value,text:this.data.text,hidden:this.data.hidden}}}],[{key:"getDefaultdata",value:function(){return{value:void 0,text:void 0,hidden:!1}}}]),t}();function I(t){return function(t){if(Array.isArray(t))return F(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function z(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}V.$inject=["$q","uiSegmentSrv"];var G=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=d.a.CONSTANTS.COLORMETHODS,this.metricType=d.a.CONSTANTS.METRIC_TYPES,this.colorOn=d.a.CONSTANTS.COLOR_APPLYON,this.linkOn=d.a.CONSTANTS.LINK_APPLYON,this.tooltipOn=d.a.CONSTANTS.TOOLTIP_APPLYON,this.textOn=d.a.CONSTANTS.TEXT_APPLYON,this.textReplace=d.a.CONSTANTS.TEXTMETHODS,this.EventType=L.getDefaultMethods(),this.tpDirection=d.a.CONSTANTS.TOOLTIP_DIRECTION_TYPES,this.propTypes=d.a.CONSTANTS.IDENT_TYPES,this.textPattern="/.*/",this.metricTypes=d.a.CONSTANTS.VALUE_TYPES,this.dateFormats=d.a.CONSTANTS.VALUE_DATEFORMAT_TYPES,this.aggregationTypes=d.a.CONSTANTS.AGGREGATION_TYPES,this.mappingTypes=d.a.CONSTANTS.VALUEMAPPINGTYPES,this.tpGraphType=d.a.CONSTANTS.TOOLTIP_GRAPH_TYPES,this.tpGraphScale=d.a.CONSTANTS.TOOLTIP_GRAPH_SCALE_TYPES,this.tpGraphSize=d.a.CONSTANTS.TOOLTIP_GRAPH_SIZE_TYPES,e.editor=this,e.$GF=d.a.me(),this.$scope=e,this.ctrl=e.ctrl,this.panel=this.ctrl.panel,this.rulesHandler=this.ctrl.rulesHandler,this.flowchartHandler=this.ctrl.flowchartHandler,this.rulesHandler=this.ctrl.rulesHandler,this.metricHandler=this.ctrl.metricHandler,this.unitFormats=h.getUnitFormats(),this.tpGraphSize=d.a.CONSTANTS.TOOLTIP_GRAPH_SIZE_TYPES,this.getMetricNames=function(){return n.metricHandler.getNames("serie")},this.getCellNames=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id",e=n.flowchartHandler.getFlowchart(),a=e.getNamesByProp(t),r=new Set(a),i=I(r);return i=i.filter((function(t){return void 0!==t&&t.length>0}))},this.getCellNamesById=function(){return n.getCellNames("id")},this.getCellNamesByValue=function(){return n.getCellNames("value")},this.getVariables=function(){return d.a.getFullAvailableVarNames()},this.getEventValues=[]}var e,n,a;return t.$inject=["$scope"],e=t,(n=[{key:"isFirstRule",value:function(t){return 0===t}},{key:"isOnlySeries",value:function(){return this.metricHandler.isTypeOf("serie")&&!this.metricHandler.isTypeOf("table")}},{key:"isOnlyTables",value:function(){return!this.metricHandler.isTypeOf("serie")&&this.metricHandler.isTypeOf("table")}},{key:"isMultipleType",value:function(){return this.metricHandler.isTypeOf("serie")&&this.metricHandler.isTypeOf("table")}},{key:"initType",value:function(t){this.isOnlyTables()?t.data.metricType="table":this.isOnlySeries()&&(t.data.metricType="serie")}},{key:"getTablesName",value:function(){return this.metricHandler.getNames("table")}},{key:"getColumnsForTable",value:function(t){return this.metricHandler.getColumnsName(t,"table")}},{key:"isLastRule",value:function(t){return t===this.rulesHandler.countRules()-1}},{key:"render",value:function(){this.ctrl.render()}},{key:"setUnitFormat",value:function(t,e){t.data.unit=e.value,this.onRulesChange()}},{key:"onRulesChange",value:function(){return d.a.log.info("MappingOptionsCtrl.onRulesChange()"),this.flowchartHandler.ruleChanged(),this.render(),!0}},{key:"getLevels",value:function(t){for(var e=[],n=t.data.colors.length,a=0;a<n;a++)e.push({text:"".concat(a),value:a});return e}},{key:"removeShapeMap",value:function(t,e){var n=t.getShapeMap(e);this.unselectCell(t.data.shapeProp,n.data.pattern),t.removeShapeMap(e)}},{key:"removeTextMap",value:function(t,e){var n=t.getTextMap(e);this.unselectCell(t.data.textProp,n.data.pattern),t.removeTextMap(e)}},{key:"removeLinkMap",value:function(t,e){var n=t.getLinkMap(e);this.unselectCell(t.data.linkProp,n.data.pattern),t.removeLinkMap(e)}},{key:"removeEventMap",value:function(t,e){var n=t.getEventMap(e);this.unselectCell(t.data.eventProp,n.data.pattern),t.removeEventMap(e)}},{key:"onColorChange",value:function(t,e){var n=this;return function(a){n.rulesHandler.getRule(t).data.colors[e]=a,n.onRulesChange()}}},{key:"selectCell",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=this.flowchartHandler.getFlowchart(),(r=a.getXGraph())&&r.selectMxCells(t,e);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"unselectCell",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=this.flowchartHandler.getFlowchart(),(r=a.getXGraph())&&r.unselectMxCells(t,e);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"toggleShow",value:function(t,e){t.data.hidden=e,this.onRulesChange()}},{key:"highlightCells",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlightCells();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightCells",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unhighlightCells();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightAllCells",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.flowchartHandler.getFlowchart(),(n=e.getXGraph())&&n.unhighlightCells();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"removeRule",value:function(t,e){(1===t.removeClick||e)&&(this.rulesHandler.removeRule(t),this.onRulesChange()),t.removeClick=1,window.setInterval((function(){t&&(t.removeClick=2)}),2e3)}},{key:"cloneRule",value:function(t){this.rulesHandler.cloneRule(t),this.onRulesChange()}},{key:"moveRule",value:function(t,e){e?this.rulesHandler.moveRuleToUp(t):this.rulesHandler.moveRuleToDown(t),this.onRulesChange()}},{key:"onEventValue",value:function(t){this.getEventValues=t.getTypeahead()}}])&&z(e.prototype,n),a&&z(e,a),t}();function V(t,e){return{restrict:"E",scope:!0,templateUrl:"".concat(d.a.plugin.getPartialPath(),"/mapping/index.html"),controller:G}}var H=n(16);function j(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var B,U=((B=function(){function t(e,n,a){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xmlGraph="",this.csvGraph="",this.type="xml",this.graph=void 0,this.scale=!0,this.tooltip=!0,this.lock=!0,this.center=!0,this.animation=!0,this.zoom=!1,this.zoomFactor=1.2,this.cumulativeZoomFactor=1,this.grid=!1,this.bgColor=null,this.zoomPercent="1",this.cells={id:[],value:[]},this.container=e,this.type=n,this.onMapping={active:!1,$scope:null,value:null,prop:"id",object:null},t.initMxGgraph(),"xml"===n&&(d.a.utils.isencoded(a)?this.xmlGraph=d.a.utils.decode(a,!0,!0,!0):this.xmlGraph=a),"csv"===n&&(this.csvGraph=a),this.initGraph(),d.a.DEBUG&&(console.log("DEBUG ON"),this.graph.addListener(mxEvent.CLICK,(function(t,e){console.log("DEBUG CLICK"),r.eventDebug(e)})))}var e,n,a;return e=t,a=[{key:"isValidXml",value:function(t){try{var e=document.createElement("div"),n=new Graph(e);d.a.utils.isencoded(t)&&(t=d.a.utils.decode(t,!0,!0,!0));var a=mxUtils.parseXml(t),r=new mxCodec(a);return n.getModel().beginUpdate(),r.decode(a.documentElement,n.getModel()),n.getModel().endUpdate(),n.destroy(),!0}catch(t){return d.a.log.error("isValidXml",t),!1}}},{key:"initMxGgraph",value:function(){var e=d.a.trace.before(this.constructor.name+".initMxGgraph()"),n=window;if(!t.initialized){if(void 0===n.mxGraph||void 0===n.mxGraph){t.preInitGlobalVars();var a=d.a.utils.$loadFile("".concat(d.a.plugin.getDrawioPath(),"js/viewer.min.js"));d.a.utils.evalRaw(a),t.postInitGlobalVars(),a=d.a.utils.$loadFile("".concat(d.a.plugin.getLibsPath(),"/Graph_custom.js")),d.a.utils.evalRaw(a)}t.initialized=!0}e.after()}},{key:"preInitGlobalVars",value:function(){var t=window;t.BASE_PATH=d.a.plugin.getMxBasePath(),t.RESOURCES_PATH=d.a.plugin.getMxResourcePath(),t.RESOURCE_BASE=d.a.plugin.getMxResourcePath(),t.STENCIL_PATH=d.a.plugin.getStencilsPath(),t.SHAPES_PATH=d.a.plugin.getShapesPath(),t.IMAGE_PATH=d.a.plugin.getMxImagePath(),t.STYLE_PATH=d.a.plugin.getMxStylePath(),t.CSS_PATH=d.a.plugin.getMxCssPath(),t.mxLanguages=["en"],t.DRAWIO_BASE_URL=d.a.plugin.getDrawioPath(),t.DRAW_MATH_URL=d.a.plugin.getDrawioPath(),t.DRAWIO_VIEWER_URL=d.a.plugin.getDrawioPath()+"viewer.min.js",t.DRAW_MATH_URL=d.a.plugin.getDrawioPath()+"math/",t.DRAWIO_CONFIG=null;var e=new Object;t.urlParams=e,e.sync="none",e.lightbox="1",e.nav="1",e.local="1",e.embed="1",t.mxImageBasePath=d.a.plugin.getMxImagePath(),t.mxBasePath=d.a.plugin.getMxBasePath(),t.mxLoadStylesheets=!0,t.mxLanguage="en",t.mxLoadResources=!0}},{key:"postInitGlobalVars",value:function(){var t=window;t.mxClient.mxBasePath=d.a.plugin.getMxBasePath(),t.mxClient.mxImageBasePath=d.a.plugin.getMxImagePath(),t.mxClient.mxLoadResources=!0,t.mxClient.mxLanguage="en",t.mxClient.mxLoadStylesheets=!0,t.VSD_CONVERT_URL=null,t.EMF_CONVERT_URL=null,t.ICONSEARCH_PATH=null}},{key:"loadXml",value:function(t){try{var e=mxUtils.load(t);if(e.getStatus()>=200&&e.getStatus()<=299)return e.getText();d.a.log.error("Cannot load "+t,e.getStatus())}catch(e){d.a.log.error("Cannot load "+t,e)}return null}},{key:"compress",value:function(t){return Graph.compress(t,!0)}},{key:"decompress",value:function(t){return Graph.decompress(t,!0)}}],(n=[{key:"initGraph",value:function(){var t=d.a.trace.before(this.constructor.name+".initGraph()");return this.graph=new Graph(this.container),this.graph.setPanning(!0),this.clickBackup=this.graph.click,this.dbclickBackup=this.graph.dblClick,mxEvent.addMouseWheelListener(mxUtils.bind(this,this.eventMouseWheel),this.container),(mxClient.IS_IE||mxClient.IS_EDGE)&&mxEvent.addListener(this.container,"wheel",mxUtils.bind(this,this.eventMouseWheel)),mxEvent.addListener(document,"keydown",mxUtils.bind(this,this.eventKey)),this.container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.graph.dblClick=this.eventDbClick.bind(this),t.after(),this}},{key:"drawGraph",value:function(){var t=d.a.trace.before(this.constructor.name+".drawGraph()");this.graph.getModel().beginUpdate(),this.graph.getModel().clear();try{if("xml"===this.type){var e=mxUtils.parseXml(this.xmlGraph);new mxCodec(e).decode(e.documentElement,this.graph.getModel())}"csv"===this.type&&(H.importCsv(this.graph,this.csvGraph),this.refresh())}catch(t){d.a.log.error("Error in draw",t)}finally{this.cells.id=this.getCurrentCells("id"),this.cells.value=this.getCurrentCells("value"),this.graph.getModel().endUpdate()}return t.after(),this}},{key:"applyGraph",value:function(){var t=d.a.trace.before(this.constructor.name+".applyGraph()");return this.scale?this.unzoomGraph():this.zoomGraph(this.zoomPercent),this.tooltipGraph(this.tooltip),this.lockGraph(this.lock),this.scale&&this.center?this.fitGraph():(this.scaleGraph(this.scale),this.centerGraph(this.center)),this.gridGraph(this.grid),this.bgGraph(this.bgColor),this.graph.foldingEnabled=!0,this.graph.cellRenderer.forceControlClickHandler=!0,this.refresh(),t.after(),this}},{key:"refresh",value:function(){var t=d.a.trace.before(this.constructor.name+".refresh()");return this.graph.refresh(),t.after(),this}},{key:"destroyGraph",value:function(){return this.graph.destroy(),this.graph=void 0,this}},{key:"lockGraph",value:function(t){return t?this.graph.setEnabled(!1):this.graph.setEnabled(!0),this.lock=t,this}},{key:"tooltipGraph",value:function(t){return t?this.graph.setTooltips(!0):this.graph.setTooltips(!1),this.tooltip=t,this}},{key:"allowDrawio",value:function(t){return t?(mxUrlConverter.prototype.baseUrl="http://draw.io/",mxUrlConverter.prototype.baseDomain=""):(mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null),this}},{key:"enableAnim",value:function(t){return this.animation=t,this}},{key:"centerGraph",value:function(t){var e=d.a.trace.before(this.constructor.name+".centerGraph()");return this.graph.centerZoom=!1,t?this.graph.center(!0,!0):this.graph.center(!1,!1),this.center=t,e.after(),this}},{key:"scaleGraph",value:function(t){var e=d.a.trace.before(this.constructor.name+".scaleGraph()");return t&&(this.unzoomGraph(),this.graph.fit(),this.graph.view.rendering=!0),this.scale=t,e.after(),this}},{key:"fitGraph",value:function(){var t=d.a.trace.before(this.constructor.name+".fitGraph()"),e=this.graph.getGraphBounds(),n=this.graph.container.clientWidth-2,a=this.graph.container.clientHeight-2,r=e.width/this.graph.view.scale,i=e.height/this.graph.view.scale,s=Math.min(3,Math.min(n/r,a/i));return this.graph.view.scaleAndTranslate(s,(2+n-r*s)/(2*s)-e.x/this.graph.view.scale,(2+a-i*s)/(2*s)-e.y/this.graph.view.scale),t.after(),this}},{key:"gridGraph",value:function(t){return this.container.style.backgroundImage=t?"url('data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=')":"",this.grid=t,this}},{key:"zoomGraph",value:function(t){var e=d.a.trace.before(this.constructor.name+".zoomGraph()");if(!this.scale&&t&&t.length>0&&"100%"!==t&&"0%"!==t){var n=Number(t.replace("%",""))/100;this.graph.zoomTo(n,!0),this.zoomPercent=t}else this.unzoomGraph();return this.zoom=!0,e.after(),this}},{key:"unzoomGraph",value:function(){return this.zoom=!1,this.graph.zoomActual(),this}},{key:"bgGraph",value:function(t){var e=$(this.container);return t?(this.bgColor=t,e.css("background-color",t)):e.css("background-color",""),this}},{key:"getMxGraph",value:function(){return this.graph}},{key:"getxmlGraph",value:function(){return this.xmlGraph}},{key:"setXmlGraph",value:function(t){var e=d.a.trace.before(this.constructor.name+".setXmlGraph()");return d.a.utils.isencoded(t)?this.xmlGraph=d.a.utils.decode(t,!0,!0,!0):this.xmlGraph=t,this.drawGraph(),e.after(),this}},{key:"getCurrentCells",value:function(t){var e=this,n=d.a.trace.before(this.constructor.name+".getCurrentCells()"),a=[],r=this.graph.getModel().cells;return"id"===t?f.a.each(r,(function(t){d.a.log.debug("this.getStyleCell(mxcell, 'shape') ["+t.id+"] : ",e.getStyleCell(t,"shape")),a.push(e.getId(t))})):"value"===t&&f.a.each(r,(function(t){a.push(e.getLabelCell(t))})),n.after(),a}},{key:"findMxCells",value:function(t,e){var n=this,a=d.a.trace.before(this.constructor.name+".findMxCells()"),r=this.getMxCells(),i=[];return"id"===t?f.a.each(r,(function(t){d.a.utils.matchString(t.id,e)&&i.push(t)})):"value"===t&&f.a.each(r,(function(t){d.a.utils.matchString(n.getLabelCell(t),e)&&i.push(t)})),a.after(),i}},{key:"selectMxCells",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a=this.findMxCells(t,e))&&this.highlightCells(a);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"unselectMxCells",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(a=this.findMxCells(t,e))&&this.unhighlightCells(a);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"createOverlay",value:function(t,e){var n=new mxCellOverlay(t,e);return n.addListener(mxEvent.CLICK,(function(t,n){mxUtils.alert("".concat(e,"\nLast update: ").concat(new Date))})),n}},{key:"addOverlay",value:function(t,e){return this.graph.addCellOverlay(e,this.createOverlay(this.graph.warningImage,"State: ".concat(t))),this}},{key:"removeOverlay",value:function(t){return this.graph.removeCellOverlays(t),this}},{key:"addLink",value:function(t,e){return this.graph.setLinkForCell(t,e),this}},{key:"getLink",value:function(t){return this.graph.getLinkForCell(t)}},{key:"removeLink",value:function(t){return this.graph.setLinkForCell(t,null),this}},{key:"getOrignalCells",value:function(t){return"id"===t||"value"===t?this.cells[t]:[]}},{key:"renameId",value:function(t,e){var n=this.findMxCells("id",t);return void 0!==n&&n.length>0?n.forEach((function(t){t.id=e})):d.a.log.warn("Cell ".concat(t," not found")),this}},{key:"getXmlModel",value:function(){var t=(new mxCodec).encode(this.graph.getModel());return mxUtils.getXml(t)}},{key:"getMxCells",value:function(){return this.graph.getModel().cells}},{key:"getValuePropOfMxCell",value:function(t,e){return"id"===t?this.getId(e):"value"===t?this.getLabelCell(e):null}},{key:"getStyleCell",value:function(t,e){var n=this.graph.view.getState(t);return n?n.style[e]:null}},{key:"setColorAnimCell",value:function(t,e,n){var a=d.a.trace.before(this.constructor.name+".setColorAnimCell()");if(this.animation&&n)try{var r=this.getStyleCell(t,e);if(r){var i=n,s=g.a.scale([r,i]).mode("lrgb").colors(d.a.CONSTANTS.CONF_COLORS_STEPS+1),o=this,l=s.length;!function n(a,r){a<l&&(o.setStyleCell(t,e,r[a]),window.setTimeout((function(){n(a+1,r)}),d.a.CONSTANTS.CONF_COLORS_MS))}(1,s)}else{var u=g()(n).hex();this.setStyleCell(t,e,u)}}catch(a){d.a.log.error("Error on graduate color",a),this.setStyleCell(t,e,n)}else null!==n&&(n=g()(n).hex()),this.setStyleCell(t,e,n);return a.after(),this}},{key:"setStyleCell",value:function(t,e,n){return this.graph.setCellStyles(e,n,[t]),this}},{key:"setStyleAnimCell",value:function(t,e,n,a){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,s,o,l,u,h,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=d.a.trace.before(this.constructor.name+".setStyleAnimCell()"),this.animation&&null!==n)try{s=Number(n),o=Number(void 0!==a?a:this.getStyleCell(t,e)),s!==o&&(l=function n(a,r){a<h&&(c.setStyleCell(t,e,r[a]),window.setTimeout((function(){n(a+1,r)}),d.a.CONSTANTS.CONF_ANIMS_MS))},u=d.a.getIntervalCounter(o,s,d.a.CONSTANTS.CONF_ANIMS_STEP),h=u.length,c=this,l(0,u))}catch(a){this.graph.setCellStyles(e,n,[t])}else this.graph.setCellStyles(e,n,[t]);i.after();case 3:case"end":return r.stop()}}),r,this)})))}},{key:"setStyles",value:function(t,e){this.graph.getModel().setStyle(t,e)}},{key:"getLabelCell",value:function(t){return mxUtils.isNode(t.value)?t.value.getAttribute("label"):t.getValue(t)}},{key:"setLabelCell",value:function(t,e){return this.graph.cellLabelChanged(t,e,!1),this}},{key:"getId",value:function(t){return t.getId()}},{key:"setMap",value:function(t){d.a.log.info("XGraph.setMapping()"),this.onMapping=t,!0===this.onMapping.active&&(this.container.style.cursor="crosshair",this.graph.click=this.eventClick.bind(this))}},{key:"unsetMap",value:function(){d.a.log.info("XGraph.unsetMapping()"),this.onMapping.active=!1,this.container.style.cursor="auto",this.graph.click=this.clickBackup,this.onMapping.$scope&&this.onMapping.$scope.$applyAsync()}},{key:"eventClick",value:function(t){if(this.onMapping.active){var e=t.getState();if(e){var n=null!==this.onMapping.prop?this.onMapping.prop:"id",a=this.getValuePropOfMxCell(n,e.cell);if(this.onMapping.object&&(this.onMapping.object.data.pattern=a),this.onMapping.value){var r=document.getElementById(this.onMapping.value);r&&setTimeout((function(){r.focus()}),100)}this.unsetMap()}}}},{key:"eventDebug",value:function(t){console.log("DEBUG mxMouseEvent",t)}},{key:"eventDbClick",value:function(t,e){void 0!==e&&this.lazyZoomCell(e)}},{key:"eventMouseWheel",value:function(t,e){if(this.graph.isZoomWheelEvent(t)){null==e&&(e=t.deltaY<0);var n=this.container.getBoundingClientRect(),a=t.clientX-n.left,r=t.clientY-n.top;this.cumulativeZoomFactor=e?1.2*this.cumulativeZoomFactor:.8*this.cumulativeZoomFactor,this.lazyZoomPointer(this.cumulativeZoomFactor,a,r),mxEvent.consume(t)}}},{key:"eventKey",value:function(t){mxEvent.isConsumed(t)||27!==t.keyCode||(this.cumulativeZoomFactor=1,this.graph&&(this.graph.zoomActual(),this.applyGraph()))}},{key:"lazyZoomCenter",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.graph.zoomTo(t,!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"lazyZoomPointer",value:function(t,e,n){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var r,i,s,o,l,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=d.a.trace.before(this.constructor.name+".lazyZoomPointer()"),i=2*e,s=2*n,t=Math.max(.01,Math.min(this.graph.view.scale*t,160))/this.graph.view.scale,t=this.cumulativeZoomFactor/this.graph.view.scale,o=Math.round(this.graph.view.scale*t*100)/100,(t=o/this.graph.view.scale)>1?(i*=-(l=(t-1)/(2*o)),s*=-l):(u=(1/t-1)/(2*this.graph.view.scale),i*=u,s*=u),this.graph.view.scaleAndTranslate(o,this.graph.view.translate.x+i,this.graph.view.translate.y+s),r.after();case 10:case"end":return a.stop()}}),a,this)})))}},{key:"highlightCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getMxCells();return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=0;n<t.length;n++)this.highlightCell(t[n]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"unhighlightCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getMxCells();return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.a.each(t,(function(t){n.unhighlightCell(t)}));case 1:case"end":return e.stop()}}),e)})))}},{key:"highlightCell",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlight||null!=(n=this.graph.view.getState(t))&&(a=Math.max(5,mxUtils.getValue(n.style,mxConstants.STYLE_STROKEWIDTH,1)+4),(r=new mxCellHighlight(this.graph,"#99ff33",a,!1)).opacity=100,r.highlight(n),t.highlight=r);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"unhighlightCell",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.highlight&&(null!=(n=t.highlight).shape&&(mxUtils.setPrefixedStyle(n.shape.node.style,"transition","all 500ms ease-in-out"),n.shape.node.style.opacity=0),window.setTimeout((function(){n.destroy()}),500),t.highlight=null);case 1:case"end":return e.stop()}}),e)})))}},{key:"blinkCell",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.blink||(a=this,r=function(){var n=a.graph.view.getState(t);if(null!=n){var r=Math.max(5,mxUtils.getValue(n.style,mxConstants.STYLE_STROKEWIDTH,1)+4),s=new mxCellHighlight(a.graph,"#f5f242",r,!1);s.opacity=100,s.highlight(n),t.blink_on=s,t.blink_ms=e,window.setTimeout((function(){i()}),e)}},i=function(){if(t&&t.blink_on){var n=t.blink_on;null!=n.shape&&(mxUtils.setPrefixedStyle(n.shape.node.style,"transition","all ".concat(e,"ms ease-in-out")),n.shape.node.style.opacity=0),window.setTimeout((function(){n.destroy(),t.blink_on=null}),e)}},t.blink=d.a.setInterval(r,3*e));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"unblinkCell",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.blink&&(d.a.clearInterval(t.blink),t.blink_on&&null!=(n=t.blink_on).shape&&(n.shape.node.style.opacity=0,n.destroy(),t.blink_on=null,t.blink_ms=0),t.blink=null);case 1:case"end":return e.stop()}}),e)})))}},{key:"isBlinkCell",value:function(t){return!!t.blink}},{key:"geBlinkMxCell",value:function(t){return t.blink?t.blink_ms:0}},{key:"isCollapsedCell",value:function(t){return this.graph.isCellCollapsed(t)}},{key:"collapseCell",value:function(t){this.isCollapsedCell(t)||this.graph.foldCells(!0,!1,[t],null,null)}},{key:"expandCell",value:function(t){this.isCollapsedCell(t)&&this.graph.foldCells(!1,!1,[t],null,null)}},{key:"toggleFoldCell",value:function(t){var e=!this.isCollapsedCell(t);this.graph.foldCells(e,!1,[t],null,null)}},{key:"hideCell",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isVisibleCell(t)&&this.graph.model.setVisible(t,!1);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"showCell",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isVisibleCell(t)||this.graph.model.setVisible(t,!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"isVisibleCell",value:function(t){return this.graph.model.isVisible(t)}},{key:"resizeCell",value:function(t,e,n,a){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,s,o,l,u,h,c,f,p,g,v,m,y,b,x,w;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=d.a.trace.before(this.constructor.name+".resizeCell()"),null!==(s=this.graph.model.getGeometry(t))&&(o=void 0!==a?a.x:s.x,l=void 0!==a?a.width:s.x,u=void 0!==a?a.y:s.y,h=void 0!==a?a.height:s.y,o=void 0!==e&&e<0?o+e+l:o,u=void 0!==n&&n<0?u+n+h:u,c=void 0!==n?Math.abs(n):void 0!==a?a.height:s.height,f=void 0!==e?Math.abs(e):void 0!==a?a.width:s.width,this.animation?(p=function e(n,a,r,i,s){n<b&&window.setTimeout((function(){var o=new mxRectangle(a[n],r[n],i[n],s[n]);x.graph.resizeCell(t,o,!0),e(n+1,a,r,i,s)}),d.a.CONSTANTS.CONF_ANIMS_MS)},g=d.a.getIntervalCounter(s.x,o,d.a.CONSTANTS.CONF_ANIMS_STEP),v=d.a.getIntervalCounter(s.y,u,d.a.CONSTANTS.CONF_ANIMS_STEP),m=d.a.getIntervalCounter(s.width,f,d.a.CONSTANTS.CONF_ANIMS_STEP),y=d.a.getIntervalCounter(s.height,c,d.a.CONSTANTS.CONF_ANIMS_STEP),b=g.length,x=this,p(0,g,v,m,y)):(w=new mxRectangle(o,u,f,c),this.graph.resizeCell(t,w,!0))),i.after();case 4:case"end":return r.stop()}}),r,this)})))}},{key:"getSizeCell",value:function(t){return this.graph.model.getGeometry(t)}},{key:"resetSizeCell",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=new mxRectangle(e.x,e.y,e.width,e.height),this.graph.resizeCell(t,a,!0);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"lazyZoomCell",value:function(t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,r,i,s,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.a.trace.before(this.constructor.name+".lazyZoomCell()"),null!=t&&t.isVertex()&&null!==(a=this.graph.view.getState(t))&&(r=a.x,i=a.y,s=a.width,o=a.height,l=new mxRectangle(r,i,s,o),this.graph.zoomToRect(l),this.cumulativeZoomFactor=this.graph.view.scale),n.after();case 3:case"end":return e.stop()}}),e,this)})))}}])&&j(e.prototype,n),a&&j(e,a),t}()).initialized=!1,B);function Y(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}Z.$inject=["$q","$sce","uiSegmentSrv"];var X=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceTypes=d.a.CONSTANTS.SOURCE_TYPES,this.themes=d.a.CONSTANTS.DIOTHEME_TYPES,this.errorSourceFlag=!1,this.errorSourceMsg="",this.errorDownloadFlag=!1,this.errorDownloadMsg="",e.editor=this,e.$GF=d.a.me(),this.$scope=e,this.ctrl=e.ctrl,this.panel=this.ctrl.panel,this.flowchartHandler=this.ctrl.flowchartHandler}var e,n,a;return t.$inject=["$scope"],e=t,(n=[{key:"render",value:function(){this.flowchartHandler.render()}},{key:"onSourceChange",value:function(){this.flowchartHandler.sourceChanged(),this.render()}},{key:"onOptionChange",value:function(){d.a.log.info("FlowchartOptionsCtrl.onOptionChange()"),this.flowchartHandler.optionChanged(),this.render()}},{key:"checkSource_onSourceChange",value:function(t){var e=U.isValidXml(t);return this.errorSourceFlag=!e,e?(this.errorSourceMsg="",this.onSourceChange(),this.$scope.$applyAsync()):this.errorSourceMsg="Invalid Xml definition",e}},{key:"checkUrl_onSourceChange",value:function(t){var e=this;this.errorDownloadFlag=!1,this.errorDownloadMsg="";try{t=this.ctrl.templateSrv.replaceWithText(t),fetch(t,{method:"GET",mode:"cors",cache:"default"}).then((function(t){t.status>=200&&t.status<=299?t.text().then((function(t){var n=U.isValidXml(t);e.errorSourceFlag=!n,e.errorSourceFlag?e.errorSourceMsg="Response is an invalid Xml definition":(e.errorDownloadMsg="",e.onSourceChange()),e.$scope.$applyAsync()})):(e.errorSourceFlag=!0,e.errorDownloadMsg="Error ".concat(t.status," : ").concat(t.statusText),e.$scope.$applyAsync())})).catch((function(t){e.errorSourceFlag=!0,e.errorDownloadMsg="Error : ".concat(t),e.$scope.$applyAsync()}))}catch(t){this.errorDownloadFlag=!0,this.errorDownloadMsg="Error when call url"}return!0}},{key:"edit",value:function(t){this.flowchartHandler.openDrawEditor(t)}},{key:"getFlowcharts",value:function(){return this.flowchartHandler.getFlowcharts()}},{key:"getNames",value:function(){return this.flowchartHandler.getFlowchartNames()}},{key:"getCurrentFlowchart",value:function(){return[this.flowchartHandler.getFlowchart()]}}])&&Y(e.prototype,n),a&&Y(e,a),t}();function Z(t,e,n){return{restrict:"E",scope:!0,templateUrl:"".concat(d.a.plugin.getPartialPath(),"/flowchart/index.html"),controller:X}}function W(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}J.$inject=["$q","uiSegmentSrv"];var K=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enable=!1,e.editor=this,e.$GF=d.a.me(),this.state={data:this.getStates(),columns:[{id:"cellId",desc:"Shape ID",sort:"asc",select:!1},{id:"label",desc:"Label",sort:"asc",select:!1},{id:"cellId",desc:"Shape ID",sort:"asc",select:!1},{id:"font",desc:"Font color",sort:"asc",select:!1},{id:"fill",desc:"Fill color",sort:"asc",select:!1},{id:"stroke",desc:"Stroke color",sort:"asc",select:!1},{id:"tags",desc:"Tags Mapping",sort:"asc",select:!1}]},this.ctrl=e.ctrl,this.panel=this.ctrl.panel,this.flowchartHandler=this.ctrl.flowchartHandler,this.stateHandler=this.flowchartHandler.getFlowchart().getStateHandler()}var e,n,a;return t.$inject=["$scope"],e=t,(n=[{key:"render",value:function(){this.panel.render()}},{key:"onChangeId",value:function(t){if(void 0!==t.newcellId&&t.cellId!==t.newcellId){t.edited=!0;var e=this.flowchartHandler.getFlowchart().getStateHandler();void 0!==e&&(e.edited=!0),void 0===t.previousId&&(t.previousId=t.cellId),t.cellId=t.newcellId,t.edited=!0}t.edit=!1}},{key:"onEdit",value:function(t){t.edit=!0,t.newcellId=t.cellId;var e=document.getElementById(t.cellId);setTimeout((function(){e&&e.focus()}),100)}},{key:"reset",value:function(){this.flowchartHandler.draw(),this.flowchartHandler.refresh()}},{key:"apply",value:function(){var t=this.flowchartHandler.getFlowchart(),e=t.getStateHandler();void 0!==e&&(e.getStates().forEach((function(e){e.edited&&e.previousId&&(t.renameId(e.previousId,e.cellId),e.edited=!1)})),e.edited=!1),t.applyModel()}},{key:"selectCell",value:function(t){t.highlightCell()}},{key:"unselectCell",value:function(t){t.unhighlightCell()}},{key:"getStates",value:function(){if(this.stateHandler){var t=this.stateHandler.getStatesForInspect();return f.a.orderBy(t,["cellId","globalLevel"],["asc"])}return[]}},{key:"getStateValue",value:function(t,e){switch(e){case"cellId":return t.cellId;case"level":return t.getTextLevel();case"label":return t.getCellProp("value");default:return null}}}])&&W(e.prototype,n),a&&W(e,a),t}();function J(t,e){return{restrict:"E",scope:!0,templateUrl:"".concat(d.a.plugin.getPartialPath(),"inspect/index.html"),controller:K}}function q(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeRuleIndex=0,d.a.log.info("RulesHandler.constructor()"),this.rules=[],this.data=e}var e,n,a;return e=t,a=[{key:"getDefaultData",value:function(){return{rulesData:[]}}}],(n=[{key:"import",value:function(t){var e=this;d.a.log.info("RuleHandler.import()"),this.rules=[];var n,a=1;return null!=t&&((n=Array.isArray(t)?t:t.rulesData).length>0&&void 0!==n[0].order&&(n=f.a.sortBy(f.a.sortBy(n,(function(t){return t.order})))),n.forEach((function(t){e.addRule("").import(t).setOrder(a),a+=1}))),this}},{key:"getRules",value:function(){return this.rules}},{key:"getRule",value:function(t){return this.rules[t]}},{key:"addRule",value:function(t){var e=M.getDefaultData(),n=new M(t,e);return this.rules.push(n),this.data.rulesData.push(e),n.setOrder(this.countRules()),n}},{key:"countRules",value:function(){return void 0!==this.rules&&Array.isArray(this.rules)?this.rules.length:0}},{key:"setOrder",value:function(){for(var t=this.rules.length,e=0;e<t;e++)this.rules[e].setOrder(e+1);return this}},{key:"removeRule",value:function(t){var e=t.getOrder()-1;this.rules.splice(e,1),this.data.rulesData.splice(e,1),this.setOrder()}},{key:"cloneRule",value:function(t){var e=t.getOrder()-1,n=t.getData(),a=M.getDefaultData();this.reduce();var r=new M(a.pattern,a);r.import(n),a.alias="Copy of ".concat(a.alias),this.rules.splice(e,0,r),this.data.rulesData.splice(e,0,a),r.data.reduce=!1,this.activeRuleIndex=e,this.setOrder();var i=document.getElementById(r.getId());return i&&setTimeout((function(){i.focus()}),100),r}},{key:"reduce",value:function(){return this.getRules().forEach((function(t){t.data.reduce=!0})),this}},{key:"moveRuleToUp",value:function(t){var e=t.getOrder()-1,n=this.rules,a=n.length-1;if(0!==e&&0!==a){var r=n[e];r.setOrder(e);var i=n[e-1];i.setOrder(e+1),n[e-1]=r,n[e]=i}}},{key:"moveRuleToDown",value:function(t){var e=t.getOrder()-1,n=this.rules,a=n.length-1;if(e!==a&&0!==a){var r=n[e];r.setOrder(e+2);var i=n[e+1];i.setOrder(e+1),n[e+1]=r,n[e]=i}}}])&&q(e.prototype,n),a&&q(e,a),t}(),tt=n(7),et=n.n(tt);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rt(t,e)}function rt(t,e){return(rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=ot(t);if(e){var r=ot(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return st(this,n)}}function st(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ht(t,e,n){return e&&ut(t.prototype,e),n&&ut(t,n),t}var ct=function(){function t(e){lt(this,t),this.timeFormat="YYYY-MM-DD HH:mm:ss",this.checked=!1,this.div=null,this.mxcell=e,this.checked=!1,this.metrics=new Set}return ht(t,[{key:"isChecked",value:function(){return this.checked}},{key:"addMetric",value:function(){this.checked=!0;var t=new ft;return this.metrics.add(t),t}},{key:"updateDate",value:function(){var t=new Date;this.lastChange=t.getFullYear()+"-"+(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"-"+t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+" "+t.getHours().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+t.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+t.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}},{key:"destroy",value:function(){this.metrics.clear(),this.mxcell.GF_tooltipHandler&&delete this.mxcell.GF_tooltipHandler}},{key:"getDiv",value:function(t){if(null!==this.div&&void 0!==this.div)return t&&this.div&&t.appendChild(this.div),this.div;if(!this.checked)return null;var e=document.createElement("div");return void 0!==t&&t.appendChild(e),this.metrics.size>0&&(this.getDateDiv(e),this.metrics.forEach((function(t){t.getDiv(e)}))),this.div=e,e}},{key:"getDateDiv",value:function(t){var e=document.createElement("div");return e.id=this.mxcell.mxObjectId+"_DATE",void 0!==t&&t.appendChild(e),e.className="graph-tooltip-time tooltip-date",e.innerHTML="".concat(this.lastChange),e}}]),t}(),ft=function(){function t(){lt(this,t),this.direction="v",this.color="#8c8980",this.graphs=new Set,this.label="",this.value=""}return ht(t,[{key:"setLabel",value:function(t){return this.label=t,this}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"setColor",value:function(t){return null!==t&&(this.color=t),this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"getDiv",value:function(t){var e=document.createElement("div");return e.className="tooltip-metric","h"===this.direction&&(e.style.display="inline-block"),void 0!==t&&t.appendChild(e),this.div=e,this.getTextDiv(e),this.getGraphsDiv(e),e}},{key:"getTextDiv",value:function(t){var e=document.createElement("div");e.className="tooltip-text";var n="";return void 0!==t&&t.appendChild(e),void 0!==this.label&&(n+="".concat(this.label," : "),n+='<span style="color:'.concat(this.color,'"><b>').concat(this.value,"</b></span>")),e.innerHTML=n,e}},{key:"getGraphsDiv",value:function(t){var e=document.createElement("div");return void 0!==t&&t.appendChild(e),this.graphs.size>0&&this.graphs.forEach((function(t){t.getDiv(e)})),e}},{key:"addGraph",value:function(t){var e;switch(t){case"line":e=new pt;break;case"bar":e=new gt;break;default:d.a.log.error("Graph type unknow",t),e=new gt}return this.graphs.add(e),e}}]),t}(),dt=function(){function t(){lt(this,t),this.color="#8c8980",this.type="line",this.data={series:[{data:[{x:0,y:0}]}]},this.size="100%",this.low=null,this.high=null,this.scaleType="linear"}return ht(t,[{key:"getDiv",value:function(t){return this.div}},{key:"setName",value:function(t){return this.name=t,this}},{key:"setColumn",value:function(t){return this.column=t,this}},{key:"setType",value:function(t){return this.type=t,this}},{key:"setSize",value:function(t){return this.size=t,this}},{key:"setMetric",value:function(t){return this.metric=t,this}},{key:"setScaling",value:function(t,e){return this.low=t,this.high=e,this}},{key:"setScale",value:function(t){this.scaleType=t}},{key:"setColor",value:function(t){return null!==t&&(this.color=t),this}},{key:"setParentDiv",value:function(t){return this.parentDiv=t,this}},{key:"getChart",value:function(){return this.chart}}]),t}(),pt=function(t){at(n,t);var e=it(n);function n(){var t;return lt(this,n),(t=e.call(this)).type="line",t.chartistOptions={showPoint:!1,showLine:!0,showArea:!0,fullWidth:!0,axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},chartPadding:{top:0,left:0,right:0,bottom:0}},t}return ht(n,[{key:"getDiv",value:function(t){if(this.metric){var e="log"===this.scaleType;this.data.series[0].data=this.metric.getData(this.column,e)}var n=document.createElement("div"),a=this.color;return this.div=n,void 0!==t&&t.appendChild(n),n.className="ct-chart ct-golden-section",null!==this.size&&(n.style.width=this.size),null!==this.low&&(this.chartistOptions.low=this.low),null!==this.high&&(this.chartistOptions.high=this.high),this.chart=new et.a.Line(n,this.data,this.chartistOptions),this.chart.on("draw",(function(t){"line"!==t.type&&"area"!==t.type||("line"===t.type&&t.element.attr({style:"stroke: ".concat(a)}),"area"===t.type&&t.element.attr({style:"fill: ".concat(a)}),t.element.animate({d:{begin:1e3*t.index,dur:1e3,from:t.path.clone().scale(1,0).translate(0,t.chartRect.height()).stringify(),to:t.path.clone().stringify(),easing:et.a.Svg.Easing.easeOutQuint}}))})),n}}]),n}(dt),gt=function(t){at(n,t);var e=it(n);function n(){var t;return lt(this,n),(t=e.call(this)).type="bar",t.chartistOptions={axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},chartPadding:{top:0,left:0,right:0,bottom:0}},t}return ht(n,[{key:"getDiv",value:function(t){if(this.metric){var e="log"===this.scaleType;this.data.series[0].data=this.metric.getData(this.column,e)}var n=document.createElement("div"),a=this.color;this.div=n,void 0!==t&&t.appendChild(n),n.className="ct-chart ct-golden-section",null!==this.size&&(n.style.width=this.size),null!==this.low&&(this.chartistOptions.low=this.low),null!==this.high&&(this.chartistOptions.high=this.high),this.chart=new et.a.Bar(n,this.data,this.chartistOptions);var r=0,i=this.data.series[0].data.length,s=Math.round(50/(i/10)),o=Math.round(250/(i/10));return this.chart.on("draw",(function(t){"bar"===t.type&&(t.element.attr({style:"stroke: ".concat(a)}),r++,t.element.animate({opacity:{begin:r*s,dur:o,from:0,to:1,easing:"ease"}}))})),n}}]),n}(dt);function vt(t,e,n){return(vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e);if(a){var r=Object.getOwnPropertyDescriptor(a,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=kt(t);if(e){var r=kt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return wt(this,n)}}function wt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function St(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Et(t,e,n){return e&&St(t.prototype,e),n&&St(t,n),t}var Ct,Ot=function(){function t(e,n){_t(this,t),this.changed=!1,this.matched=!1,this.globalLevel=-1,this.tooltipHandler=null;var a=d.a.trace.before(this.constructor.name+".constructor()");this.mxcell=e,this.cellId=e.id,this.xgraph=n,this.shapeState=new Nt(n,e),this.tooltipState=new Lt(n,e),this.iconState=new Dt(n,e),this.eventState=new Tt(n,e),this.textState=new At(n,e),this.linkState=new Rt(n,e),this.variables=d.a.createLocalVars(),this.status=new Map,this.tooltipHandler=null,this.mxcell.GF_tooltipHandler=null,this.originalText=this.xgraph.getLabelCell(e),a.after()}return Et(t,[{key:"async_applyState",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.applyState();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setState",value:function(t,e){var n=this,a=d.a.trace.before(this.constructor.name+".setState()");if(!t.isHidden()&&t.matchMetric(e)){var r=Date.now(),i=t.getShapeMaps(),s=t.getTextMaps(),o=t.getLinkMaps(),l=t.getEventMaps(),u=t.getValueForMetric(e),h=t.getFormattedValue(u),c=t.getThresholdLevel(u),f=t.data.gradient&&"number"===t.data.type?t.getColorForValue(u):t.getColorForLevel(c);this.variables.set(d.a.CONSTANTS.VAR_STR_RULENAME,t.data.alias),this.variables.set(d.a.CONSTANTS.VAR_NUM_VALUE,u),this.variables.set(d.a.CONSTANTS.VAR_STR_FORMATED,h),this.variables.set(d.a.CONSTANTS.VAR_NUM_LEVEL,c),this.variables.set(d.a.CONSTANTS.VAR_STR_COLOR,f);var p=this.getCellProp(t.data.shapeProp);i.forEach((function(a){var r=a.data.style;if(!a.isHidden()&&a.match(p,t.data.shapeRegEx)){var i=f;n.matched=!0,n.globalLevel=c>n.globalLevel?c:n.globalLevel,a.toColorize(c)&&n.shapeState.set(r,i,c)&&n.status.set(r,i),t.toTooltipize(c)&&(r="tooltip",i=!0,n.tooltipState.set("tooltip",!0,c)&&n.status.set(r,i),n.tooltipState.setTooltip(t,e,f,h)),t.toIconize(c)&&(r="icon",i=!0,n.iconState.set("icon",!0,c)&&n.status.set(r,i))}})),p=this.getCellProp(t.data.textProp),s.forEach((function(e){var a="label";if(!e.isHidden()&&e.match(p,t.data.textRegEx)&&e.toLabelize(c)&&e.toLabelize(c)){n.matched=!0,n.globalLevel=c>n.globalLevel?c:n.globalLevel;var r=n.variables.replaceText(h),i=e.getReplaceText(n.textState.getMatchValue(a),r);n.textState.set(a,i,c)&&n.status.set(a,i)}})),p=this.getCellProp(t.data.eventProp),l.forEach((function(e){var a=e.data.style;if(!e.isHidden()&&e.match(p,t.data.eventRegEx)&&e.toEventable(c)&&e.toEventable(c)){n.matched=!0,n.globalLevel=c>n.globalLevel?c:n.globalLevel;var r=n.variables.eval(e.data.value);n.eventState.set(a,r,c)&&n.status.set(a,r)}})),p=this.getCellProp(t.data.linkProp),o.forEach((function(e){var a="link";if(!e.isHidden()&&e.match(p,t.data.linkRegEx)&&e.toLinkable(c)){n.matched=!0,n.globalLevel=c>n.globalLevel?c:n.globalLevel;var r=n.variables.replaceText(e.getLink());n.linkState.set(a,r,c)&&n.status.set(a,r)}})),c>=t.highestLevel&&this.matched&&(t.highestLevel=c,t.highestValue=u,t.highestFormattedValue=h,t.highestColor=f);var g=Date.now();t.execTimes+=g-r}return a.after(),this}},{key:"unsetState",value:function(){var t=d.a.trace.before(this.constructor.name+".unsetState()");return this.eventState.unset(),this.textState.unset(),this.linkState.unset(),this.tooltipState.unset(),this.iconState.unset(),this.matched=!1,t.after(),this}},{key:"getCellProp",value:function(t){return"id"===t?this.cellId:"value"===t?this.originalText:null}},{key:"getLevel",value:function(){return this.globalLevel}},{key:"getTextLevel",value:function(){return-1===this.globalLevel?"":this.globalLevel.toString()}},{key:"getStatus",value:function(t){var e=this.status.get(t);return null!=e||(null===(e=this.xgraph.getStyleCell(this.mxcell,t))&&(e=""),this.status.set(t,e)),e}},{key:"haveStatus",value:function(t){return this.status.has(t)}},{key:"isShape",value:function(){return this.mxcell.isVertex()}},{key:"isConnector",value:function(){return this.mxcell.isEdge()}},{key:"applyState",value:function(){var t=d.a.trace.before(this.constructor.name+".applyState()");return(this.matched||this.changed)&&(this.changed=!0,this.shapeState.apply(),this.tooltipState.apply(),this.iconState.apply(),this.textState.apply(),this.eventState.apply(),this.linkState.apply()),t.after(),this}},{key:"reset",value:function(){var t=d.a.trace.before(this.constructor.name+".reset()");return this.shapeState.reset(),this.tooltipState.reset(),this.iconState.reset(),this.textState.reset(),this.eventState.reset(),this.linkState.reset(),this.variables.clear(),this.status.clear(),this.globalLevel=-1,this.changed=!1,t.after(),this}},{key:"prepare",value:function(){var t=d.a.trace.before(this.constructor.name+".prepare()");return this.changed&&(this.shapeState.prepare(),this.tooltipState.prepare(),this.iconState.prepare(),this.textState.prepare(),this.eventState.prepare(),this.linkState.prepare(),this.variables.clear(),this.status.clear(),this.globalLevel=-1,this.matched=!1),t.after(),this}},{key:"highlightCell",value:function(){return this.xgraph.highlightCell(this.mxcell),this}},{key:"unhighlightCell",value:function(){return this.xgraph.unhighlightCell(this.mxcell),this}}]),t}(),Mt=((Ct=function(){function t(e,n){_t(this,t),this.keys=[],this.matchedKey=new Map,this.changedKey=new Map,this.originalValue=new Map,this.matchValue=new Map,this.matchLevel=new Map,this.xgraph=e,this.mxcell=n,this.init_core()}return Et(t,[{key:"init_core",value:function(){}},{key:"addValue",value:function(e,n){!0!==this.keys.includes(e)&&this.keys.push(e),this.originalValue.set(e,n),this.matchValue.set(e,n),this.matchLevel.set(e,t.DEFAULTLEVEL),this.matchedKey.set(e,!1),this.changedKey.set(e,!1),d.a.log.debug("GFState.addValue from "+this.constructor.name+" ["+this.mxcell.id+"] KEY="+e+" VALUE="+n)}},{key:"getOriginalValue",value:function(t){return this.originalValue.get(t)}},{key:"getMatchValue",value:function(t){return this.matchValue.get(t)}},{key:"set",value:function(t,e,n){var a=this.matchLevel.get(t);return void 0===a?(this.addValue(t,e),this.set(t,e,n)):a<=n&&(this.matchLevel.set(t,n),this.matchedKey.set(t,!0),this.matchValue.set(t,e),!0)}},{key:"apply",value:function(t){var e=this;if(void 0!==t)if(this.isMatched(t)){d.a.log.debug("GFState.apply from "+this.constructor.name+" ["+this.mxcell.id+"] MATCHED KEY="+t);var n=this.getMatchValue(t);try{this.apply_core(t,n)}catch(e){d.a.log.error("Error on reset for key "+t,e)}this.changedKey.set(t,!0),this.matchedKey.set(t,!1)}else this.isChanged(t)&&(d.a.log.debug("GFState.apply from "+this.constructor.name+" ["+this.mxcell.id+"] CHANGED KEY="+t),this.reset(t));else this.keys.forEach((function(t){e.apply(t)}));return this}},{key:"apply_core",value:function(t,e){}},{key:"isMatched",value:function(t){var e=this;if(void 0!==t)return!0===this.matchedKey.get(t);var n=!1;return this.keys.forEach((function(t){n=e.isMatched(t)||n})),n}},{key:"isChanged",value:function(t){var e=this;if(void 0!==t)return!0===this.changedKey.get(t);var n=!1;return this.keys.forEach((function(t){n=!!e.isChanged(t)||n})),n}},{key:"getLevel",value:function(e){var n=this;if(void 0!==e){var a=this.matchLevel.get(e);return void 0!==a?a:t.DEFAULTLEVEL}var r=t.DEFAULTLEVEL;return this.keys.forEach((function(t){return r=Math.max(n.getLevel(t))})),r}},{key:"unset",value:function(t){var e=this;return void 0!==t?(this.matchValue.set(t,this.originalValue.get(t)),this.matchedKey.set(t,!1),this.matchLevel.set(t,-1)):this.keys.forEach((function(t){e.unset(t)})),this}},{key:"reset",value:function(t){var e=this;if(void 0!==t){d.a.log.debug("GFState.reset from "+this.constructor.name+" ["+this.mxcell.id+"] KEY="+t),this.unset(t);var n=this.getOriginalValue(t);try{this.reset_core(t,n)}catch(e){d.a.log.error("Error on reset for key "+t,e)}this.changedKey.set(t,!1),this.matchedKey.set(t,!1)}else this.keys.forEach((function(t){e.reset(t)}));return this}},{key:"reset_core",value:function(t,e){}},{key:"prepare",value:function(){return this.isChanged()&&this.unset(),this}}]),t}()).DEFAULTLEVEL=-1,Ct),Tt=function(t){yt(n,t);var e=xt(n);function n(t,a){var r;return _t(this,n),(r=e.call(this,t,a)).keys=[],r.geo=void 0,r.init_core(),r}return Et(n,[{key:"init_core",value:function(){var t=this;this.keys=d.a.CONSTANTS.EVENTMETHODS.map((function(t){return t.value})),this.geo=this.xgraph.getSizeCell(this.mxcell),this.keys.forEach((function(e){var n=t._get(e);t.addValue(e,n)}))}},{key:"apply_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:void 0===e&&(e=null),this._set(t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"reset_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:void 0===e&&(e=null),this._set(t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"_set",value:function(t,e){void 0===e&&(e=null);var n=void 0;switch(t){case"text":e=String(e),this.xgraph.setLabelCell(this.mxcell,e);break;case"visibility":"0"===(e=String(e))?this.xgraph.hideCell(this.mxcell):"1"===e&&this.xgraph.showCell(this.mxcell);break;case"fold":"0"===(e=String(e))?this.xgraph.collapseCell(this.mxcell):"1"===e&&this.xgraph.expandCell(this.mxcell);break;case"height":if(void 0!==this.geo){var a=Number(e);if(this.isMatched("height")){var r=this.isMatched("width")?Number(this.getMatchValue("width")):void 0;this.xgraph.resizeCell(this.mxcell,r,a,this.geo),this.unset("width")}else this.isMatched("width")||(this.xgraph.resetSizeCell(this.mxcell,this.geo),this.unset("width"))}break;case"width":if(void 0!==this.geo){var i=Number(e);if(this.isMatched("width")){var s=this.isMatched("height")?Number(this.getMatchValue("height")):void 0;this.xgraph.resizeCell(this.mxcell,i,s,this.geo),this.unset("width")}else this.isMatched("height")||(this.xgraph.resetSizeCell(this.mxcell,this.geo),this.unset("height"))}break;case"barPos":case"fontSize":case"opacity":case"textOpacity":case"rotation":n=void 0===(n=this._get(t))?L.getDefaultValue(t):n,this.xgraph.setStyleAnimCell(this.mxcell,t,e,n);break;case"blink":e?this.xgraph.blinkCell(this.mxcell,e):this.xgraph.unblinkCell(this.mxcell);break;default:this.xgraph.setStyleCell(this.mxcell,t,e)}}},{key:"_get",value:function(t){switch(t){case"text":return this.xgraph.getLabelCell(this.mxcell);case"visibility":return!1===this.xgraph.isVisibleCell(this.mxcell)?"0":"1";case"height":return void 0!==this.geo?this.geo.height:void 0;case"width":return void 0!==this.geo?this.geo.width:void 0;case"fold":return!0===this.xgraph.isCollapsedCell(this.mxcell)?"0":"1";case"blink":return this.xgraph.geBlinkMxCell(this.mxcell);default:return this.xgraph.getStyleCell(this.mxcell,t)}}}]),n}(Mt),At=function(t){yt(n,t);var e=xt(n);function n(t,a){var r;return _t(this,n),(r=e.call(this,t,a)).keys=["label"],r.init_core(),r}return Et(n,[{key:"init_core",value:function(){var t=this.xgraph.getLabelCell(this.mxcell);this.addValue("label",t)}},{key:"apply_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.xgraph.setLabelCell(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"reset_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.xgraph.setLabelCell(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}}]),n}(Mt),Rt=function(t){yt(n,t);var e=xt(n);function n(t,a){var r;return _t(this,n),(r=e.call(this,t,a)).keys=["link"],r.init_core(),r}return Et(n,[{key:"init_core",value:function(){var t=this.xgraph.getLink(this.mxcell);this.addValue("link",t)}},{key:"apply_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.xgraph.addLink(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"reset_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==e||0===e.length?this.xgraph.removeLink(this.mxcell):this.xgraph.addLink(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}}]),n}(Mt),Nt=function(t){yt(n,t);var e=xt(n);function n(t,a){var r;return _t(this,n),(r=e.call(this,t,a)).keys=[],r.init_core(),r}return Et(n,[{key:"init_core",value:function(){var t=this;d.a.log.info("ShapeState ["+this.mxcell.id+"]"),this.keys=d.a.CONSTANTS.COLORMETHODS.map((function(t){return t.value})),this.fullStylesString=this.mxcell.getStyle(),this.keys.forEach((function(e){var n=t.xgraph.getStyleCell(t.mxcell,e);t.addValue(e,n),d.a.log.debug("ShapeState ["+t.mxcell.id+"] Add value : "+e,n)})),this.mxcell.GF_tooltipHandler=null}},{key:"apply_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:void 0===e&&(e=null),this.xgraph.setColorAnimCell(this.mxcell,t,e);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"reset_core",value:function(t,e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:void 0===e&&(e=null),this.xgraph.setColorAnimCell(this.mxcell,t,e);case 2:case"end":return n.stop()}}),n,this)})))}}]),n}(Mt),Lt=function(t){yt(n,t);var e=xt(n);function n(t,a){var r;return _t(this,n),(r=e.call(this,t,a)).keys=["tooltip"],r.init_core(),r}return Et(n,[{key:"init_core",value:function(){this.addValue("tooltip",!1),this.tooltipHandler=void 0,this.mxcell.GF_tooltipHandler=null}},{key:"setTooltip",value:function(t,e,n,a){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,s,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=null,s=t.data.tooltipLabel,null!==this.tooltipHandler&&void 0!==this.tooltipHandler||(this.tooltipHandler=new ct(this.mxcell)),null!==s&&0!==s.length||("serie"===t.data.metricType&&(s=e.getName()),"table"===t.data.metricType&&(s=t.data.column)),t.data.tooltipColors&&(i=n),o=this.tooltipHandler.addMetric().setLabel(s).setValue(a).setColor(i).setDirection(t.data.tpDirection),t.data.tpGraph&&o.addGraph(t.data.tpGraphType).setColor(i).setColumn(t.data.column).setMetric(e).setSize(t.data.tpGraphSize).setScaling(t.data.tpGraphLow,t.data.tpGraphHigh).setScale(t.data.tpGraphScale),this.tooltipHandler.updateDate();case 8:case"end":return r.stop()}}),r,this)})))}},{key:"apply",value:function(t){var e=this;return void 0!==t&&"tooltip"===t?this.isMatched(t)&&!0===this.getMatchValue(t)&&(null!=this.tooltipHandler&&this.tooltipHandler.isChecked()&&(this.mxcell.GF_tooltipHandler=this.tooltipHandler),vt(kt(n.prototype),"apply",this).call(this,t)):this.keys.forEach((function(t){e.apply(t)})),this}},{key:"prepare",value:function(){return vt(kt(n.prototype),"prepare",this).call(this),this.reset(),this}},{key:"reset",value:function(t){var e=this;return void 0!==t&&"tooltip"===t?(this.mxcell.GF_tooltipHandler=null,this.tooltipHandler&&this.tooltipHandler.destroy(),this.tooltipHandler=void 0,vt(kt(n.prototype),"reset",this).call(this,t)):this.keys.forEach((function(t){e.reset(t)})),this}}]),n}(Mt),Dt=function(t){yt(n,t);var e=xt(n);function n(t,a){var r;return _t(this,n),(r=e.call(this,t,a)).keys=["icon"],r.init(),r}return Et(n,[{key:"init",value:function(){this.addValue("icon",!1)}},{key:"apply",value:function(t){var e=this;return void 0!==t&&"icon"===t?this.isMatched(t)&&!0===this.getMatchValue(t)?(this.isChanged(t)||this.xgraph.addOverlay("WARNING/ERROR",this.mxcell),vt(kt(n.prototype),"apply",this).call(this,t)):this.isChanged(t)&&this.reset(t):this.keys.forEach((function(t){e.apply(t)})),this}},{key:"reset",value:function(t){var e=this;return void 0!==t&&"icon"===t?(this.xgraph.removeOverlay(this.mxcell),vt(kt(n.prototype),"reset",this).call(this,t)):this.keys.forEach((function(t){e.reset(t)})),this}}]),n}(Mt);function Pt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var It=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edited=!1,d.a.log.info("StateHandler.constructor()"),this.states=new Map,this.xgraph=e,this.initStates(this.xgraph)}var e,n,a;return e=t,(n=[{key:"initStates",value:function(t){var e=this;d.a.log.info("StateHandler.initStates()"),this.xgraph=t,this.states.clear();var n=t.getMxCells();return f.a.each(n,(function(t){e.addState(t)})),this}},{key:"getStatesForRule",value:function(t){d.a.log.info("StateHandler.getStatesForRule()");var e,n=new Map,a=this.xgraph;return this.states.forEach((function(r){var i=r.mxcell,s=i.id,o=!1;null!==(e=a.getValuePropOfMxCell(t.data.shapeProp,i))&&t.matchShape(e)&&(n.set(s,r),o=!0),o||(e=a.getValuePropOfMxCell(t.data.textProp,i),t.matchText(e)&&(n.set(s,r),o=!0)),o||(e=a.getValuePropOfMxCell(t.data.linkProp,i),t.matchLink(e)&&(n.set(s,r),o=!0)),o||(e=a.getValuePropOfMxCell(t.data.eventProp,i),t.matchEvent(e)&&(n.set(s,r),o=!0))})),n}},{key:"updateStates",value:function(t){var e=this;d.a.log.info("StateHandler.updateStates()"),t.forEach((function(t){t.states=e.getStatesForRule(t)}))}},{key:"getStates",value:function(){return this.states}},{key:"getStatesForInspect",value:function(){var t=[];return this.states.forEach((function(e){t.push(e)})),t}},{key:"getState",value:function(t){return this.states.get(t)}},{key:"addState",value:function(t){var e=new Ot(t,this.xgraph);return this.states.set(t.id,e),e}},{key:"countStates",value:function(){return this.states.size}},{key:"prepare",value:function(){var t=d.a.trace.before(this.constructor.name+".prepare()");return this.states.forEach((function(t){t.prepare()})),t.after(),this}},{key:"setStates",value:function(t,e){var n=this,a=d.a.trace.before(this.constructor.name+".setStates()");return this.prepare(),t.forEach((function(t){t.highestLevel=-1,t.highestFormattedValue="",t.highestColor="",t.highestValue="",t.execTimes=0,void 0!==t.states&&0!==t.states.size||(t.states=n.getStatesForRule(t)),t.states.forEach((function(n){e.forEach((function(e){n.setState(t,e)}))}))})),a.after(),this}},{key:"applyStates",value:function(){var t=d.a.trace.before(this.constructor.name+".setStates()");return this.states.forEach((function(t){t.async_applyState()})),t.after(),this}},{key:"async_applyStates",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.applyStates();case 1:case"end":return t.stop()}}),t,this)})))}}])&&Pt(e.prototype,n),a&&Pt(e,a),t}();function Ft(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var zt=function(){function t(e,n,a,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xgraph=void 0,this.data=r,this.data.name=e,this.container=n,this.templateSrv=a.templateSrv}var e,n,a;return e=t,a=[{key:"getDefaultData",value:function(){return{name:"name",xml:Vt.getDefaultDioGraph(),csv:Vt.getDefaultCsvGraph(),download:!1,type:"xml",url:"http://<YourUrl>/<Your XML/drawio file/api>",zoom:"100%",center:!0,scale:!0,lock:!0,allowDrawio:!1,enableAnim:!0,tooltip:!0,grid:!1,bgColor:null,editorUrl:"https://www.draw.io",editorTheme:"dark"}}}],(n=[{key:"import",value:function(t){return d.a.log.info("flowchart[".concat(this.data.name,"].import()")),(t.download||!1===this.data.download)&&(this.data.download=t.download),t.source&&(this.data.type=t.source.type,this.data.xml=t.source.xml.value,this.data.url=t.source.url.value),t.options&&(this.data.zoom=t.options.zoom,this.data.center=t.options.center,this.data.scale=t.options.scale,this.data.lock=t.options.lock,this.data.allowDrawio=!1,this.data.tooltip=t.options.tooltip,this.data.grid=t.options.grid,this.data.bgColor=t.options.bgColor),t.type&&(this.data.type=t.type),t.xml&&(this.data.xml=t.xml),t.url&&(this.data.url=t.url),t.zoom&&(this.data.zoom=t.zoom),(t.center||!1===t.center)&&(this.data.center=t.center),(t.scale||!1===t.scale)&&(this.data.scale=t.scale),(t.lock||!1===t.lock)&&(this.data.lock=t.lock),(t.allowDrawio||!1===t.allowDrawio)&&(this.data.allowDrawio=t.allowDrawio),(t.enableAnim||!1===t.enableAnim)&&(this.data.enableAnim=t.enableAnim),t.tooltip&&(this.data.tooltip=t.tooltip),(t.grid||!1===t.grid)&&(this.data.grid=t.grid),t.bgColor&&(this.data.bgColor=t.bgColor),t.editorUrl&&(this.data.editorUrl=t.editorUrl),t.editorTheme&&(this.data.editorTheme=t.editorTheme),this.init(),this}},{key:"getData",value:function(){return this.data}},{key:"updateStates",value:function(t){var e=this,n=d.a.trace.before(this.constructor.name+".updateStates()");return t.forEach((function(t){void 0!==e.stateHandler?(t.states=e.stateHandler.getStatesForRule(t),t.states?t.states.forEach((function(t){t.unsetState()})):d.a.log.warn("States not defined for this rule")):d.a.log.error("updateStates => this.stateHandler undefined")})),n.after(),this}},{key:"init",value:function(){d.a.log.info("flowchart[".concat(this.data.name,"].init()"));try{void 0===this.xgraph&&(this.xgraph=new U(this.container,this.data.type,this.getContent())),void 0!==this.data.xml&&null!==this.data.xml?(this.data.download&&this.xgraph.setXmlGraph(this.getContent()),this.data.allowDrawio?this.xgraph.allowDrawio(!0):this.xgraph.allowDrawio(!1),this.data.enableAnim?this.xgraph.enableAnim(!0):this.xgraph.enableAnim(!1),this.setOptions(),this.xgraph.drawGraph(),this.data.tooltip&&this.xgraph.tooltipGraph(!0),this.data.scale?this.xgraph.scaleGraph(!0):this.xgraph.zoomGraph(this.data.zoom),this.data.center&&this.xgraph.centerGraph(!0),this.data.lock&&this.xgraph.lockGraph(!0),this.stateHandler=new It(this.xgraph)):d.a.log.error("XML Graph not defined")}catch(t){d.a.log.error("Unable to initialize graph",t)}return this}},{key:"getStateHandler",value:function(){return this.stateHandler}},{key:"getXGraph",value:function(){return this.xgraph}},{key:"setStates",value:function(t,e){return d.a.log.info("flowchart[".concat(this.data.name,"].setStates()")),void 0===t&&d.a.log.warn("Rules shoudn't be null"),void 0===e&&d.a.log.warn("Metrics shoudn't be null"),this.stateHandler&&this.stateHandler.setStates(t,e),this}},{key:"setOptions",value:function(){var t=d.a.trace.before(this.constructor.name+".setOptions()");return this.setScale(this.data.scale),this.setCenter(this.data.center),this.setGrid(this.data.grid),this.setTooltip(this.data.tooltip),this.setLock(this.data.lock),this.setZoom(this.data.zoom),this.setBgColor(this.data.bgColor),t.after(),this}},{key:"applyStates",value:function(){return d.a.log.info("flowchart[".concat(this.data.name,"].applyStates()")),this.stateHandler&&this.stateHandler.applyStates(),this}},{key:"applyOptions",value:function(){var t=d.a.trace.before(this.constructor.name+".applyOptions()");this.xgraph&&this.xgraph.applyGraph(),t.after()}},{key:"refresh",value:function(){this.xgraph&&this.xgraph.refresh()}},{key:"redraw",value:function(t){d.a.log.info("flowchart[".concat(this.data.name,"].redraw()")),void 0!==t?(this.data.xml=t,this.xgraph&&this.xgraph.setXmlGraph(this.getXml(!0))):(d.a.log.warn("XML Content not defined"),this.xgraph&&this.xgraph.setXmlGraph(this.getXml(!0))),this.applyOptions()}},{key:"reload",value:function(){d.a.log.info("flowchart[".concat(this.data.name,"].reload()")),void 0!==this.xgraph&&null!==this.xgraph?(this.xgraph.destroyGraph(),this.xgraph=void 0,this.init()):this.init()}},{key:"setLock",value:function(t){return this.data.lock=t,this.xgraph&&(this.xgraph.lock=t),this}},{key:"applyLock",value:function(t){return void 0!==t&&(this.data.lock=t),this.xgraph&&this.xgraph.lockGraph(this.data.lock),this}},{key:"setTooltip",value:function(t){return this.data.tooltip=t,this.xgraph&&(this.xgraph.tooltip=t),this}},{key:"applyTooltip",value:function(t){return void 0!==t&&(this.data.tooltip=t),this.xgraph&&this.xgraph.tooltipGraph(this.data.tooltip),this}},{key:"setScale",value:function(t){return this.data.scale=t,this.xgraph&&(this.xgraph.scale=t),this}},{key:"setBgColor",value:function(t){return this.data.bgColor=t,this.xgraph&&(this.xgraph.bgColor=t),this}},{key:"ApplyBgColor",value:function(t){return this.data.bgColor=t,t&&this.xgraph&&this.xgraph.bgGraph(t),this}},{key:"applyScale",value:function(t){return d.a.log.info("Flowchart.scale()"),void 0!==t&&(this.data.scale=t),this.xgraph&&this.xgraph.scaleGraph(this.data.scale),this}},{key:"setCenter",value:function(t){return this.data.center=t,this.xgraph&&(this.xgraph.center=t),this}},{key:"getNamesByProp",value:function(t){return this.xgraph?this.xgraph.getOrignalCells(t):[]}},{key:"getXml",value:function(t){return d.a.log.info("flowchart[".concat(this.data.name,"].getXml()")),t?this.templateSrv.replaceWithText(this.data.xml):this.data.xml}},{key:"getCsv",value:function(t){return d.a.log.info("flowchart[".concat(this.data.name,"].getXml()")),t?this.templateSrv.replaceWithText(this.data.csv):this.data.csv}},{key:"getUrlEditor",value:function(){return this.data.editorUrl}},{key:"getThemeEditor",value:function(){return this.data.editorTheme}},{key:"getContent",value:function(){if(d.a.log.info("flowchart[".concat(this.data.name,"].getContent()")),this.data.download){var t=this.templateSrv.replaceWithText(this.data.url),e=this.loadContent(t);return null!==e?e:""}return"xml"===this.data.type?this.getXml(!0):"csv"===this.data.type?this.getCsv(!0):(d.a.log.error("type unknow",this.data.type),"")}},{key:"loadContent",value:function(t){return U.loadXml(t)}},{key:"renameId",value:function(t,e){return this.xgraph&&this.xgraph.renameId(t,e),this}},{key:"applyModel",value:function(){return this.xgraph&&(this.data.xml=this.xgraph.getXmlModel()),this.redraw(this.data.xml),this}},{key:"center",value:function(t){return void 0!==t&&(this.data.center=t),this.xgraph&&this.xgraph.centerGraph(this.data.center),this}},{key:"setZoom",value:function(t){return this.data.zoom=t,this.xgraph&&(this.xgraph.zoomPercent=t),this}},{key:"zoom",value:function(t){return void 0!==t&&(this.data.zoom=t),this.xgraph&&this.xgraph.zoomGraph(this.data.zoom),this}},{key:"setGrid",value:function(t){return this.data.grid=t,this.xgraph&&(this.xgraph.grid=t),this}},{key:"grid",value:function(t){return void 0!==t&&(this.data.grid=t),this.xgraph&&this.xgraph.gridGraph(this.data.grid),this}},{key:"setXml",value:function(t){return this.data.xml=t,this}},{key:"minify",value:function(){this.data.xml=d.a.utils.minify(this.data.xml)}},{key:"prettify",value:function(){this.data.xml=d.a.utils.prettify(this.data.xml)}},{key:"decode",value:function(){d.a.utils.isencoded(this.data.xml)&&(this.data.xml=d.a.utils.decode(this.data.xml,!0,!0,!0))}},{key:"encode",value:function(){d.a.utils.isencoded(this.data.xml)||(this.data.xml=d.a.utils.encode(this.data.xml,!0,!0,!0))}},{key:"getContainer",value:function(){return this.container}},{key:"setMap",value:function(t){d.a.log.info("flowchart[".concat(this.data.name,"].setMap()"));var e=this.getContainer();this.xgraph&&this.xgraph.setMap(t),e.scrollIntoView(),e.focus()}},{key:"unsetMap",value:function(){this.xgraph&&this.xgraph.unsetMap()}}])&&Ft(e.prototype,n),a&&Ft(e,a),t}();function Gt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Vt=function(){function t(e,n,a,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowcharts=[],this.currentFlowchart="Main",this.firstLoad=!0,this.changeSourceFlag=!1,this.changeOptionFlag=!0,this.changeDataFlag=!1,this.changeRuleFlag=!1,this.onMapping={active:!1,object:null,value:null,prop:"id",$scope:null},this.mousedownTimeout=0,this.mousedown=0,this.onEdit=!1,this.editorWindow=null,t.getDefaultDioGraph(),this.$scope=e,this.$elem=n.find(".flowchart-panel__chart"),this.parentDiv=this.$elem[0],this.ctrl=a,this.data=r,a.events.on("render",(function(){i.render()})),document.body.onmousedown=function(){i.mousedown=0,window.clearInterval(i.mousedownTimeout),i.mousedownTimeout=window.setInterval((function(){i.mousedown+=1}),200)},document.body.onmouseup=function(){i.mousedown=0,window.clearInterval(i.mousedownTimeout)}}var e,n,a;return e=t,a=[{key:"getDefaultData",value:function(){return{flowcharts:[]}}},{key:"getDefaultDioGraph",value:function(){var e=t.defaultXml;if(!e){var n="".concat(d.a.plugin.getRootPath()).concat(d.a.CONSTANTS.CONF_FILE_DEFAULTDIO);e=d.a.utils.$loadFile(n)}return e}},{key:"getDefaultCsvGraph",value:function(){var e=t.defaultCsv;if(!e){var n="".concat(d.a.plugin.getRootPath()).concat(d.a.CONSTANTS.CONF_FILE_DEFAULTCSV);e=d.a.utils.$loadFile(n)}return e}}],(n=[{key:"import",value:function(t){var e=this;return d.a.log.info("FlowchartHandler.import()"),this.flowcharts=[],null!=t&&(Array.isArray(t)?t:t.flowcharts).forEach((function(t){var n=e.createContainer(),a=zt.getDefaultData(),r=new zt(t.name,n,e.ctrl,a);r.import(t),e.flowcharts.push(r),e.data.flowcharts.push(a)})),this}},{key:"getFlowchart",value:function(t){return this.flowcharts[0]}},{key:"getFlowcharts",value:function(){return this.flowcharts}},{key:"countFlowcharts",value:function(){return void 0!==this.flowcharts&&Array.isArray(this.flowcharts)?this.flowcharts.length:0}},{key:"createContainer",value:function(){var t=document.createElement("div");return t.style.margin="auto",t.style.position="relative",t.style.width="100%",t.style.height="100%",t.style.touchAction="none",t.style.border="none",t.style.cursor="default",t.style.right="0px",t.style.left="0px",t.style.bottom="0px",t.style.top="0px",this.parentDiv.appendChild(t),t}},{key:"addFlowchart",value:function(t){var e=d.a.trace.before(this.constructor.name+".addFlowchart()"),n=this.createContainer(),a=zt.getDefaultData(),r=new zt(t,n,this.ctrl,a);return r.init(),this.data.flowcharts.push(a),this.flowcharts.push(r),e.after(),r}},{key:"render",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=d.a.trace.before(this.constructor.name+".render()"),this.mousedown||(n=!0,(a=this).changeSourceFlag&&(a.load(),a.changeSourceFlag=!1,a.changeRuleFlag=!0,n=!0),a.changeOptionFlag&&(a.setOptions(),a.changeOptionFlag=!1,n=!0),(a.changeRuleFlag||a.changeDataFlag)&&(r=a.ctrl.rulesHandler.getRules(),i=a.ctrl.metricHandler.getMetrics(),a.async_refreshStates(r,i),a.changeDataFlag=!1,n=!1),(n||a.firstLoad)&&(a.applyOptions(),n=!1,a.firstLoad=!1)),this.ctrl.renderingCompleted(),e.after();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"sourceChanged",value:function(){return this.changeSourceFlag=!0,this}},{key:"optionChanged",value:function(){return this.changeOptionFlag=!0,this}},{key:"ruleChanged",value:function(){return this.changeRuleFlag=!0,this}},{key:"dataChanged",value:function(){return this.changeDataFlag=!0,this}},{key:"applyOptions",value:function(){var t=d.a.trace.before(this.constructor.name+".applyOptions()");return this.flowcharts.forEach((function(t){t.applyOptions()})),t.after(),this}},{key:"async_refreshStates",value:function(t,e){var n=d.a.trace.before(this.constructor.name+".async_refreshStates()");this.refreshStates(t,e),n.after()}},{key:"refreshStates",value:function(t,e){var n=d.a.trace.before(this.constructor.name+".refreshStates()");return this.changeRuleFlag&&(this.updateStates(t),this.changeRuleFlag=!1),this.setStates(t,e),this.applyStates(),n.after(),this}},{key:"refresh",value:function(){return this.flowcharts.forEach((function(t){t.refresh()})),this}},{key:"setStates",value:function(t,e){var n=d.a.trace.before(this.constructor.name+".setStates()");return this.flowcharts.forEach((function(n){n.setStates(t,e)})),n.after(),this}},{key:"updateStates",value:function(t){var e=d.a.trace.before(this.constructor.name+".updateStates()");return this.flowcharts.forEach((function(e){e.updateStates(t)})),e.after(),this}},{key:"applyStates",value:function(){var t=this,e=d.a.trace.before(this.constructor.name+".applyStates()");return new Promise((function(){t.flowcharts.forEach((function(t){t.applyStates()}))})).then((function(){t.refresh()})),e.after(),this}},{key:"setOptions",value:function(){var t=d.a.trace.before(this.constructor.name+".setOptions()");return this.flowcharts.forEach((function(t){t.setOptions()})),t.after(),this}},{key:"draw",value:function(){var t=d.a.trace.before(this.constructor.name+".draw()");return this.flowcharts.forEach((function(t){t.redraw()})),t.after(),this}},{key:"load",value:function(){var t=d.a.trace.before(this.constructor.name+".draw()");return this.flowcharts.forEach((function(t){t.reload()})),t.after(),this}},{key:"setMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=this.getFlowchart(this.currentFlowchart);return this.onMapping.active=!0,this.onMapping.object=t,this.onMapping.value=t.getId(),this.onMapping.$scope=this.$scope,this.onMapping.prop=e,n.setMap(this.onMapping),this}},{key:"unsetMap",value:function(){var t=this.getFlowchart(this.currentFlowchart);return this.onMapping.active=!1,this.onMapping.object=void 0,this.onMapping.value="",t.unsetMap(),this}},{key:"isMapping",value:function(t){return void 0===t||null==t?this.onMapping.active:!0===this.onMapping.active&&t===this.onMapping.object}},{key:"listenMessage",value:function(t){"ready"===t.data?t.source.postMessage(this.getFlowchart(this.currentFlowchart).data.xml,t.origin):(this.onEdit&&void 0!==t.data&&t.data.length>0&&(this.getFlowchart(this.currentFlowchart).redraw(t.data),this.sourceChanged(),this.$scope.$apply(),this.render()),(this.onEdit&&void 0!==t.data||0===t.data.length)&&(this.editorWindow&&this.editorWindow.close(),this.onEdit=!1,window.removeEventListener("message",this.listenMessage.bind(this),!1)))}},{key:"openDrawEditor",value:function(t){var e=this.getFlowchart(t).getUrlEditor(),n=this.getFlowchart(t).getThemeEditor(),a="".concat(e,"?embed=1&spin=1&libraries=1&ui=").concat(n,"&src=grafana");this.editorWindow=window.open(a,"MxGraph Editor","width=1280, height=720"),this.onEdit=!0,window.addEventListener("message",this.listenMessage.bind(this),!1)}},{key:"getFlowchartNames",value:function(){return this.flowcharts.map((function(t){return t.data.name}))}}])&&Gt(e.prototype,n),a&&Gt(e,a),t}();function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=Xt(t);if(e){var r=Xt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Yt(this,n)}}function Yt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Wt(t,e,n){return e&&Zt(t.prototype,e),n&&Zt(t,n),t}var Kt=function(){function t(e){$t(this,t),this.type="unknow",this.metrics={},this.name="",this.nullPointMode="connected"}return Wt(t,[{key:"getName",value:function(){return void 0!==this.name&&null!==this.name||d.a.log.error("Metric => getName : Name is null"),this.name}},{key:"getValue",value:function(t,e){return null}},{key:"getData",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[]}},{key:"getColumnsName",value:function(){return[]}}]),t}(),Jt=function(t){jt(n,t);var e=Ut(n);function n(t){var a;return $t(this,n),(a=e.call(this,t)).type="serie",a.metrics=a.seriesHandler(t),a.addCustomStats(),a.name=a.metrics.alias,a}return Wt(n,[{key:"seriesHandler",value:function(t){var e=d.a.trace.before(this.constructor.name+".seriesHandler()"),n=h.getTimeSeries(t);return n.flotpairs=n.getFlotPairs(this.nullPointMode),e.after(),n}},{key:"addCustomStats",value:function(){try{this.metrics.stats.last_time=this.metrics.flotpairs[this.metrics.flotpairs.length-1][0]}catch(t){d.a.log.error("Unable to add custom stats",t)}}},{key:"getValue",value:function(t){try{var e=this.metrics.stats[t];return null==e&&(e=this.metrics.datapoints[this.metrics.datapoints.length-1][0]),e}catch(t){return d.a.log.error("datapoint for serie is null",t),null}}},{key:"getData",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.metrics.flotpairs.map((function(e){return t?{x:e[0],y:Math.log10(e[1])}:{x:e[0],y:e[1]}}))}},{key:"getColumnsName",value:function(){return["time","value"]}}]),n}(Kt),qt=function(t){jt(n,t);var e=Ut(n);function n(t){var a;return $t(this,n),(a=e.call(this,t)).tableColumnOptions={},a.tableColumn="",a.allIsNull=!0,a.allIsZero=!0,a.type="table",a.name=t.refId,a.metrics=a.tableHandler(t),a}return Wt(n,[{key:"tableHandler",value:function(t){var e=d.a.trace.before(this.constructor.name+".tableHandler()"),n={datapoints:[],columnNames:{},stats:{}};return t.columns.forEach((function(t,e){n.columnNames[e]=t.text,"time"===t.text.toString().toLowerCase()&&(n.timeIndex=e,n.timeColumn=t.text)})),this.tableColumnOptions=n.columnNames,f.a.find(t.columns,["text",this.tableColumn])||this.setTableColumnToSensibleDefault(t),t.rows.forEach((function(t){var e={};t.forEach((function(t,a){var r=n.columnNames[a];e[r]=t})),n.datapoints.push(e)})),this.metrics.flotpairs=this.getFlotPairs(this.nullPointMode,n),e.after(),n}},{key:"setTableColumnToSensibleDefault",value:function(t){1===t.columns.length?this.tableColumn=t.columns[0].text:this.tableColumn=f.a.find(t.columns,(function(t){return"time"!==t.type})).text}},{key:"getFlotPairs",value:function(t,e){var n=d.a.trace.before(this.constructor.name+".getFlotPairs()"),a=[],r="connected"===t,i="null as zero"===t;for(var s in e.allIsNull=!0,e.allIsZero=!0,e.columnNames){var o=e.columnNames[s];e.stats[o]={},e.stats[o].name=o,e.stats[o].total=0,e.stats[o].max=-Number.MAX_VALUE,e.stats[o].min=Number.MAX_VALUE,e.stats[o].logmin=Number.MAX_VALUE,e.stats[o].avg=null,e.stats[o].current=null,e.stats[o].first=null,e.stats[o].delta=0,e.stats[o].diff=null,e.stats[o].range=null,e.stats[o].timeStep=Number.MAX_VALUE;var l=void 0,u=void 0,h=0,c=void 0,p=0,g=!0;try{for(var v=0;v<e.datapoints.length;v++){if(e.timeColumn&&(l=e.datapoints[v][e.timeColumn]),u=e.datapoints[v][o],void 0!==c){var m=l-c;m<e.stats[o].timeStep&&(e.stats[o].timeStep=m)}if(c=l,null===u){if(r)continue;i&&(u=0)}null!==u&&(f.a.isNumber(u)&&(e.stats[o].total+=u,this.allIsNull=!1,h++),u>e.stats[o].max&&(e.stats[o].max=u),u<e.stats[o].min&&(e.stats[o].min=u),null===e.stats[o].first?e.stats[o].first=u:p>u?(g=!1,v===e.datapoints.length-1&&(e.stats[o].delta+=u)):(e.stats[o].delta+=g?u-p:u,g=!0),p=u,u<e.stats[o].logmin&&u>0&&(e.stats[o].logmin=u),0!==u&&(this.allIsZero=!1)),a.push([l,u])}}catch(t){d.a.log.error("Unable to aggregate data",t)}l&&(e.stats[o].last_time=l),e.stats[o].max===-Number.MAX_VALUE&&(e.stats[o].max=null),e.stats[o].min===Number.MAX_VALUE&&(e.stats[o].min=null),a.length&&!this.allIsNull&&(e.stats[o].avg=e.stats[o].total/h,e.stats[o].current=a[a.length-1][1],null===e.stats[o].current&&a.length>1&&(e.stats[o].current=a[a.length-2][1])),null!==e.stats[o].max&&null!==e.stats[o].min&&(e.stats[o].range=e.stats[o].max-e.stats[o].min),null!==e.stats[o].current&&null!==e.stats[o].first&&(e.stats[o].diff=e.stats[o].current-e.stats[o].first),e.stats[o].count=a.length}return n.after(),a}},{key:"getValue",value:function(t,e){try{var n=this.metrics.stats[e][t];return null==n&&(n=this.metrics.datapoints[this.metrics.datapoints.length-1][e]),n}catch(t){return d.a.log.error("datapoint for table is null",t),null}}},{key:"getColumnIndex",value:function(t){for(var e in this.tableColumnOptions)if(t===this.tableColumnOptions[e])return Number(e);return null}},{key:"getColumnsName",value:function(){var t=[];for(var e in this.tableColumnOptions)t.push(this.tableColumnOptions[e]);return t}},{key:"getData",value:function(t){var e=this;return this.metrics.timeColumn?this.metrics.datapoints.map((function(n){return{x:n[e.metrics.timeColumn],y:n[t]}})):this.metrics.datapoints.map((function(e){return e[t]}))}}]),n}(Kt);function Qt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var te=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tables=[],this.series=[],this.metrics=[],this.$scope=e}var e,n,a;return e=t,(n=[{key:"initData",value:function(t){var e=this,n=d.a.trace.before(this.constructor.name+".initData()");this.tables=[],this.series=[],this.metrics=[],t.forEach((function(t){e.addMetric(t)})),n.after()}},{key:"addMetric",value:function(t){var e=d.a.trace.before(this.constructor.name+".addMetric()");"table"===t.type?this.addTable(t):this.addSerie(t),e.after()}},{key:"addTable",value:function(t){var e=d.a.trace.before(this.constructor.name+".addTable()"),n=new qt(t);return this.tables.push(n),this.metrics.push(n),e.after(),n}},{key:"addSerie",value:function(t){var e=d.a.trace.before(this.constructor.name+".addSerie()"),n=new Jt(t);return this.series.push(n),this.metrics.push(n),e.after(),n}},{key:"getNames",value:function(t){return"serie"===t?this.series.map((function(t){return t.getName()})):"table"===t?this.tables.map((function(t){return t.getName()})):this.metrics.map((function(t){return t.getName()}))}},{key:"getMetrics",value:function(t){return"serie"===t?this.series:"table"===t?this.tables:this.metrics}},{key:"isTypeOf",value:function(t){return"serie"===t?this.series.length>0:"table"===t&&this.tables.length>0}},{key:"findMetrics",value:function(t,e){var n=[];return e?("table"===e&&(n=this.tables.filter((function(e){return e.getName()===t}))),"serie"===e&&(n=this.series.filter((function(e){return e.getName()===t})))):n=this.metrics.filter((function(e){return e.getName()===t})),n}},{key:"getColumnsName",value:function(t,e){var n=this.findMetrics(t,e),a=[];return n.forEach((function(t){a=a.concat(t.getColumnsName())})),a}}])&&Qt(e.prototype,n),a&&Qt(e,a),t}();function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=oe(t);if(e){var r=oe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ie(this,n)}}function ie(t,e){return!e||"object"!==ee(e)&&"function"!=typeof e?se(t):e}function se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var le=function(t){i.$inject=["$scope","$injector","$rootScope","templateSrv"],function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(i,t);var e,n,a,r=re(i);function i(t,e,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),s=r.call(this,t,e),d.a.init(t,a),s.$rootScope=n,s.$scope=t,s.version=d.a.plugin.getVersion(),s.templateSrv=a,s.changedSource=!0,s.changedData=!0,s.changedOptions=!0,s.rulesHandler=void 0,s.flowchartHandler=void 0,s.metricHandler=void 0,s.panelDefaults={newFlag:!0,format:"short",valueName:"current",rulesData:Q.getDefaultData(),flowchartsData:Vt.getDefaultData()},f.a.defaults(s.panel,s.panelDefaults),s.panel.graphId="flowchart_".concat(s.panel.id),s.containerDivId="container_".concat(s.panel.graphId),s.events.on(u.PanelEvents.render,s.onRender.bind(se(s))),s.events.on(u.PanelEvents.refresh,s.onRefresh.bind(se(s))),s.events.on(u.PanelEvents.dataReceived,s.onDataReceived.bind(se(s))),s.events.on(u.PanelEvents.dataError,s.onDataError.bind(se(s))),s.events.on(u.PanelEvents.dataSnapshotLoad,s.onDataReceived.bind(se(s))),s.events.on(u.PanelEvents.editModeInitialized,s.onInitEditMode.bind(se(s))),s.events.on("template-variable-value-updated",s.onVarChanged.bind(se(s))),s.dashboard.events.on("template-variable-value-updated",s.onVarChanged.bind(se(s)),t),t.$root.onAppEvent&&t.$root.onAppEvent("template-variable-value-updated",s.onVarChanged.bind(se(s)),t),s}return e=i,(n=[{key:"onInitEditMode",value:function(){this.addEditorTab("Flowchart",Z,2),this.addEditorTab("Mapping",V,3),this.addEditorTab("Inspect",J,4)}},{key:"onRefresh",value:function(){this.onRender()}},{key:"onVarChanged",value:function(){void 0!==this.flowchartHandler&&(this.flowchartHandler.sourceChanged(),this.flowchartHandler.render())}},{key:"onRender",value:function(){}},{key:"onDataReceived",value:function(t){var e=d.a.trace.before(this.constructor.name+".onDataReceived()");this.metricHandler&&(this.metricHandler.initData(t),this.flowchartHandler&&this.flowchartHandler.dataChanged()),this.render(),e.after(),d.a.trace.resume()}},{key:"onDataError",value:function(){this.render()}},{key:"link",value:function(t,e,n,a){var r=d.a.trace.before(this.constructor.name+".link()");this.metricHandler=new te(this.$scope);var i=Q.getDefaultData();this.rulesHandler=new Q(i),void 0===this.panel.version&&void 0!==this.panel.styles?(this.rulesHandler.import(this.panel.styles),delete this.panel.styles):this.rulesHandler.import(this.panel.rulesData),this.panel.newFlag&&0===this.rulesHandler.countRules()&&this.rulesHandler.addRule(".*"),this.panel.rulesData=i;var s=Vt.getDefaultData();this.flowchartHandler=new Vt(t,e,a,s),void 0===this.panel.version&&void 0!==this.panel.flowchart?(this.flowchartHandler.import([this.panel.flowchart]),delete this.panel.flowchart):this.flowchartHandler.import(this.panel.flowchartsData),this.panel.newFlag&&0===this.flowchartHandler.countFlowcharts()&&this.flowchartHandler.addFlowchart("Main"),this.panel.flowchartsData=s,this.panel.newFlag=!1,this.panel.version=this.version,r.after()}},{key:"$onDestroy",value:function(){d.a.destroy()}}])&&ne(e.prototype,n),a&&ne(e,a),i}(a.MetricsPanelCtrl);le.templateUrl="./partials/module.html",n.d(e,"PanelCtrl",(function(){return le})),h.loadCss()}])}));
//# sourceMappingURL=module.js.map